<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
    	<record id="co_cau_search" model="ir.ui.view">
	        <field name="name">co.cau.search</field>
	        <field name="model">co.cau</field>
	        <field name="type">search</field>
	        <field name="arch" type="xml">
	            <search string="Thông tin đàn vật nuôi">
	                <group>
	                    <field name="chon_loai" />
	                    <field name="can_bo_ghi_so" />
	                    <field name="ngay_ghi_so" />                    
	                    <field name="tang_giam" />
	                    <field name="ly_do" />
	                    <field name="ten_ho_id" />
	                    <field name="quan_huyen_id" />
	                    <field name="phuong_xa_id" />
	                    <field name="khu_pho_id" />
	                    <field name="company_id"/>
	                    <field name="trang_thai"/>
	                </group>
	                <separator/>
                    <group expand="0" string="Group By...">
                        <filter string="Quận (huyện)" domain="[]" context="{'group_by':'quan_huyen_id'}"/>
                        <filter string="Phường (xã)" domain="[]"  context="{'group_by':'phuong_xa_id'}"/>
                        <filter string="Khu phố (ấp)" domain="[]" context="{'group_by':'khu_pho_id'}"/>
                        <filter string="Loài" domain="[]"  context="{'group_by':'chon_loai'}"/>
                        <filter string="Hộ" domain="[]"  context="{'group_by':'ten_ho_id'}"/>
                        <filter string="Ngày ghi sổ" domain="[]"  context="{'group_by':'ngay_ghi_so'}"/>
                    </group>
	            </search>	
	        </field>
	    </record>
    
        <record model="ir.ui.view" id="co_cau_tree">
            <field name="name">co.cau.tree</field>
            <field name="model">co.cau</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Thông tin đàn vật nuôi">
                    <field name="chon_loai" />
                    <field name="can_bo_ghi_so" />
                    <field name="ngay_ghi_so" />                    
                    <field name="tang_giam" />
                    <field name="ly_do" />
                    <field name="ten_ho_id" />
                    <field name="quan_huyen_id" />
                    <field name="phuong_xa_id" />
                    <field name="khu_pho_id" />
                    <field name="can_bo_id" />
                    <field name="company_id" string = 'Trạm'/>
                    <field name="trang_thai" invisible = '1'/>
                    <field name="trang_thai_id" />
                    <field name="hien_an" invisible = '1'/>
                    <field name="chinh_sua_rel" invisible = '1'/>
                </tree>
            </field>
        </record>
        
        <record model="ir.ui.view" id="co_cau_form">
            <field name="name">co.cau.form</field>
            <field name="model">co.cau</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="form Thông tin đàn vật nuôi" version="7.0">
                	<header>
	            		<button name="bt_duyet" groups = "green_erp_ccty_cocaudan.group_cocaudan_manager" attrs="{'invisible': [('hien_an', '!=', True)]}" string="Duyệt" type="object" class="oe_highlight" />
	                    <field name="trang_thai_id" widget="statusbar"/>
	            	</header> 
	                <sheet>
                		<group col="4"  string="Thông tin đàn vật nuôi">
		            		<field name="chon_loai" on_change = "onchange_chon_loai(chon_loai, ten_ho_id)" attrs="{'readonly': [('chinh_sua_rel', 'not in', ['nhap', False])]}"/>
		            		<field name="ngay_ghi_so" attrs="{'readonly': [('chinh_sua_rel', 'not in', ['nhap', False])]}"/>          
		                    <field name="can_bo_ghi_so" attrs="{'readonly': [('chinh_sua_rel', 'not in', ['nhap', False])]}"/>
		                    <field name="tang_giam" attrs="{'readonly': [('chinh_sua_rel', 'not in', ['nhap', False])]}"/>
		                    <field name="ly_do" attrs="{'readonly': [('chinh_sua_rel', 'not in', ['nhap', False])]}"/>
		                    <field name="quan_huyen_id" attrs="{'readonly': [('chinh_sua_rel', 'not in', ['nhap', False])]}"/>
		                    <field name="phuong_xa_id" domain="[('quan_huyen_id','=',quan_huyen_id)]" attrs="{'readonly': [('chinh_sua_rel', 'not in', ['nhap', False])]}"/>
		                    <field name="khu_pho_id" domain="[('phuong_xa_id','=',phuong_xa_id)]" attrs="{'readonly': [('chinh_sua_rel', 'not in', ['nhap', False])]}"/>
		                    <field name="ten_ho_id" on_change = "onchange_chon_loai(chon_loai, ten_ho_id)" domain="[('quan_huyen_id','=',quan_huyen_id), ('phuong_xa_id','=',phuong_xa_id), ('khu_pho_id','=',khu_pho_id)]" attrs="{'readonly': [('chinh_sua_rel', 'not in', ['nhap', False])]}"/>
                			<field name="can_bo_id" readonly = '1' attrs="{'readonly': [('chinh_sua_rel', 'not in', ['nhap', False])]}"/>
                			<field name="company_id" readonly = '1' string = 'Trạm' attrs="{'readonly': [('chinh_sua_rel', 'not in', ['nhap', False])]}"/>
                			<field name="trang_thai" invisible = '1'/>
                			<field name="hien_an" invisible = '1'/>
                			<field name="chinh_sua_rel" invisible = '1'/>
                		</group>
                		<notebook>
							<page string = "Thông tin chi tiết loài vật">
								<field name="chitiet_loai" nolabel='1' attrs="{'readonly': [('chinh_sua_rel', 'not in', ['nhap', False])]}">
									<tree editable='bottom' create = 'false' >
										<field name="name"/>
										<field name="tong_sl" sum = 'Total'/>
										<field name="so_luong" sum = 'Total'/>
									</tree>
								</field>
							</page>
						</notebook>
	                </sheet>
                </form>
            </field>
        </record>
       
        <record model="ir.actions.act_window" id="action_co_cau">
            <field name="name">Thông tin đàn vật nuôi</field>
            <field name="res_model">co.cau</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
        </record>
        
        
    </data>
</openerp>
