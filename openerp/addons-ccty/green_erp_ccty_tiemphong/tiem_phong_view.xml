<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
    	<record id="tiem_phong_search" model="ir.ui.view">
	        <field name="name">tiem.phong.search</field>
	        <field name="model">tiem.phong</field>
	        <field name="type">search</field>
	        <field name="arch" type="xml">
	            <search string="Tiêm phòng">
	                <group>
   						<field name="tu_tiem" />
	                	<field name="can_bo_tiem" />
	                    <field name="so_luong_tiem" />
	                    <field name="name" />                    
	                    <field name="tram_id" />
	                    <field name="can_bo_id" />
	                    <field name="loai_vat_id" />
	                    <field name="quan_huyen_id" />
	                    <field name="phuong_xa_id" />
	                    <field name="khu_pho_id" />
	                    <field name="ho_chan_nuoi_id" />
	                </group>
	            </search>	
	        </field>
	    </record>
    
        <record model="ir.ui.view" id="tiem_phong_tree">
            <field name="name">tiem.phong.tree</field>
            <field name="model">tiem.phong</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Tiêm phòng">
                	<field name="tu_tiem" />
                	<field name="can_bo_tiem" />
                    <field name="so_luong_tiem" />
                    <field name="name" />                    
                    <field name="tram_id" />
                    <field name="can_bo_id" />
                    <field name="can_bo_tiem" />
                    <field name="loai_vat_id" />
                    <field name="quan_huyen_id" />
                    <field name="phuong_xa_id" />
                    <field name="khu_pho_id" />
                    <field name="ho_chan_nuoi_id" />
                    <field name="loai_vaccine_id" />
                </tree>
            </field>
        </record>
        
        <record model="ir.ui.view" id="tiem_phong_form">
            <field name="name">tiem.phong.form</field>
            <field name="model">tiem.phong</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Tiêm phòng" version="7.0">
	                <sheet>
	                	<group  string="Quản Lý Tiêm Phòng">
		                	<field name="hinh_thuc_tiem" widget="radio" nolabel='1'/>
	                	</group>
	            			<group col="4">
			                    <field name="tram_id" options="{'create': false, 'create_edit': false}" attrs="{'invisible':[('hinh_thuc_tiem', '=', 'tu_tiem')]}"/>
			                    <field name="can_bo_id" options="{'create': false, 'create_edit': false}" domain="[('company_id','=',tram_id)]" attrs="{'invisible':[('hinh_thuc_tiem', '=', 'tu_tiem')]}"/>
			                    <field name="can_bo_tiem" />
			                    <field name="so_luong_tiem" />
			                    <field name="name" />                    
			                    <field name="loai_vat_id" options="{'create': false, 'create_edit': false}"/>
			                    <field name="loai_vaccine_id" options="{'create': false, 'create_edit': false}"/>
			                    <field name="quan_huyen_id" options="{'create': false, 'create_edit': false}" on_change="onchange_quan_huyen()"/>
			                    <field name="phuong_xa_id" options="{'create': false, 'create_edit': false}" on_change="onchange_phuong_xa()" domain="[('quan_huyen_id','=',quan_huyen_id)]"/>
			                    <field name="khu_pho_id" options="{'create': false, 'create_edit': false}" domain="[('phuong_xa_id','=',phuong_xa_id), ('quan_huyen_id','=',quan_huyen_id)]"/>
			                    <field name="ho_chan_nuoi_id" options="{'create': false, 'create_edit': false}" domain="[('quan_huyen_id','=',quan_huyen_id), ('phuong_xa_id','=',phuong_xa_id), ('khu_pho_id','=',khu_pho_id)]"/>
	                		</group>
                		
	                </sheet>
                </form>
            </field>
        </record>
       
        <record model="ir.actions.act_window" id="action_tiem_phong">
            <field name="name">Quản Lý Tiêm Phòng</field>
            <field name="res_model">tiem.phong</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
        </record>

    	<record id="tiem_phong_lmlm_search" model="ir.ui.view">
	        <field name="name">tiem.phong.lmlm.search</field>
	        <field name="model">tiem.phong.lmlm</field>
	        <field name="type">search</field>
	        <field name="arch" type="xml">
	            <search string="Tiêm phòng LMLM">
	                <group>
	                	<field name="loai_giay_tp_id" /> 
	                    <field name="name" /> 
	                    <field name="so_quyen" /> 
	                    <field name="ngay_tiem" />   
	                    <field name="loai_id" />             
	                    <field name="tram_id" />
	                    <field name="can_bo_id" />
	                    <field name="quan_huyen_id" />
	                    <field name="phuong_xa_id" />
	                    <field name="khu_pho_id" />
	                    <field name="ho_chan_nuoi_id" />
	                    <field name="can_bo_tiem" />
	                </group>
	            </search>	
	        </field>
	    </record>
    
        <record model="ir.ui.view" id="tiem_phong_lmlm_tree">
            <field name="name">tiem.phong.lmlm.tree</field>
            <field name="model">tiem.phong.lmlm</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Quản lý Tiêm phòng bệnh Lỡ mồm long móng">
 						<field name="loai_giay_tp_id" />
 						<field name="name" />      
 						<field name="so_quyen" />
 						<field name="ngay_tiem" />
 						<field name="loai_id" />    
 						<field name="can_bo_tiem" />          
	                    <field name="tram_id" />
	                    <field name="can_bo_id" />
	                    <field name="quan_huyen_id" />
	                    <field name="phuong_xa_id" />
	                    <field name="khu_pho_id" />
	                    <field name="ho_chan_nuoi_id" />
	                    <field name="trang_thai_id" />
                		<field name="hien_an" invisible = '1'/>
                		<field name="chinh_sua_rel" invisible = '1'/>
                </tree>
            </field>
        </record>
        
        <record model="ir.ui.view" id="tiem_phong_lmlm_form">
            <field name="name">tiem.phong.lmlm.form</field>
            <field name="model">tiem.phong.lmlm</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Quản lý Tiêm phòng bệnh Lỡ mồm long móng" version="7.0">
                    <header>
	            		<button name="bt_duyet" groups = "green_erp_ccty_tiemphong.group_tiemphong_manager" attrs="{'invisible': [('hien_an', '!=', True)]}" string="Duyệt" type="object" class="oe_highlight" />
	                    <field name="trang_thai_id" widget="statusbar"/>
	            	</header> 
	                <sheet>
	                		<group col="4">
	                			<field name="loai_giay_tp_id" attrs="{'readonly': [('chinh_sua_rel', 'not in', ['nhap', False])]}" options="{'create': false, 'create_edit': false}" />
		                		<field name="name" attrs="{'readonly': [('chinh_sua_rel', 'not in', ['nhap', False])]}"/>
		                		<field name="so_quyen" attrs="{'readonly': [('chinh_sua_rel', 'not in', ['nhap', False])]}" />
		                		<field name="ngay_tiem" attrs="{'readonly': [('chinh_sua_rel', 'not in', ['nhap', False])]}" />
		                		<field name="loai_id" options="{'create': false, 'create_edit': false}" context="{'search_loai_id':True}" on_change = "onchange_ho_chan_nuoi_id(ho_chan_nuoi_id, loai_id)" attrs="{'readonly': [('chinh_sua_rel', 'not in', ['nhap', False])]}"/>
			                    <field name="can_bo_tiem" attrs="{'readonly': [('chinh_sua_rel', 'not in', ['nhap', False])]}"/>
			                    <field name="tram_id" readonly = "1" attrs="{'readonly': [('chinh_sua_rel', 'not in', ['nhap', False])]}"/>
			                    <field name="can_bo_id" readonly = "1" domain="[('company_id','=',tram_id)]" attrs="{'readonly': [('chinh_sua_rel', 'not in', ['nhap', False])]}"/>
			                    <newline/>
			                    <field name="quan_huyen_id" options="{'create': false, 'create_edit': false}" on_change="onchange_quan_huyen()" attrs="{'readonly': [('chinh_sua_rel', 'not in', ['nhap', False])]}"/>
			                    <field name="phuong_xa_id" options="{'create': false, 'create_edit': false}" on_change="onchange_phuong_xa()" domain="[('quan_huyen_id','=',quan_huyen_id)]" attrs="{'readonly': [('chinh_sua_rel', 'not in', ['nhap', False])]}"/>
			                    <field name="khu_pho_id" options="{'create': false, 'create_edit': false}" on_change="onchange_khu_pho()" domain="[('phuong_xa_id','=',phuong_xa_id), ('quan_huyen_id','=',quan_huyen_id)]" attrs="{'readonly': [('chinh_sua_rel', 'not in', ['nhap', False])]}"/>
			                    <field name="ho_chan_nuoi_id" options="{'create': false, 'create_edit': false}" context="{'search_ten_ho_id':True}" on_change = "onchange_ho_chan_nuoi_id(ho_chan_nuoi_id, loai_id)" domain="[('quan_huyen_id','=',quan_huyen_id), ('phuong_xa_id','=',phuong_xa_id), ('khu_pho_id','=',khu_pho_id)]" attrs="{'readonly': [('chinh_sua_rel', 'not in', ['nhap', False])]}"/>
                				<field name="hien_an" invisible = '1'/>
                				<field name="chinh_sua_rel" invisible = '1'/>
                				<field name="tong_sl_tiem" invisible = '1'/>
	                		</group>
                			<notebook>
								<page string = "Thông tin chi tiết tiêm phòng">
									<field name="chi_tiet_tp_line" nolabel='1' attrs="{'readonly': [('chinh_sua_rel', 'not in', ['nhap', False])]}">
										<tree editable='bottom' create = 'false' delete = 'false'>
											<field name="name"/>
											<field name="tiem_phong" readonly="1"/>
											<field name="loai_benh_id" context="{'search_loai_benh':True, 'loai_id': parent.loai_id}" options="{'create': false, 'create_edit': false}" invisible = '1'/>
											<field name="so_luong" sum = 'Total'/>
											<field name="sl_ngoai_dien" sum = 'Total'/>
											<field name="sl_mien_dich" sum = 'Total'/>
											<field name="sl_thuc_tiem" sum = 'Total'/>
										</tree>
									</field>
								</page>
								<page string = "Thông tin chi tiết vaccine tiêm phòng">
									<field name="chi_tiet_vaccine_line" nolabel='1' attrs="{'readonly': [('chinh_sua_rel', 'not in', ['nhap', False])]}">
										<tree editable='bottom'>
											<field name="loai_vaccine_id" options="{'create': false, 'create_edit': false}" required = '1'/>
						                   	<field name="so_lo_id" options="{'create': false, 'create_edit': false}" required = '1' domain="[('vacxin_id','=',loai_vaccine_id)]" />
						                   	<field name="han_su_dung_rel" readonly = "1" />
						                    <field name="so_luong_vc"/>
										</tree>
									</field>
								</page>
							</notebook>
	                </sheet>
                </form>
            </field>
        </record>
       
        <record model="ir.actions.act_window" id="action_tiem_phong_lmlm">
            <field name="name">Quản lý Tiêm phòng bệnh Lỡ mồm long móng</field>
            <field name="res_model">tiem.phong.lmlm</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
        </record>
        			
    </data>
</openerp>
