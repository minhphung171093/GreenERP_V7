<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
    
	    <record id="hop_dong_noi_tree_view" model="ir.ui.view">
			<field name="name">hop.dong.noi.tree</field>
			<field name="model">hop.dong</field>
			<field name="arch" type="xml">
				<tree string="Hợp đồng nội" colors="gray:state== 'huy_bo';red:state== 'het_han'">
					<field name="name"/>
					<field name="company_id"/>
					<field name="partner_id"/>
					<field name="tu_ngay"/>
					<field name="den_ngay"/>
					<field name="ngay_nhanhang"/>
					<field name="amount_total"/>
					<field name="type" invisible="1"/>
					<field name="state"/>
				</tree>
			</field>
		</record>
		
		<record id="view_hop_dong_filter" model="ir.ui.view">
            <field name="name">hop.dong.select</field>
            <field name="model">hop.dong</field>
            <field name="arch" type="xml">
                <search string="Search Hợp đồng">
                    <field name="name"/>
                    <field name="partner_id"/>
                    <group expand="0" string="Group By...">
                        <filter string="Status" icon="terp-stock_effects-object-colorize" domain="[]" context="{'group_by':'state'}"/>
                    </group>
               </search>
            </field>
        </record>
		
		<record id="hop_dong_noi_form_view" model="ir.ui.view">
            <field name="name">hop.dong.noi.form</field>
            <field name="model">hop.dong</field>
            <field name="arch" type="xml">
	            <form string="Hợp đồng nội" version="7.0">
					<header>
						<button name="print_hopdong" string="In hợp đồng" type="object" class="oe_highlight"/>
						<button name="duyet" string="Duyệt" states="moi_tao" type="object" class="oe_highlight"/>
						<button name="het_han" string="Hết hạn" states="da_duyet" type="object" class="oe_highlight"/>
						<button name="huy_bo" string="Hủy bỏ" type="object" states="moi_tao,da_duyet,het_han" class="oe_highlight"/>
						<button name="set_to_draft" string="Quay lại mới tạo" states="huy_bo" type="object" class="oe_highlight"/>
						<field name="state" widget="statusbar" statusbar_visible="moi_tao,da_duyet,het_han,huy_bo"/>
					</header>
	            	<sheet>
	                    <h1>
	                    	<label string="Số"/>
	                        <field name="name" class="oe_inline" nolabel="1" />
	                    </h1>
	                    <group>
	                    	<field name="type" invisible='1'/>
	                    </group>
	                    <group col='4' colspan='2'>
	                    	<field name="company_id" context="{'show_address': 1}"/>
	                    	<field name="partner_id"  context="{'show_address': 1}"/>
						</group>
						<notebook>
							<page string="Thông tin chung">
								<group col='4' colspan='2'>
									<field name="tu_ngay" />
									<field name="den_ngay" />
									<field name="ngay_nhanhang" />
									<field name="diadiem_nhanhang" />
									<field name="thongbao_nhanhang" />
								</group>
							</page>
							<page string="Thông tin mặt hàng" >
								<field name="hopdong_line">
									<tree editable='top'>
	                                    <field name="product_id" on_change="onchange_product_id(product_id, context)"/>
	                                    <field name="name"/>
	                                    <field name="product_uom"/>
	                                    <field name="product_qty"/>
	                                    <field name="price_unit"/>
	                                    <field name="tax_id" widget="many2many_tags" domain="[('parent_id','=',False),('type_tax_use','&lt;&gt;','purchase')]"/>
	                                    <field name="price_subtotal"/>
									</tree>
								</field>
								<group class="oe_subtotal_footer oe_right" colspan="2" name="hopdong_total">
	                                <field name="amount_untaxed" widget='monetary' />
	                                <field name="amount_tax" widget='monetary' />
	                                <div class="oe_subtotal_footer_separator oe_inline">
	                                    <label for="amount_total" />
	                                    <button name="button_dummy"
	                                        states="moi_tao" string="(update)" type="object" class="oe_edit_only oe_link"/>
	                                </div>
	                                <field name="amount_total" nolabel="1" class="oe_subtotal_footer_separator" widget='monetary' />
	                            </group>
	                            <div class="oe_clear"/>
							</page>
						</notebook>
		         	</sheet>
		         </form>
			</field>
		</record>
          
		<record id="action_hop_dong_noi" model="ir.actions.act_window">
            <field name="name">Hợp đồng nội</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">hop.dong</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="view_id" ref="hop_dong_noi_tree_view"/>
            <field name="domain">[('type','=','hd_noi')]</field>
            <field name="context">{'default_type':'hd_noi'}</field>
        </record>
        <record model="ir.actions.act_window.view" id="action_hop_dong_noi1">
            <field name="sequence" eval="1"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="hop_dong_noi_tree_view"/>
            <field name="act_window_id" ref="action_hop_dong_noi"/>
        </record>
        <record model="ir.actions.act_window.view" id="action_hop_dong_noi2">
            <field name="sequence" eval="2"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="hop_dong_noi_form_view"/>
            <field name="act_window_id" ref="action_hop_dong_noi"/>
        </record>
        
        <record id="hop_dong_ngoai_tree_view" model="ir.ui.view">
			<field name="name">hop.dong.ngoai.tree</field>
			<field name="model">hop.dong</field>
			<field name="arch" type="xml">
				<tree string="Hợp đồng ngoại" colors="gray:state== 'huy_bo';red:state== 'het_han'">
					<field name="name"/>
					<field name="company_id"/>
					<field name="partner_id"/>
					<field name="tu_ngay"/>
					<field name="den_ngay"/>
					<field name="ngay_nhanhang"/>
					<field name="port_of_loading"/>
					<field name="port_of_discharge"/>
					<field name="amount_total"/>
					<field name="type" invisible="1"/>
					<field name="state"/>
				</tree>
			</field>
		</record>
		
		<record id="hop_dong_ngoai_form_view" model="ir.ui.view">
            <field name="name">hop.dong.ngoai.form</field>
            <field name="model">hop.dong</field>
            <field name="arch" type="xml">
	            <form string="Sale contract" version="7.0">
					<header>
						<button name="print_hopdong" string="Print contract" type="object" class="oe_highlight"/>
						<button name="duyet" string="Confirm" states="moi_tao" type="object" class="oe_highlight"/>
						<button name="het_han" string="Expire" states="da_duyet" type="object" class="oe_highlight"/>
						<button name="huy_bo" string="Cancel" type="object" states="moi_tao,da_duyet,het_han" class="oe_highlight"/>
						<button name="set_to_draft" string="Set to draft" states="huy_bo" type="object" class="oe_highlight"/>
						<field name="state" widget="statusbar" statusbar_visible="moi_tao,da_duyet,het_han,huy_bo"/>
					</header>
	            	<sheet>
	                    <h1>
	                    	<label string="No."/>
	                        <field name="name" class="oe_inline" nolabel="1" />
	                    </h1>
	                    <group>
	                    	<field name="type" invisible='1'/>
	                    </group>
	                    <group col='4' colspan='2'>
	                    	<field name="company_id" string="Company" context="{'show_address': 1}"/>
	                    	<field name="partner_id" string="Partner"  context="{'show_address': 1}"/>
						</group>
						<notebook>
							<page string="Information">
								<group col='4' colspan='2'>
									<field name="tu_ngay" string="From date" />
									<field name="den_ngay" string="To date"/>
									<field name="diadiem_nhanhang" string="Place of delivery"/>
									<field name="ngay_nhanhang" string="Date of shipment"/>
									<field name="port_of_loading" />
									<field name="partial_shipment" />
									<field name="transshipment" />
								</group>
							</page>
							<page string="Product line" >
								<field name="hopdong_line">
									<tree editable='top'>
	                                    <field name="product_id" on_change="onchange_product_id(product_id, context)"/>
	                                    <field name="name"/>
	                                    <field name="product_uom"/>
	                                    <field name="product_qty"/>
	                                    <field name="price_unit"/>
	                                    <field name="tax_id" widget="many2many_tags" domain="[('parent_id','=',False),('type_tax_use','&lt;&gt;','purchase')]"/>
	                                    <field name="price_subtotal"/>
									</tree>
								</field>
								<group class="oe_subtotal_footer oe_right" colspan="2" name="hopdong_total">
	                                <field name="amount_untaxed" widget='monetary' />
	                                <field name="amount_tax" widget='monetary' />
	                                <div class="oe_subtotal_footer_separator oe_inline">
	                                    <label for="amount_total" />
	                                    <button name="button_dummy"
	                                        states="moi_tao" string="(update)" type="object" class="oe_edit_only oe_link"/>
	                                </div>
	                                <field name="amount_total" nolabel="1" class="oe_subtotal_footer_separator" widget='monetary' />
	                            </group>
	                            <div class="oe_clear"/>
							</page>
						</notebook>
		         	</sheet>
		         </form>
			</field>
		</record>
		
        
        <record id="action_hop_dong_ngoai" model="ir.actions.act_window">
            <field name="name">Hợp đồng ngoại</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">hop.dong</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="view_id" ref="hop_dong_ngoai_tree_view"/>
            <field name="domain">[('type','=','hd_ngoai')]</field>
            <field name="context">{'default_type':'hd_ngoai'}</field>
        </record>
        <record model="ir.actions.act_window.view" id="action_hop_dong_ngoai1">
            <field name="sequence" eval="3"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="hop_dong_ngoai_tree_view"/>
            <field name="act_window_id" ref="action_hop_dong_ngoai"/>
        </record>
        <record model="ir.actions.act_window.view" id="action_hop_dong_ngoai2">
            <field name="sequence" eval="4"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="hop_dong_ngoai_form_view"/>
            <field name="act_window_id" ref="action_hop_dong_ngoai"/>
        </record>
        
        <menuitem id="hop_dong" name="Hợp đồng" sequence="0"/>
        <menuitem id="menu_hop_dong" parent="hop_dong" name="Hợp đồng" sequence="0"/>
    	<menuitem id="menu_action_hop_dong_noi" action="action_hop_dong_noi" name="Hợp đồng nội" parent="menu_hop_dong" sequence="0"/>
		<menuitem id="menu_action_hop_dong_ngoai" action="action_hop_dong_ngoai" name="Hợp đồng ngoại" parent="menu_hop_dong" sequence="1"/>
    	
    </data>
    
</openerp>
