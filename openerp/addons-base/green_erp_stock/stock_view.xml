<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
    
<!-- Modify Location and Warehouse -->
	    	<!-- Add location_return in stock_location-->
	    	<record id="view_location_tree2_general_modify" model="ir.ui.view">
	            <field name="name">view.location.tree2.general.modify</field>
	            <field name="model">stock.location</field>
	            <field name="inherit_id" ref="stock.view_location_tree2"/>
	            <field name="arch" type="xml">
	                <xpath expr="//field[@name='complete_name']" position="before">
	                    <field name="warehouse_id"/>
	                </xpath>
	            </field>
	        </record>
	        
	        <record id="view_internal_location_return" model="ir.ui.view">
	            <field name="name">stock.location.bool.return</field>
	            <field name="model">stock.location</field>
	            <field name="inherit_id" ref="stock.view_location_form"/>
	            <field name="arch" type="xml">
	            	<xpath expr="//label[@for='name']" position="before">
	                    <label for="warehouse_id" class="oe_edit_only"/>
                    	<h1><field name="warehouse_id" attrs="{'required': [('usage', '=', 'internal')]}"/></h1>
	                </xpath>
	            </field>
	        </record>
    	
    		<record id="view_stock_picking_add_amounttotal" model="ir.ui.view">
	            <field name="name">view.stock.picking.add.amounttotal</field>
	            <field name="model">stock.picking</field>
	            <field name="inherit_id" ref="stock.view_picking_form"/>
	            <field name="arch" type="xml">
	            	<xpath expr="//field[@name='stock_journal_id']" position="replace">
                    	<field name="stock_journal_id" widget="selection" on_change="onchange_journal(stock_journal_id)"/>
                    	<field name="location_id" required='1'/>
                    	<field name="location_dest_id" required='1'/>
                    	<field name="return" invisible='1' readonly="1"/>
	                </xpath>
	            </field>
	        </record>
		
	       <record id="view_picking_out_form_general_modify" model="ir.ui.view">
	            <field name="name">stock.picking.out.form_general_modify</field>
	            <field name="model">stock.picking.out</field>
	            <field name="inherit_id" ref="stock.view_picking_out_form"/>
	            <field name="arch" type="xml">
	            	<xpath expr="//field[@name='stock_journal_id']" position="replace">
                    	<field name="stock_journal_id" widget="selection" on_change="onchange_journal(stock_journal_id)"/>
                    	<field name="location_id" required='1'/>
                    	<field name="location_dest_id" required='1'/>
                    	<field name="return" invisible='1' readonly="1"/>
	                </xpath>
	            </field>
	        </record>
	        
	        <record id="view_picking_in_form_general_modify" model="ir.ui.view">
	            <field name="name">stock.picking.in.form_general_modify</field>
	            <field name="model">stock.picking.in</field>
	            <field name="inherit_id" ref="stock.view_picking_in_form"/>
	            <field name="arch" type="xml">
	            	<xpath expr="//field[@name='stock_journal_id']" position="replace">
                    	<field name="stock_journal_id" widget="selection" on_change="onchange_journal(stock_journal_id)"/>
                    	<field name="location_id" required='1'/>
                    	<field name="location_dest_id" required='1'/>
                    	<field name="return" invisible='1' readonly="1"/>
	                </xpath>
	            </field>
	        </record>

<!-- Modify Stock Journal -->
	    	<record model="ir.ui.view" id="stock.view_stock_journal_form">
	            <field name="name">Stock Journals</field>
	            <field name="model">stock.journal</field>
	            <field name="arch" type="xml">
	                <form string="Stock Journal" version="7.0">
	                    <group colspan="2" col="4">
	                         <field name="name"/>
	                         <field name="user_id"/>
	                         <field name="source_type"/>
	                         <field name="sequence_id"/>
	                    </group>
	                    <group colspan="2" col="4">
	                		<field name="from_location_id" nolabel="1" required="0"/>
	                	 	<field name="to_location_id" nolabel="1" required="0"/>
	                    </group>
	                </form>
	            </field>
	        </record>  
	        
<!-- Change action get form view of menu Internal Move, Filter Internal Moves with domain Stock Journal is Internal-->
	        <record id="stock.action_picking_tree6" model="ir.actions.act_window">
	            <field name="name">Internal Moves</field>
	            <field name="res_model">stock.picking</field>
	            <field name="type">ir.actions.act_window</field>
	            <field name="view_type">form</field>
	            <field name="view_mode">tree,form,calendar</field>
	            <field name="domain">[('type','=','internal'),('stock_journal_id.source_type','=','internal')]</field>
	            <field name="context">{'default_type': 'internal'}</field>
	            <field name="search_view_id" ref="stock.view_picking_internal_search"/>
	            <field name="help" type="html">
	              <p class="oe_view_nocontent_create">
	                Click to create an internal move request. 
	              </p><p>
	                Most operations are prepared automatically by OpenERP according
	                to your preconfigured logistics rules, but you can also record
	                manual stock movements.
	              </p>
	            </field>
	        </record>
        
	        <record model="ir.actions.act_window.view" id="stock.action_picking_tree6_form_view">
	            <field name="sequence" eval="2"/>
	            <field name="view_mode">form</field>
	            <field name="view_id" ref="view_stock_picking_add_amounttotal"/>
	            <field name="act_window_id" ref="stock.action_picking_tree6"/>
	        </record>
	        
	        <record id="stock.action_picking_tree4" model="ir.actions.act_window">
	            <field name="name">Incoming Shipments</field>
	            <field name="res_model">stock.picking.in</field>
	            <field name="type">ir.actions.act_window</field>
	            <field name="view_type">form</field>
	            <field name="view_mode">tree,form,calendar</field>
	            <field name="domain">[('type','=','in'),('return','=','none')]</field>
	            <field name="context">{'default_type': 'in', 'default_return': 'none', 'picking_type':False}</field>
	            <field name="search_view_id" ref="stock.view_picking_in_search"/>
	            <field name="help" type="html">
	              <p class="oe_view_nocontent_create">
	                Click to create an incoming shipment. 
	              </p><p>
	                The Incoming Shipments is the list of all orders you will
	                receive from your suppliers. An incoming shipment contains a
	                list of products to be received according to the original
	                purchase order.
	              </p>
	            </field>
	        </record>
	        
<!-- Delivery Orders -->
	        <record id="stock.action_picking_tree" model="ir.actions.act_window">
	            <field name="name">Delivery Orders</field>
	            <field name="res_model">stock.picking.out</field>
	            <field name="type">ir.actions.act_window</field>
	            <field name="view_type">form</field>
	            <field name="view_mode">tree,form,calendar</field>
	            <field name="domain">[('type','=','out'),('return','=','none')]</field>
	            <field name="context">{'default_type': 'out', 'default_return': 'none'}</field>
	            <field name="search_view_id" ref="stock.view_picking_out_search"/>
	            <field name="help" type="html">
	              <p class="oe_view_nocontent_create">
	                Click to create a delivery order. 
	              </p><p>
	                This is the list of all delivery orders that have to be
	                prepared, according to your different sales orders and your
	                logistics rules.
	              </p>
	            </field>
	        </record>
	        
<!-- Customer/Supplier return -->

	        <record id="action_picking_return_customer" model="ir.actions.act_window">
	            <field name="name">Return from Customer</field>
	            <field name="res_model">stock.picking.out</field>
	            <field name="type">ir.actions.act_window</field>
	            <field name="view_type">form</field>
	            <field name="view_mode">tree,form,calendar</field>
	            <field name="domain">[('return','=','customer')]</field>
	            <field name="context">{"no_create":False, 'default_type': 'in', 'default_return': 'customer'}</field>
	            <field name="search_view_id" ref="stock.view_picking_in_search"/>
	        </record>
	        <record id="action_picking_return_supplier" model="ir.actions.act_window">
	            <field name="name">Return to Supplier</field>
	            <field name="res_model">stock.picking.in</field>
	            <field name="type">ir.actions.act_window</field>
	            <field name="view_type">form</field>
	            <field name="view_mode">tree,form,calendar</field>
	            <field name="domain">[('return','=','supplier')]</field>
	            <field name="context">{"no_create":False, 'default_type': 'out', 'default_return': 'supplier'}</field>
	            <field name="search_view_id" ref="stock.view_picking_out_search"/>
	        </record>
	        
	        <menuitem action="action_picking_return_customer" id="menu_action_picking_return_customer" parent="stock.menu_stock_warehouse_mgmt" sequence="200"/>
	        <menuitem action="action_picking_return_supplier" id="menu_action_picking_return_supplier" parent="stock.menu_stock_warehouse_mgmt" sequence="300"/>
	        	
    </data>
</openerp>