<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
    
    <!-- Tree Công Việc & Tree Công Việc Con  -->
 		<record model="ir.ui.view" id="cong_viec_tree">
            <field name="name">cong.viec.tree</field>
            <field name="model">nhom.cong.viec</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Công việc" >
                	<field name="name" string = "Công việc"/>
                	<field name="nhan_vien_ids" />
                	<field name="quy_trinh_id" />
                	<field name="cong_viec_id" />
                	<field name="ngay_het_han" />
                	<field name="state" />
                	<field name="loai" invisible = '1'/>
                	<field name="trangthai_ncv" invisible='1'/>
                	<field name="trangthai_cv" invisible='1'/>
                	<field name="trangthai_cvc" invisible='1'/>
                	<field name="trangthai_cv_tg" invisible='1'/>
                </tree>
            </field>
        </record>
        
        <record model="ir.ui.view" id="cong_viec_con_tree">
            <field name="name">cong.viec.con.tree</field>
            <field name="model">nhom.cong.viec</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Công việc con" >
                	<field name="name" string = "Công việc con"/>
                	<field name="nhan_vien_id" />
                	<field name="quy_trinh_id" />
                	<field name="nhom_cv_id" />
                	<field name="cong_viec_con_id" />
                	<field name="ngay_het_han" />
                	<field name="state" />
                	<field name="loai" invisible = '1'/>
                	<field name="trangthai_ncv" invisible='1'/>
                	<field name="trangthai_cv" invisible='1'/>
                	<field name="trangthai_cvc" invisible='1'/>
                	<field name="trangthai_cv_tg" invisible='1'/>
                </tree>
            </field>
        </record>
        
        <record model="ir.ui.view" id="phan_cong_cong_viec_tree">
            <field name="name">phan.cong.cong.viec.tree</field>
            <field name="model">nhom.cong.viec</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Công việc phân công" >
                	<field name="name" string = "Công việc phân công"/>
                	<field name="phong_ban_id" />
                	<field name="ngay_het_han" />
                	<field name="quy_trinh_id" />
                	<field name="phan_cong_phong_ban_id" />
                	<field name="ghi_chu" />
                	<field name="state" />
                	<field name="loai" invisible = '1'/>
                	<field name="trangthai_ncv" invisible='1'/>
                	<field name="trangthai_cv" invisible='1'/>
                	<field name="trangthai_cvc" invisible='1'/>
                	<field name="trangthai_cv_tg" invisible='1'/>
                </tree>
            </field>
        </record>
 <!--End Tree Công Việc & Tree Công Việc Con  -->    
    	
    	<!--   Action Nút tạo công việc mới từ nhóm công việc -->       
        
        <record id="action_tao_congviec" model="ir.actions.act_window">
            <field name="name">Công việc</field>
            <field name="res_model">nhom.cong.viec</field>
            <field name="view_type">form</field>
            <field name="domain">[('loai','=','3_cv'),('cong_viec_id','=',active_id)]</field>
            <field name="view_mode">tree,form</field>
            <field name="view_id" ref="cong_viec_tree"/>
            <field name="context">{'default_cong_viec_id': active_id, 'default_loai': '3_cv', 'default_state': 'da_giao'}</field>
        </record>
        
  <!-- END Action Nút tạo công việc mới từ nhóm công việc -->  
    	
    	<record id="action_tao_congviec_phancong" model="ir.actions.act_window">
            <field name="name">Công việc phân công</field>
            <field name="res_model">nhom.cong.viec</field>
            <field name="view_type">form</field>
            <field name="domain">[('loai','=','3_cv'),('cong_viec_pc_id','=',active_id)]</field>
            <field name="view_mode">tree,form</field>
            <field name="view_id" ref="cong_viec_tree"/>
            <field name="context">{'default_cong_viec_pc_id': active_id, 'default_loai': '3_cv', 'default_state': 'da_giao'}</field>
        </record>
    	
    	<record id="action_tao_congviec_con" model="ir.actions.act_window">
            <field name="name">Công việc con</field>
            <field name="res_model">nhom.cong.viec</field>
            <field name="view_type">form</field>
            <field name="domain">[('loai','=','4_cv_con'),('cong_viec_con_id','=',active_id)]</field>
            <field name="view_mode">tree,form</field>
            <field name="view_id" ref="cong_viec_con_tree"/>
            <field name="context">{'default_cong_viec_con_id': active_id, 'default_loai': '4_cv_con', 'default_state': 'da_giao'}</field>
        </record>
        
        <record id="action_phancong_phongban" model="ir.actions.act_window">
            <field name="name">Phân công phòng ban</field>
            <field name="res_model">nhom.cong.viec</field>
            <field name="view_type">form</field>
            <field name="domain">[('loai','=','2_nhom_cv_tg'),('phan_cong_phong_ban_id','=',active_id)]</field>
            <field name="view_mode">tree,form</field>
            <field name="view_id" ref="phan_cong_cong_viec_tree"/>
            <field name="context">{'default_phan_cong_phong_ban_id': active_id, 'default_loai': '2_nhom_cv_tg', 'default_state': 'da_giao'}</field>
        </record>
    	
  		<record id="search_loai" model="ir.ui.view">
            <field name="name">search.loai</field>
            <field name="model">nhom.cong.viec</field>
            <field name="arch" type="xml">
                <search>
                	<field name="name"/>
                	<field name="state"/>
                	<field name="loai"/>
                	<field name="tt_lanhdao"/>
                    <group expand="0" string="Group By...">
                        <filter string="Loại" name = "loai" icon="terp-partner" domain="[]" context="{'group_by':'loai'}"/>
                        <filter string="Trạng thái" name = "state" icon="terp-partner" domain="[]" context="{'group_by':'state'}"/>
                        <filter string="Trạng thái lãnh đạo" name = "tt_lanhdao" icon="terp-partner" domain="[]" context="{'group_by':'tt_lanhdao'}"/>
                    </group>
               </search>
            </field>
        </record>
    	
         <record model="ir.ui.view" id="nhom_cong_viec_nhap_kanban">
            <field name="name">nhom.cong.viec.nhap.kanban</field>
            <field name="model">nhom.cong.viec</field>
            <field name="arch" type="xml">
                <kanban default_group_by = "tt_lanhdao" edit = 'false'>
                    <field name="name" />
                    <field name="name_kanban" />
                	<field name="phong_ban_id" />
                	<field name="quy_trinh_id" />
                	<field name="ho_tro" />
                	<field name="phong_ban_ids" />
                	<field name="ghi_chu" />
                	<field name="state" />
                	<field name="loai" />
                	<field name="tt_lanhdao" />
                	<field name="color" />
                    <templates>
                    <t t-name="kanban-box">
                    	<div t-attf-class="oe_kanban_color_#{kanban_getcolor(record.color.raw_value)} oe_kanban_card oe_kanban_global_click oe_semantic_html_override">
                            <div class="oe_dropdown_toggle oe_dropdown_kanban" groups="base.group_user">
                                <span class="oe_e">í</span>
                                <ul class="oe_dropdown_menu">
                                    <t t-if="widget.view.is_action_enabled('edit')"><li><a type="edit">Edit...</a></li></t>
                                    <t t-if="widget.view.is_action_enabled('delete')"><li><a type="delete">Delete</a></li></t>
                                    <li>
                                    </li>
                                    <li><ul class="oe_kanban_colorpicker" data-field="color"/></li>
                                </ul>
                                 
                            </div>

                            <div class="oe_kanban_content">
                                <div><b><field name="name_kanban"/></b></div>
                            </div>
                            <div class="oe_clear"></div>
                        </div>
                    </t>
                    </templates>
                </kanban>
            </field>
         </record>   
         
         <record model="ir.ui.view" id="nhom_cong_viec_nhap_tree">
            <field name="name">nhom.cong.viec.nhap.tree</field>
            <field name="model">nhom.cong.viec</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Nhóm công việc đang dự thảo" >
                	<field name="name" />
                	<field name="phong_ban_id" />
                	<field name="quy_trinh_id" />
                	<field name="ngay_het_han" />
                	<field name="ho_tro" invisible = '1'/>
                	<field name="phong_ban_ids" />
                	<field name="state" />
                	<field name="ht_per" />
                	<field name="loai" invisible = '1'/>
                	<field name="trangthai_ncv" invisible='1'/>
                	<field name="trangthai_cv" invisible='1'/>
                	<field name="trangthai_cvc" invisible='1'/>
                	<field name="trangthai_cv_tg" invisible='1'/>
                	<field name="tt_lanhdao" invisible='1' />
                </tree>
            </field>
        </record>
        
        <record model="ir.ui.view" id="nhom_cong_viec_nhap_form">
            <field name="name">nhom.cong.viec.nhap.form</field>
            <field name="model">nhom.cong.viec</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Nhóm công việc đang dự thảo" version="7.0"  >
                <header>
                		<button name="bt_tao_ncv" string="Xác Nhận" type="object" class="oe_highlight" attrs="{'invisible':['|',('loai','not in',['1_nhom_cv']),('state','!=','nhap')]}"/>
                		<button name="bt_nhan_ncv" string="Nhận nhóm công việc" type="object" class="oe_highlight" attrs="{'invisible':['|',('loai','not in',['1_nhom_cv']),('state','!=','da_giao')]}"/>
	                    <button name="bt_nhan_cv_pc" string="Nhận công việc phân công" type="object" class="oe_highlight" attrs="{'invisible':['|',('loai','not in',['2_nhom_cv_tg']),('state','!=','da_giao')]}"/>
	                    <button name="bt_nhan_cv" string="Nhận công việc" type="object" class="oe_highlight" attrs="{'invisible':['|',('loai','!=','3_cv'),('state','!=','da_giao')]}"/>
	                    <button name="bt_nhan_cv_con" string="Nhận công việc con" type="object" class="oe_highlight" attrs="{'invisible':['|',('loai','!=','4_cv_con'),('state','!=','da_giao')]}"/>
	                    <button name="bt_nhan_cttth" string="Nhận chi tiết thực hiện" type="object" class="oe_highlight" attrs="{'invisible':['|',('loai','!=','5_ct_th'),('state','!=','da_giao')]}"/>
	                    
	                    <button name="bt_hoan_thanh_ctth" string="Hoàn Thành" type="object" class="oe_highlight" attrs="{'invisible':['|',('loai','!=','5_ct_th'),('state','!=','dang_lam')]}"/>
	                    <button name="bt_duyet_ctth" string="Duyệt" type="object" class="oe_highlight" attrs="{'invisible':['|',('loai','!=','5_ct_th'),('state','!=','cho_duyet')]}"/>
                		
                		<button name="bt_hoan_thanh_cv_tg" string="Hoàn Thành" type="object" class="oe_highlight" attrs="{'invisible':['|','|',('loai','!=','2_nhom_cv_tg'),('state','!=','dang_lam'),('trangthai_cv_tg','!=','xong')]}"/>
                		<button name="bt_duyet_cv_tg" string="Duyệt" type="object" class="oe_highlight" attrs="{'invisible':['|',('loai','!=','2_nhom_cv_tg'),('state','!=','cho_duyet')]}"/>
                		
                		<button name="bt_hoan_thanh_cv" string="Hoàn Thành" type="object" class="oe_highlight" attrs="{'invisible':['|','|',('loai','!=','3_cv'),('state','!=','dang_lam'),('trangthai_cv','!=','xong')]}"/>
                		<button name="bt_duyet_cv" string="Duyệt" type="object" class="oe_highlight" attrs="{'invisible':['|','|',('loai','!=','3_cv'),('state','!=','cho_duyet')]}"/>
                		
                		<button name="bt_hoan_thanh_cvc" string="Hoàn Thành" type="object" class="oe_highlight" attrs="{'invisible':['|','|',('loai','!=','4_cv_con'),('state','!=','dang_lam'),('trangthai_cvc','!=','xong')]}"/>
                		<button name="bt_duyet_cvc" string="Duyệt" type="object" class="oe_highlight" attrs="{'invisible':['|','|',('loai','!=','4_cv_con'),('state','!=','cho_duyet')]}"/>
	                    
	                    <button name="bt_hoan_thanh_ncv" string="Hoàn Thành" type="object" class="oe_highlight" attrs="{'invisible':['|','|',('loai','!=','1_nhom_cv'),('state','!=','dang_lam'),('trangthai_ncv','!=','xong')]}"/>
	                    <button name="bt_cho_duyet" string="Ban Hành" type="object" class="oe_highlight" attrs="{'invisible':['|',('loai','!=','1_nhom_cv'), ('state','!=','cho_duyet')]}"/>
	                    
<!--	                    <button name="%(action_tao_congviec)d" string="Tạo công việc" type="action" class="oe_highlight" attrs="{'invisible':['|','|','|',('ho_tro','=','co'),('loai','not in',['1_nhom_cv']),('quy_trinh_id','!=',False),('state','in',['nhap','da_giao','cho_duyet', 'duyet'])]}"/> 
	                	<button name="%(action_tao_congviec_phancong)d" string="Tạo công việc" type="action" class="oe_highlight" attrs="{'invisible':['|','|',('loai','not in',['2_nhom_cv_tg']),('quy_trinh_id','!=',False),('state','in',['da_giao','cho_duyet', 'duyet'])]}"/> 
	                	<button name="%(action_tao_congviec_con)d" string="Tạo công việc con" type="action" class="oe_highlight" attrs="{'invisible':['|','|',('loai','!=','3_cv'),('quy_trinh_id','!=',False),('state','in',['da_giao','cho_duyet', 'duyet'])]}"/> 
	                	<button name="%(action_phancong_phongban)d" string="Phân công công việc" type="action" class="oe_highlight" attrs="{'invisible':['|','|',('loai','!=','1_nhom_cv'),('ho_tro','=','khong'),('state','in',['nhap','da_giao','cho_duyet', 'duyet'])]}"/>   -->
	                    <field name="state" widget="statusbar" statusbar_visible="nhap,da_giao,dang_lam,cho_duyet,duyet" />
	            </header>  
	                <sheet>
	                <h2>
	                	<label string='Tên nhóm công việc' attrs="{'invisible':[('loai','!=','1_nhom_cv')]}"/>
						<label string='Tên công việc' attrs="{'invisible':[('loai','!=','3_cv')]}"/>
						<label string='Tên công việc con' attrs="{'invisible':[('loai','!=','4_cv_con')]}"/>
						<label string='Tên chi tiết thực hiện' attrs="{'invisible':[('loai','!=','5_ct_th')]}"/>
						<label string='Tên công việc phân công PBHT' attrs="{'invisible':[('loai','!=','2_nhom_cv_tg')]}"/>
						<field name="name" nolabel='1' attrs="{'readonly':[('state','in',['cho_duyet', 'duyet'])]}"/>
	                </h2>
	                <h3>
						<label for='ht_per'/>
						<field name="ht_per" nolabel='1' />
	                </h3>
	                <group>
 						<group >
 							<field name="ho_tro" invisible = '1' widget="radio" attrs="{'invisible':[('loai','!=','1_nhom_cv')], 'readonly':[('state','in',['cho_duyet', 'duyet'])]}"/>
 							<field name="nhan_vien_ids" widget="many2many_tags" attrs="{'invisible':[('loai','!=','3_cv')],'required':[('loai','=','3_cv')], 'readonly':[('state','in',['cho_duyet', 'duyet'])]}" options="{'create': false, 'create_edit': false}"/>
 							<field name="cong_viec_con_id" string = 'Công việc' options="{'create': false, 'create_edit': false}" attrs="{'invisible':[('loai','!=','4_cv_con')],'required':[('loai','=','4_cv_con')],'readonly':[('state','in',['cho_duyet', 'duyet'])]}"/>
 							<field name="stt" attrs="{'invisible':[('loai','!=','5_ct_th')]}"/>
 							<field name="nhan_vien_id" options="{'create': false, 'create_edit': false}" attrs="{'invisible':[('loai','not in',['4_cv_con', '5_ct_th'])],'required':[('loai','in',['4_cv_con', '5_ct_th'])],'readonly':[('state','in',['cho_duyet', 'duyet'])]}"/>
                			<field name="yeu_cau_kq" attrs="{'invisible':[('loai','!=','5_ct_th')]}"/>
                			<field name="trangthai_ncv" invisible='1'/>
		                	<field name="trangthai_cv" invisible='1'/>
		                	<field name="trangthai_cvc" invisible='1'/>
		                	<field name="trangthai_cv_tg" invisible='1'/>
		                	<field name="tt_lanhdao" invisible='1' />
		                	<field name="cv_tg_id" attrs="{'invisible':[('loai','not in',['4_cv_con'])], 'readonly':[('state','in',['cho_duyet', 'duyet'])]}" domain="[('loai','=','2_nhom_cv_tg')]" string = 'Công việc phân công PBHT' options="{'create': false, 'create_edit': false}"/>
		                	<field name="phong_ban_id" options="{'create': false, 'create_edit': false}" attrs="{'invisible':[('loai','not in',['1_nhom_cv','2_nhom_cv_tg'])],'required':[('loai','in',['1_nhom_cv','2_nhom_cv_tg'])],'readonly':[('state','in',['cho_duyet', 'duyet'])]}"/>
		                	<field name="phong_ban_ids" on_change = "onchange_phong_ban_ids(phong_ban_ids)" widget="many2many_tags" options="{'create': false, 'create_edit': false}" attrs="{'invisible':['|',('quy_trinh_id','!=',False),('loai','!=','1_nhom_cv')],'readonly':[('state','in',['cho_duyet', 'duyet'])]}" />
 							<field name="cong_viec_pc_id" attrs="{'invisible':['|',('loai','not in',['3_cv']),('cong_viec_id','!=',False)],'required':[('cong_viec_id','=',False),('loai','=','3_cv')], 'readonly':[('state','in',['cho_duyet', 'duyet'])]}" domain="[('loai','=','2_nhom_cv_tg')]" string = 'Công việc phân công PBHT' options="{'create': false, 'create_edit': false}"/>
			                <field name="nhom_cv_pc_id" attrs="{'invisible':['|',('loai','not in',['3_cv']),('cong_viec_id','!=',False)],'required':[('cong_viec_id','=',False),('loai','=','3_cv')], 'readonly':[('state','in',['cho_duyet', 'duyet'])]}" domain="[('loai','=','1_nhom_cv')]" string = 'Nhóm công việc' options="{'create': false, 'create_edit': false}"/>
 						</group>
	                	<group>
		                	<field name="quy_trinh_id" domain="[('quy_trinh_id','=',False)]" on_change = "onchange_quy_trinh_id(quy_trinh_id,loai,state)" options="{'create': false, 'create_edit': false}" attrs="{'invisible':['|',('ho_tro','=','co'),('loai','=','5_ct_th')], 'readonly':[('state','in',['cho_duyet', 'duyet'])]}" />
			                <field name="ngay_het_han" />
			                <field name="phan_cong_phong_ban_id" attrs="{'invisible':[('loai','not in',['2_nhom_cv_tg'])],'required':[('loai','=','2_nhom_cv_tg')], 'readonly':[('state','in',['cho_duyet', 'duyet'])]}" domain="[('loai','=','1_nhom_cv')]" options="{'create': false, 'create_edit': false}"/>
			                <field name="cong_viec_id" attrs="{'invisible':['|',('cong_viec_pc_id','!=',False),('loai','not in',['3_cv'])],'required':[('cong_viec_pc_id','=',False),('loai','=','3_cv')], 'readonly':[('state','in',['cho_duyet', 'duyet'])]}" domain="[('loai','=','1_nhom_cv')]" string = 'Nhóm công việc' options="{'create': false, 'create_edit': false}"/>
	                		<field name="nhom_cv_id" attrs="{'invisible':[('loai','not in',['4_cv_con'])],'required':[('loai','=','4_cv_con')], 'readonly':[('state','in',['cho_duyet', 'duyet'])]}" domain="[('loai','=','1_nhom_cv')]" string = 'Nhóm công việc' options="{'create': false, 'create_edit': false}"/>
	                		<field name="cach_thuc_hien" attrs="{'invisible':[('loai','!=','5_ct_th')]}"/>
        					<field name="datas" filename="datas_fname" string="Biểu mẫu kết quả" attrs="{'invisible':[('loai','!=','5_ct_th')]}"/>
                            <field name="datas_fname" invisible="1" class="oe_inline oe_right" attrs="{'invisible':[('loai','!=','5_ct_th')]}"/>
	                	</group>
	                	<group>
		                	<field name="loai" invisible = '1'/>
	                	</group>
		            </group>
	               	<group col="4" colspan="2" >
	                	<field name="ghi_chu" attrs="{'invisible':[('loai','not in',['1_nhom_cv','2_nhom_cv_tg'])], 'readonly':[('state','in',['cho_duyet', 'duyet'])]}"/>
	                </group>
 					
            		<notebook>
            		
        <!-- Loai: Nhóm CV  -->
        
	                     <page string="Chi tiết thực hiện" attrs="{'invisible':['|',('loai','not in',['1_nhom_cv']),'|',('ho_tro','=','co'),'&amp;',('ho_tro','=','khong'),('quy_trinh_id','=',False)]}">
	                    	<field name="ct_th_nhom_cv_line" attrs="{'readonly':[('state','in',['cho_duyet', 'duyet'])]}" context = "{'default_loai': '5_ct_th', 'default_state': 'nhap'}" nolabel='1' >
	                    		<tree>
	                    			<field name="stt"/>
		                			<field name="name" string = 'Tên chi tiết'/>
		                			<field name="nhan_vien_id" required = '1' options="{'create': false, 'create_edit': false}"/>
		                			<field name="yeu_cau_kq" />
		                            <field name="cach_thuc_hien" />
		                            <field name="ngay_het_han" />
		        					<field name="datas" filename="datas_fname" string="Biểu mẫu kết quả" invisible="1"/>
		                            <field name="datas_fname" invisible="1" class="oe_inline oe_right"/>
		                            <field name="state" />
		                            <field name="loai" invisible = '1'/>
		                        </tree>
		                        <form version="7.0">
			                        <header>
					                		<button name="bt_nhan_cttth" states="da_giao" string="Nhận chi tiết thực hiện" type="object" class="oe_highlight"/>
						                    <field name="state" widget="statusbar" statusbar_visible="nhap,da_giao,dang_lam,cho_duyet,duyet" />
						                    <field name="loai" invisible='1'/>
						            </header>  
						            <sheet>
				                        <group col="4" colspan="2">
				                        	<field name="stt"/>
				                        	<field name="name" string = 'Tên chi tiết'/>
				                			<field name="nhan_vien_id" required = '1' options="{'create': false, 'create_edit': false}"/>
				                			<field name="yeu_cau_kq" />
				                            <field name="cach_thuc_hien" />
				                            <field name="ngay_het_han" />
				        					<field name="datas" filename="datas_fname" string="Biểu mẫu kết quả"/>
				                            <field name="datas_fname" invisible="1" class="oe_inline oe_right"/>
				                         </group>  
				                   </sheet>
		                        </form>
	                		</field>
	                    </page>
	                     <page string="Công việc" attrs="{'invisible':['|',('loai','not in',['1_nhom_cv']),'|',('quy_trinh_id','!=',False),('ho_tro','=','co')]}">
	                    	<field name="cong_viec_line" attrs="{'readonly':[('state','in',['da_giao', 'cho_duyet', 'duyet'])]}" nolabel='1' context = "{'default_loai': '3_cv', 'default_state':'nhap', 'default_cong_viec_id':active_id, 'form_view_ref':'nhom_cong_viec_nhap_form'}" >
	                    		<tree>
		                			<field name="name" string = 'Tên công việc'/>
		             <!--               <field name="quy_trinh_id" on_change = "onchange_quy_trinh_id(quy_trinh_id,loai,state)" options="{'create': false, 'create_edit': false}"/>  -->
		                            <field name="nhan_vien_ids" widget="many2many_tags" options="{'create': false, 'create_edit': false}"/>
		        					<field name="ghi_chu"/>
		        					<field name="ngay_het_han" />
		        					<field name="ht_per" readonly = '1' />
		                            <field name="state" readonly = '1'/>
		                            <field name="loai" invisible = '1'/> 
		                        </tree>
					         </field>
					      </page> 
					      
					     <page string="Phân Công Phòng Ban" attrs="{'invisible':['|',('loai','not in',['1_nhom_cv']),'|','&amp;',('quy_trinh_id','!=',False),('ho_tro','=','khong'),'&amp;',('ho_tro','=','khong'),('quy_trinh_id','=',False)]}">
	                    	<field name="phan_cong_phong_ban_line" attrs="{'readonly':[('state','in',['da_giao', 'cho_duyet', 'duyet'])]}" nolabel='1' context = "{'default_phan_cong_phong_ban_id': active_id, 'default_loai': '2_nhom_cv_tg', 'default_state': 'nhap', 'form_view_ref':'nhom_cong_viec_nhap_form'}">
	                    		<tree>
		                			<field name="name" string = 'Tên công việc'/>
		                			<field name="phong_ban_id" required = '1' options="{'create': false, 'create_edit': false}"/>
		               <!--             <field name="quy_trinh_id" on_change = "onchange_quy_trinh_id(quy_trinh_id,loai,state)" options="{'create': false, 'create_edit': false}"/>   -->
		        					<field name="ghi_chu"/>
		                            <field name="ngay_het_han" />
		                            <field name="ht_per" readonly = '1' />
		                            <field name="state" readonly = '1'/>
		                            <field name="loai" invisible = '1'/>
		                        </tree>
					         </field>
					      </page>
		<!-- End Loai: Nhóm CV  -->
					      
		<!-- Loai: Nhóm CV trung gian  -->
					      
					      <page string="Chi tiết thực hiện" attrs="{'invisible':['|',('loai','not in',['2_nhom_cv_tg']),('quy_trinh_id','=',False)]}">
	                    	<field name="ct_th_cv_tg_line" attrs="{'readonly':[('state','in',['cho_duyet', 'duyet'])]}" context = "{'default_loai': '5_ct_th', 'default_state': 'nhap'}" nolabel='1' >
	                    		<tree>
	                    			<field name="stt"/>
		                			<field name="name" string = 'Tên chi tiết'/>
		                			<field name="nhan_vien_id" required = '1' options="{'create': false, 'create_edit': false}"/>
		                			<field name="yeu_cau_kq" />
		                            <field name="cach_thuc_hien" />
		                            <field name="ngay_het_han" />
		        					<field name="datas" filename="datas_fname" string="Biểu mẫu kết quả" invisible="1"/>
		                            <field name="datas_fname" invisible="1" class="oe_inline oe_right"/>
		                            <field name="state" />
		                            <field name="loai" invisible = '1'/>
		                        </tree>
		                        <form version="7.0">
			                        <header>
					                		<button name="bt_nhan_cttth" states="da_giao" string="Nhận chi tiết thực hiện" type="object" class="oe_highlight"/>
						                    <field name="state" widget="statusbar" statusbar_visible="nhap,da_giao,dang_lam,cho_duyet,duyet" />
						                    <field name="loai" invisible='1'/>
						            </header>  
						            <sheet>
				                        <group col="4" colspan="2">
				                        	<field name="stt"/>
				                        	<field name="name" string = 'Tên chi tiết'/>
				                			<field name="nhan_vien_id" required = '1' options="{'create': false, 'create_edit': false}"/>
				                			<field name="yeu_cau_kq" />
				                            <field name="cach_thuc_hien" />
				                            <field name="ngay_het_han" />
				        					<field name="datas" filename="datas_fname" string="Biểu mẫu kết quả"/>
				                            <field name="datas_fname" invisible="1" class="oe_inline oe_right"/>
				                         </group>  
			                        </sheet>  
		                        </form>
	                		</field>
	                    </page>
	                     <page string="Công việc" attrs="{'invisible':['|',('loai','not in',['2_nhom_cv_tg']),('quy_trinh_id','!=',False)]}">
	                    	<field name="cong_viec_pc_line" attrs="{'readonly':[('state','in',['da_giao', 'cho_duyet', 'duyet'])]}" nolabel='1' context = "{'default_cong_viec_pc_id': active_id, 'default_loai': '3_cv', 'default_state': 'nhap', 'form_view_ref':'nhom_cong_viec_nhap_form'}" >
	                    		<tree>
		                			<field name="name" string = 'Tên công việc'/>
		             <!--               <field name="quy_trinh_id" on_change = "onchange_quy_trinh_id(quy_trinh_id,loai,state)" options="{'create': false, 'create_edit': false}"/>  -->
		                            <field name="nhan_vien_ids" widget="many2many_tags" options="{'create': false, 'create_edit': false}"/>
		        					<field name="ghi_chu"/>
		        					<field name="ngay_het_han" />
		        					<field name="ht_per" readonly = '1' />
		                            <field name="state" readonly = '1'/>
		                            <field name="loai" invisible = '1'/> 
		                        </tree>
					         </field>
					      </page> 
		
		<!-- End Loai: Nhóm CV trung gian  -->
		
		<!-- Loai: CV -->
		
						<page string="Chi tiết thực hiện" attrs="{'invisible':['|',('loai','!=','3_cv'),('quy_trinh_id','=',False)]}">
	                    	<field name="ct_th_cv_line" context = "{'default_loai': '5_ct_th', 'default_state': 'nhap'}" nolabel='1' >
	                    		<tree>
	                    			<field name="stt"/>
		                			<field name="name" string = 'Tên chi tiết'/>
		                			<field name="nhan_vien_id" options="{'create': false, 'create_edit': false}"/>
		                			<field name="yeu_cau_kq" />
		                            <field name="cach_thuc_hien" />
		                            <field name="ngay_het_han" />
		        					<field name="datas" filename="datas_fname" string="Biểu mẫu kết quả" invisible="1"/>
		                            <field name="datas_fname" invisible="1" class="oe_inline oe_right"/>
		                            <field name="state" />
		                            <field name="loai" invisible = '1'/>
		                        </tree>
		                        <form version="7.0">
			                        <header>
					                		<button name="bt_nhan_cttth" states="da_giao" string="Nhận chi tiết thực hiện" type="object" class="oe_highlight"/>
						                    <field name="state" widget="statusbar" statusbar_visible="nhap,da_giao,dang_lam,cho_duyet,duyet" />
						                    <field name="loai" invisible='1'/>
						            </header>  
						           	<sheet>
				                        <group col="4" colspan="2">
				                        	<field name="stt"/>
				                        	<field name="name" string = 'Tên chi tiết'/>
				                			<field name="nhan_vien_id" required = '1' options="{'create': false, 'create_edit': false}"/>
				                			<field name="yeu_cau_kq" />
				                            <field name="cach_thuc_hien" />
				                            <field name="ngay_het_han" />
				        					<field name="datas" filename="datas_fname" string="Biểu mẫu kết quả"/>
				                            <field name="datas_fname" invisible="1" class="oe_inline oe_right"/>
				                         </group>  
			                         </sheet>  
		                        </form>
	                		</field>
	                    </page>
	                    
	                    <page string="Công việc con" attrs="{'invisible':['|',('loai','!=','3_cv'),('quy_trinh_id','!=',False)]}">
	                    	<field name="cong_viec_con_line" attrs="{'readonly':[('state','in',['da_giao', 'cho_duyet', 'duyet'])]}" nolabel='1' context = "{'default_cong_viec_con_id': active_id, 'default_loai': '4_cv_con', 'default_state': 'nhap', 'form_view_ref':'nhom_cong_viec_nhap_form'}" >
	                    		<tree>
		                			<field name="name" string = 'Tên công việc con'/>
		                <!--            <field name="quy_trinh_id" options="{'create': false, 'create_edit': false}"/>  -->
		                            <field name="nhan_vien_id" options="{'create': false, 'create_edit': false}"/>
		        					<field name="ghi_chu"/>
		        					<field name="ngay_het_han" />
		        					<field name="ht_per" readonly = '1' />
		                            <field name="state" readonly = '1'/>
		                            <field name="loai" invisible = '1'/>
		                        </tree>
	                		</field>
	                    </page>
		
		<!-- End Loai: CV -->
		
		<!-- Loai: CV con -->
		
						<page string="Chi tiết thực hiện" attrs="{'invisible':[('loai','!=','4_cv_con')]}">
	                    	<field name="ct_th_cv_con_line" context = "{'default_loai': '5_ct_th', 'default_state': 'nhap'}" nolabel='1' >
	                    		<tree>
	                    			<field name="stt"/>
		                			<field name="name" string = 'Tên chi tiết'/>
		                			<field name="nhan_vien_id" options="{'create': false, 'create_edit': false}"/>
		                			<field name="yeu_cau_kq" />
		                            <field name="cach_thuc_hien" />
		                            <field name="ngay_het_han" />
		        					<field name="datas" filename="datas_fname" string="Biểu mẫu kết quả" invisible="1"/>
		                            <field name="datas_fname" invisible="1" class="oe_inline oe_right"/>
		                            <field name="state" />
		                            <field name="loai" invisible = '1'/>
		                        </tree>
		                        <form version="7.0">
			                        <header>
					                		<button name="bt_nhan_cttth" states="da_giao" string="Nhận chi tiết thực hiện" type="object" class="oe_highlight"/>
						                    <field name="state" widget="statusbar" statusbar_visible="nhap,da_giao,dang_lam,cho_duyet,duyet" />
						                    <field name="loai" invisible='1'/>
						            </header>  
						            <sheet>
				                        <group col="4" colspan="2">
				                        	<field name="stt"/>
				                        	<field name="name" string = 'Tên chi tiết'/>
				                			<field name="nhan_vien_id" options="{'create': false, 'create_edit': false}"/>
				                			<field name="yeu_cau_kq" />
				                            <field name="cach_thuc_hien" />
				                            <field name="ngay_het_han" />
				        					<field name="datas" filename="datas_fname" string="Biểu mẫu kết quả"/>
				                            <field name="datas_fname" invisible="1" class="oe_inline oe_right"/>
				                         </group>  
			                         </sheet>  
		                        </form>
	                		</field>
	                    </page>
	                    
		<!-- End Loai: CV con -->
					 </notebook>
	                </sheet>
	                
                </form>
            </field>
        </record>
       
  <!-- Nhóm công việc menu lãnh đạo -->
  
        <record model="ir.actions.act_window" id="action_nhom_cong_viec_total">
            <field name="name">Nhóm công việc</field>
            <field name="res_model">nhom.cong.viec</field>
            <field name="view_type">form</field>
            <field name="view_mode">kanban,tree,form</field>
            <field name="domain">[('loai','in',['1_nhom_cv'])]</field>
            <field name="view_id" ref="nhom_cong_viec_nhap_tree"/>
            <field name="context">{'default_loai': '1_nhom_cv', 'default_state': 'nhap', 'search_default_tt_lanhdao': 1}</field>
            <field name="search_view_id" ref="search_loai"/>
        </record>
        
        <record id="action_nhom_cong_viec_total1" model="ir.actions.act_window.view">
            <field eval="0" name="sequence"/>
            <field name="view_mode">kanban</field>
            <field name="view_id" ref="nhom_cong_viec_nhap_kanban"/>
            <field name="act_window_id" ref="action_nhom_cong_viec_total"/>
        </record>
        
        <record id="action_nhom_cong_viec_total2" model="ir.actions.act_window.view">
            <field eval="0" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="nhom_cong_viec_nhap_tree"/>
            <field name="act_window_id" ref="action_nhom_cong_viec_total"/>
        </record>
        
        <record id="action_nhom_cong_viec_total3" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="nhom_cong_viec_nhap_form"/>
            <field name="act_window_id" ref="action_nhom_cong_viec_total"/>
        </record>
        
        <record model="ir.actions.act_window" id="action_nhom_cong_viec_du_thao">
            <field name="name">Dự thảo</field>
            <field name="res_model">nhom.cong.viec</field>
            <field name="view_type">form</field>
            <field name="view_mode">kanban,tree,form</field>
            <field name="domain">[('loai','in',['1_nhom_cv']),('tt_lanhdao','in',['1_nhap'])]</field>
            <field name="view_id" ref="nhom_cong_viec_nhap_tree"/>
            <field name="context">{'default_loai': '1_nhom_cv', 'default_state': 'nhap', 'search_default_tt_lanhdao': 1}</field>
            <field name="search_view_id" ref="search_loai"/>
        </record>
        
        <record id="action_nhom_cong_viec_du_thao1" model="ir.actions.act_window.view">
            <field eval="0" name="sequence"/>
            <field name="view_mode">kanban</field>
            <field name="view_id" ref="nhom_cong_viec_nhap_kanban"/>
            <field name="act_window_id" ref="action_nhom_cong_viec_du_thao"/>
        </record>
        
        <record id="action_nhom_cong_viec_du_thao2" model="ir.actions.act_window.view">
            <field eval="0" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="nhom_cong_viec_nhap_tree"/>
            <field name="act_window_id" ref="action_nhom_cong_viec_du_thao"/>
        </record>
        
        <record id="action_nhom_cong_viec_du_thao3" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="nhom_cong_viec_nhap_form"/>
            <field name="act_window_id" ref="action_nhom_cong_viec_du_thao"/>
        </record>
        
        <record model="ir.actions.act_window" id="action_nhom_cong_viec_pc_xu_ly">
            <field name="name">Phân công xử lý</field>
            <field name="res_model">nhom.cong.viec</field>
            <field name="view_type">form</field>
            <field name="view_mode">kanban,tree,form</field>
            <field name="domain">[('loai','in',['1_nhom_cv']),('tt_lanhdao','in',['2_phan_cong'])]</field>
            <field name="view_id" ref="nhom_cong_viec_nhap_tree"/>
            <field name="context">{'default_loai': '1_nhom_cv', 'default_state': 'nhap', 'search_default_tt_lanhdao': 1}</field>
            <field name="search_view_id" ref="search_loai"/>
        </record>
        
        <record id="action_nhom_cong_viec_pc_xu_ly1" model="ir.actions.act_window.view">
            <field eval="0" name="sequence"/>
            <field name="view_mode">kanban</field>
            <field name="view_id" ref="nhom_cong_viec_nhap_kanban"/>
            <field name="act_window_id" ref="action_nhom_cong_viec_pc_xu_ly"/>
        </record>
        
        <record id="action_nhom_cong_viec_pc_xu_ly2" model="ir.actions.act_window.view">
            <field eval="0" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="nhom_cong_viec_nhap_tree"/>
            <field name="act_window_id" ref="action_nhom_cong_viec_pc_xu_ly"/>
        </record>
        
        <record id="action_nhom_cong_viec_pc_xu_ly3" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="nhom_cong_viec_nhap_form"/>
            <field name="act_window_id" ref="action_nhom_cong_viec_pc_xu_ly"/>
        </record>
        
        <record model="ir.actions.act_window" id="action_nhom_cong_viec_cho_duyet_ld">
            <field name="name">Chờ duyệt</field>
            <field name="res_model">nhom.cong.viec</field>
            <field name="view_type">form</field>
            <field name="view_mode">kanban,tree,form</field>
            <field name="domain">[('loai','in',['1_nhom_cv']),('tt_lanhdao','in',['3_cho_duyet'])]</field>
            <field name="view_id" ref="nhom_cong_viec_nhap_tree"/>
            <field name="context">{'default_loai': '1_nhom_cv', 'default_state': 'nhap', 'search_default_tt_lanhdao': 1}</field>
            <field name="search_view_id" ref="search_loai"/>
        </record>
        
        <record id="action_nhom_cong_viec_cho_duyet_ld1" model="ir.actions.act_window.view">
            <field eval="0" name="sequence"/>
            <field name="view_mode">kanban</field>
            <field name="view_id" ref="nhom_cong_viec_nhap_kanban"/>
            <field name="act_window_id" ref="action_nhom_cong_viec_cho_duyet_ld"/>
        </record>
        
        <record id="action_nhom_cong_viec_cho_duyet_ld2" model="ir.actions.act_window.view">
            <field eval="0" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="nhom_cong_viec_nhap_tree"/>
            <field name="act_window_id" ref="action_nhom_cong_viec_cho_duyet_ld"/>
        </record>
        
        <record id="action_nhom_cong_viec_cho_duyet_ld3" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="nhom_cong_viec_nhap_form"/>
            <field name="act_window_id" ref="action_nhom_cong_viec_cho_duyet_ld"/>
        </record>
        
        <record model="ir.actions.act_window" id="action_nhom_cong_viec_duyet_ld">
            <field name="name">Duyệt</field>
            <field name="res_model">nhom.cong.viec</field>
            <field name="view_type">form</field>
            <field name="view_mode">kanban,tree,form</field>
            <field name="domain">[('loai','in',['1_nhom_cv']),('tt_lanhdao','in',['4_hoan_thanh'])]</field>
            <field name="view_id" ref="nhom_cong_viec_nhap_tree"/>
            <field name="context">{'default_loai': '1_nhom_cv', 'default_state': 'nhap', 'search_default_tt_lanhdao': 1}</field>
            <field name="search_view_id" ref="search_loai"/>
        </record>
        
        <record id="action_nhom_cong_viec_duyet_ld1" model="ir.actions.act_window.view">
            <field eval="0" name="sequence"/>
            <field name="view_mode">kanban</field>
            <field name="view_id" ref="nhom_cong_viec_nhap_kanban"/>
            <field name="act_window_id" ref="action_nhom_cong_viec_duyet_ld"/>
        </record>
        
        <record id="action_nhom_cong_viec_duyet_ld2" model="ir.actions.act_window.view">
            <field eval="0" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="nhom_cong_viec_nhap_tree"/>
            <field name="act_window_id" ref="action_nhom_cong_viec_duyet_ld"/>
        </record>
        
        <record id="action_nhom_cong_viec_duyet_ld3" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="nhom_cong_viec_nhap_form"/>
            <field name="act_window_id" ref="action_nhom_cong_viec_duyet_ld"/>
        </record>
  		
       <!-- End Nhóm công việc menu lãnh đạo -->     
       
       
        
        
        
        
        
        
        
         
         <record model="ir.ui.view" id="nhom_cong_viec_moi_giao_kanban">
            <field name="name">nhom.cong.viec.moi.giao.kanban</field>
            <field name="model">nhom.cong.viec</field>
            <field name="arch" type="xml">
                <kanban default_group_by="loai" create = 'false' edit = 'false'>
                    <field name="name" />
                    <field name="name_kanban" />
                	<field name="phong_ban_id" />
                	<field name="quy_trinh_id" />
                	<field name="ho_tro" />
                	<field name="phong_ban_ids" />
                	<field name="state" />
                	<field name="loai" />
                    <templates>
                    <t t-name="kanban-box">
                            <div t-attf-class="oe_kanban_card oe_kanban_global_click">
                            <div class="oe_dropdown_toggle oe_dropdown_kanban" groups="base.group_user">
                                <span class="oe_e">í</span>
                                <ul class="oe_dropdown_menu">
                                    <t t-if="widget.view.is_action_enabled('edit')"><li><a type="edit">Edit...</a></li></t>
                                    <t t-if="widget.view.is_action_enabled('delete')"><li><a type="delete">Delete</a></li></t>
                                    <li>
                                    </li>
                                </ul>
                            </div>

                            <div class="oe_kanban_content">
                                <div><b><field name="name_kanban"/></b></div>
                            </div>
                            <div class="oe_clear"></div>
                        </div>
                    </t>
                    </templates>
                </kanban>
            </field>
         </record>   
         
        <record model="ir.ui.view" id="nhom_cong_viec_moi_giao_tree">
            <field name="name">nhom.cong.viec.moi.giao.tree</field>
            <field name="model">nhom.cong.viec</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Nhóm công việc mới giao" >
                	<field name="name" />
                	<field name="phong_ban_id" />
                	<field name="quy_trinh_id" />
                	<field name="ngay_het_han" />
                	<field name="ho_tro" invisible = '1'/>
                	<field name="phong_ban_ids" />
                	<field name="state" />
                	<field name="ht_per" />
                	<field name="loai" invisible = '1'/>
                	<field name="trangthai_ncv" invisible='1'/>
                	<field name="trangthai_cv" invisible='1'/>
                	<field name="trangthai_cvc" invisible='1'/>
                	<field name="trangthai_cv_tg" invisible='1'/>
                	<field name="tt_lanhdao" invisible='1' />
                </tree>
            </field>
        </record>
        
        <record model="ir.ui.view" id="nhom_cong_viec_moi_giao_form">
            <field name="name">nhom.cong.viec.moi.giao.form</field>
            <field name="model">nhom.cong.viec</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Nhóm công việc mới giao" version="7.0"  >
                <header>
                		<button name="bt_tao_ncv" string="Xác Nhận" type="object" class="oe_highlight" attrs="{'invisible':['|',('loai','not in',['1_nhom_cv']),('state','!=','nhap')]}"/>
                		<button name="bt_nhan_ncv" string="Nhận nhóm công việc" type="object" class="oe_highlight" attrs="{'invisible':['|',('loai','not in',['1_nhom_cv']),('state','!=','da_giao')]}"/>
	                    <button name="bt_nhan_cv_pc" string="Nhận công việc phân công" type="object" class="oe_highlight" attrs="{'invisible':['|',('loai','not in',['2_nhom_cv_tg']),('state','!=','da_giao')]}"/>
	                    <button name="bt_nhan_cv" string="Nhận công việc" type="object" class="oe_highlight" attrs="{'invisible':['|',('loai','!=','3_cv'),('state','!=','da_giao')]}"/>
	                    <button name="bt_nhan_cv_con" string="Nhận công việc con" type="object" class="oe_highlight" attrs="{'invisible':['|',('loai','!=','4_cv_con'),('state','!=','da_giao')]}"/>
	                    <button name="bt_nhan_cttth" string="Nhận chi tiết thực hiện" type="object" class="oe_highlight" attrs="{'invisible':['|',('loai','!=','5_ct_th'),('state','!=','da_giao')]}"/>
	                    
	                    <button name="bt_hoan_thanh_ctth" string="Hoàn Thành" type="object" class="oe_highlight" attrs="{'invisible':['|',('loai','!=','5_ct_th'),('state','!=','dang_lam')]}"/>
	                    <button name="bt_duyet_ctth" string="Duyệt" type="object" class="oe_highlight" attrs="{'invisible':['|',('loai','!=','5_ct_th'),('state','!=','cho_duyet')]}"/>
                		
                		<button name="bt_hoan_thanh_cv_tg" string="Hoàn Thành" type="object" class="oe_highlight" attrs="{'invisible':['|','|',('loai','!=','2_nhom_cv_tg'),('state','!=','dang_lam'),('trangthai_cv_tg','!=','xong')]}"/>
                		<button name="bt_duyet_cv_tg" string="Duyệt" type="object" class="oe_highlight" attrs="{'invisible':['|',('loai','!=','2_nhom_cv_tg'),('state','!=','cho_duyet')]}"/>
                		
                		<button name="bt_hoan_thanh_cv" string="Hoàn Thành" type="object" class="oe_highlight" attrs="{'invisible':['|','|',('loai','!=','3_cv'),('state','!=','dang_lam'),('trangthai_cv','!=','xong')]}"/>
                		<button name="bt_duyet_cv" string="Duyệt" type="object" class="oe_highlight" attrs="{'invisible':['|','|',('loai','!=','3_cv'),('state','!=','cho_duyet')]}"/>
                		
                		<button name="bt_hoan_thanh_cvc" string="Hoàn Thành" type="object" class="oe_highlight" attrs="{'invisible':['|','|',('loai','!=','4_cv_con'),('state','!=','dang_lam'),('trangthai_cvc','!=','xong')]}"/>
                		<button name="bt_duyet_cvc" string="Duyệt" type="object" class="oe_highlight" attrs="{'invisible':['|','|',('loai','!=','4_cv_con'),('state','!=','cho_duyet')]}"/>
	                    
	                    <button name="bt_hoan_thanh_ncv" string="Hoàn Thành" type="object" class="oe_highlight" attrs="{'invisible':['|','|',('loai','!=','1_nhom_cv'),('state','!=','dang_lam'),('trangthai_ncv','!=','xong')]}"/>
	                    <button name="bt_cho_duyet" string="Ban Hành" type="object" class="oe_highlight" attrs="{'invisible':['|',('loai','!=','1_nhom_cv'), ('state','!=','cho_duyet')]}"/>
	                    
<!--	                    <button name="%(action_tao_congviec)d" string="Tạo công việc" type="action" class="oe_highlight" attrs="{'invisible':['|','|','|',('ho_tro','=','co'),('loai','not in',['1_nhom_cv']),('quy_trinh_id','!=',False),('state','in',['nhap','da_giao','cho_duyet', 'duyet'])]}"/> 
	                	<button name="%(action_tao_congviec_phancong)d" string="Tạo công việc" type="action" class="oe_highlight" attrs="{'invisible':['|','|',('loai','not in',['2_nhom_cv_tg']),('quy_trinh_id','!=',False),('state','in',['da_giao','cho_duyet', 'duyet'])]}"/> 
	                	<button name="%(action_tao_congviec_con)d" string="Tạo công việc con" type="action" class="oe_highlight" attrs="{'invisible':['|','|',('loai','!=','3_cv'),('quy_trinh_id','!=',False),('state','in',['da_giao','cho_duyet', 'duyet'])]}"/> 
	                	<button name="%(action_phancong_phongban)d" string="Phân công công việc" type="action" class="oe_highlight" attrs="{'invisible':['|','|',('loai','!=','1_nhom_cv'),('ho_tro','=','khong'),('state','in',['nhap','da_giao','cho_duyet', 'duyet'])]}"/>   -->
	                    <field name="state" widget="statusbar" statusbar_visible="nhap,da_giao,dang_lam,cho_duyet,duyet" />
	            </header>  
	                <sheet>
	                <h2>
	                	<label string='Tên nhóm công việc' attrs="{'invisible':[('loai','!=','1_nhom_cv')]}"/>
						<label string='Tên công việc' attrs="{'invisible':[('loai','!=','3_cv')]}"/>
						<label string='Tên công việc con' attrs="{'invisible':[('loai','!=','4_cv_con')]}"/>
						<label string='Tên chi tiết thực hiện' attrs="{'invisible':[('loai','!=','5_ct_th')]}"/>
						<label string='Tên công việc phân công PBHT' attrs="{'invisible':[('loai','!=','2_nhom_cv_tg')]}"/>
						<field name="name" nolabel='1' attrs="{'readonly':[('state','in',['cho_duyet', 'duyet'])]}"/>
	                </h2>
	                <h3>
						<label for='ht_per'/>
						<field name="ht_per" nolabel='1' />
	                </h3>
	  <!--              <group>
 						<group >
 							<field name="ho_tro" invisible = '1' widget="radio" attrs="{'invisible':[('loai','!=','1_nhom_cv')], 'readonly':[('state','in',['cho_duyet', 'duyet'])]}"/>
 							<field name="nhan_vien_ids" widget="many2many_tags" attrs="{'invisible':[('loai','!=','3_cv')],'required':[('loai','=','3_cv')], 'readonly':[('state','in',['cho_duyet', 'duyet'])]}" options="{'create': false, 'create_edit': false}"/>
 							<field name="cong_viec_con_id" string = 'Công việc' options="{'create': false, 'create_edit': false}" attrs="{'invisible':[('loai','!=','4_cv_con')],'required':[('loai','=','4_cv_con')],'readonly':[('state','in',['cho_duyet', 'duyet'])]}"/>
 							<field name="stt" attrs="{'invisible':[('loai','!=','5_ct_th')]}"/>
 							<field name="nhan_vien_id" options="{'create': false, 'create_edit': false}" attrs="{'invisible':[('loai','not in',['4_cv_con', '5_ct_th'])],'required':[('loai','in',['4_cv_con', '5_ct_th'])],'readonly':[('state','in',['cho_duyet', 'duyet'])]}"/>
                			<field name="yeu_cau_kq" attrs="{'invisible':[('loai','!=','5_ct_th')]}"/>
                			<field name="trangthai_ncv" invisible='1'/>
		                	<field name="trangthai_cv" invisible='1'/>
		                	<field name="trangthai_cvc" invisible='1'/>
		                	<field name="trangthai_cv_tg" invisible='1'/>
		                	<field name="tt_lanhdao" invisible='1' />
		                	<field name="cv_tg_id" attrs="{'invisible':[('loai','not in',['4_cv_con'])], 'readonly':[('state','in',['cho_duyet', 'duyet'])]}" domain="[('loai','=','2_nhom_cv_tg')]" string = 'Công việc phân công PBHT' options="{'create': false, 'create_edit': false}"/>
		                	<field name="phong_ban_id" options="{'create': false, 'create_edit': false}" attrs="{'invisible':[('loai','not in',['1_nhom_cv','2_nhom_cv_tg'])],'required':[('loai','in',['1_nhom_cv','2_nhom_cv_tg'])],'readonly':[('state','in',['cho_duyet', 'duyet'])]}"/>
		                	<field name="phong_ban_ids" on_change = "onchange_phong_ban_ids(phong_ban_ids)" widget="many2many_tags" options="{'create': false, 'create_edit': false}" attrs="{'invisible':['|',('quy_trinh_id','!=',False),('loai','!=','1_nhom_cv')],'readonly':[('state','in',['cho_duyet', 'duyet'])]}" />
 							<field name="cong_viec_pc_id" attrs="{'invisible':['|',('loai','not in',['3_cv']),('cong_viec_id','!=',False)],'required':[('cong_viec_id','=',False),('loai','=','3_cv')], 'readonly':[('state','in',['cho_duyet', 'duyet'])]}" domain="[('loai','=','2_nhom_cv_tg')]" string = 'Công việc phân công PBHT' options="{'create': false, 'create_edit': false}"/>
			                <field name="nhom_cv_pc_id" attrs="{'invisible':['|',('loai','not in',['3_cv']),('cong_viec_id','!=',False)],'required':[('cong_viec_id','=',False),('loai','=','3_cv')], 'readonly':[('state','in',['cho_duyet', 'duyet'])]}" domain="[('loai','=','1_nhom_cv')]" string = 'Nhóm công việc' options="{'create': false, 'create_edit': false}"/>
 						</group>
	                	<group>
		                	<field name="quy_trinh_id" domain="[('quy_trinh_id','=',False)]" on_change = "onchange_quy_trinh_id(quy_trinh_id,loai,state)" options="{'create': false, 'create_edit': false}" attrs="{'invisible':['|',('ho_tro','=','co'),('loai','=','5_ct_th')], 'readonly':[('state','in',['cho_duyet', 'duyet'])]}" />
			                <field name="ngay_het_han" />
			                <field name="phan_cong_phong_ban_id" attrs="{'invisible':[('loai','not in',['2_nhom_cv_tg'])],'required':[('loai','=','2_nhom_cv_tg')], 'readonly':[('state','in',['cho_duyet', 'duyet'])]}" domain="[('loai','=','1_nhom_cv')]" options="{'create': false, 'create_edit': false}"/>
			                <field name="cong_viec_id" attrs="{'invisible':['|',('cong_viec_pc_id','!=',False),('loai','not in',['3_cv'])],'required':[('cong_viec_pc_id','=',False),('loai','=','3_cv')], 'readonly':[('state','in',['cho_duyet', 'duyet'])]}" domain="[('loai','=','1_nhom_cv')]" string = 'Nhóm công việc' options="{'create': false, 'create_edit': false}"/>
	                		<field name="nhom_cv_id" attrs="{'invisible':[('loai','not in',['4_cv_con'])],'required':[('loai','=','4_cv_con')], 'readonly':[('state','in',['cho_duyet', 'duyet'])]}" domain="[('loai','=','1_nhom_cv')]" string = 'Nhóm công việc' options="{'create': false, 'create_edit': false}"/>
	                		<field name="cach_thuc_hien" attrs="{'invisible':[('loai','!=','5_ct_th')]}"/>
        					<field name="datas" filename="datas_fname" string="Biểu mẫu kết quả" attrs="{'invisible':[('loai','!=','5_ct_th')]}"/>
                            <field name="datas_fname" invisible="1" class="oe_inline oe_right" attrs="{'invisible':[('loai','!=','5_ct_th')]}"/>
	                	</group>
	                	<group>
		                	<field name="loai" invisible = '1'/>
	                	</group>
		            </group>
	               	<group col="4" colspan="2" >
	                	<field name="ghi_chu" attrs="{'invisible':[('loai','not in',['1_nhom_cv','2_nhom_cv_tg'])], 'readonly':[('state','in',['cho_duyet', 'duyet'])]}"/>
	                </group> -->
 					
            		<notebook>
            		
        <!-- Loai: Nhóm CV  -->
        
	                     <page string="Chi tiết thực hiện" attrs="{'invisible':['|',('loai','not in',['1_nhom_cv']),'|',('ho_tro','=','co'),'&amp;',('ho_tro','=','khong'),('quy_trinh_id','=',False)]}">
	                    	<field name="ct_th_nhom_cv_line" attrs="{'readonly':[('state','in',['cho_duyet', 'duyet'])]}" context = "{'default_loai': '5_ct_th', 'default_state': 'da_giao'}" nolabel='1' >
	                    		<tree>
	                    			<field name="stt"/>
		                			<field name="name" string = 'Tên chi tiết'/>
		                			<field name="nhan_vien_id" required = '1' options="{'create': false, 'create_edit': false}"/>
		                			<field name="yeu_cau_kq" />
		                            <field name="cach_thuc_hien" />
		                            <field name="ngay_het_han" />
		        					<field name="datas" filename="datas_fname" string="Biểu mẫu kết quả" invisible="1"/>
		                            <field name="datas_fname" invisible="1" class="oe_inline oe_right"/>
		                            <field name="state" />
		                            <field name="loai" invisible = '1'/>
		                        </tree>
		                        <form version="7.0">
			                        <header>
					                		<button name="bt_nhan_cttth" states="da_giao" string="Nhận chi tiết thực hiện" type="object" class="oe_highlight"/>
						                    <field name="state" widget="statusbar" statusbar_visible="nhap,da_giao,dang_lam,cho_duyet,duyet" />
						                    <field name="loai" invisible='1'/>
						            </header>  
						            <sheet>
				                        <group col="4" colspan="2">
				                        	<field name="stt"/>
				                        	<field name="name" string = 'Tên chi tiết'/>
				                			<field name="nhan_vien_id" required = '1' options="{'create': false, 'create_edit': false}"/>
				                			<field name="yeu_cau_kq" />
				                            <field name="cach_thuc_hien" />
				                            <field name="ngay_het_han" />
				        					<field name="datas" filename="datas_fname" string="Biểu mẫu kết quả"/>
				                            <field name="datas_fname" invisible="1" class="oe_inline oe_right"/>
				                         </group>  
				                   </sheet>
		                        </form>
	                		</field>
	                    </page>
	                     <page string="Công việc" attrs="{'invisible':['|',('loai','not in',['1_nhom_cv']),'|',('quy_trinh_id','!=',False),('ho_tro','=','co')]}">
	                    	<field name="cong_viec_line" attrs="{'readonly':[('state','in',['da_giao', 'cho_duyet', 'duyet'])]}" nolabel='1' context = "{'default_loai': '3_cv', 'default_state':'da_giao', 'default_cong_viec_id':active_id, 'form_view_ref':'nhom_cong_viec_moi_giao_form'}" >
	                    		<tree>
		                			<field name="name" string = 'Tên công việc'/>
		             <!--               <field name="quy_trinh_id" on_change = "onchange_quy_trinh_id(quy_trinh_id,loai,state)" options="{'create': false, 'create_edit': false}"/>  -->
		                            <field name="nhan_vien_ids" widget="many2many_tags" options="{'create': false, 'create_edit': false}"/>
		        					<field name="ghi_chu"/>
		        					<field name="ngay_het_han" />
		        					<field name="ht_per" readonly = '1' />
		                            <field name="state" readonly = '1'/>
		                            <field name="loai" invisible = '1'/> 
		                        </tree>
					         </field>
					      </page> 
					      
					     <page string="Phân Công Phòng Ban" attrs="{'invisible':['|',('loai','not in',['1_nhom_cv']),'|','&amp;',('quy_trinh_id','!=',False),('ho_tro','=','khong'),'&amp;',('ho_tro','=','khong'),('quy_trinh_id','=',False)]}">
	                    	<field name="phan_cong_phong_ban_line" attrs="{'readonly':[('state','in',['da_giao', 'cho_duyet', 'duyet'])]}" nolabel='1' context = "{'default_phan_cong_phong_ban_id': active_id, 'default_loai': '2_nhom_cv_tg', 'default_state': 'da_giao', 'form_view_ref':'nhom_cong_viec_moi_giao_form'}">
	                    		<tree>
		                			<field name="name" string = 'Tên công việc'/>
		                			<field name="phong_ban_id" required = '1' options="{'create': false, 'create_edit': false}"/>
		               <!--             <field name="quy_trinh_id" on_change = "onchange_quy_trinh_id(quy_trinh_id,loai,state)" options="{'create': false, 'create_edit': false}"/>   -->
		        					<field name="ghi_chu"/>
		                            <field name="ngay_het_han" />
		                            <field name="ht_per" readonly = '1' />
		                            <field name="state" readonly = '1'/>
		                            <field name="loai" invisible = '1'/>
		                        </tree>
					         </field>
					      </page>
		<!-- End Loai: Nhóm CV  -->
					      
		<!-- Loai: Nhóm CV trung gian  -->
					      
					      <page string="Chi tiết thực hiện" attrs="{'invisible':['|',('loai','not in',['2_nhom_cv_tg']),('quy_trinh_id','=',False)]}">
	                    	<field name="ct_th_cv_tg_line" attrs="{'readonly':[('state','in',['cho_duyet', 'duyet'])]}" context = "{'default_loai': '5_ct_th', 'default_state': 'da_giao'}" nolabel='1' >
	                    		<tree>
	                    			<field name="stt"/>
		                			<field name="name" string = 'Tên chi tiết'/>
		                			<field name="nhan_vien_id" required = '1' options="{'create': false, 'create_edit': false}"/>
		                			<field name="yeu_cau_kq" />
		                            <field name="cach_thuc_hien" />
		                            <field name="ngay_het_han" />
		        					<field name="datas" filename="datas_fname" string="Biểu mẫu kết quả" invisible="1"/>
		                            <field name="datas_fname" invisible="1" class="oe_inline oe_right"/>
		                            <field name="state" />
		                            <field name="loai" invisible = '1'/>
		                        </tree>
		                        <form version="7.0">
			                        <header>
					                		<button name="bt_nhan_cttth" states="da_giao" string="Nhận chi tiết thực hiện" type="object" class="oe_highlight"/>
						                    <field name="state" widget="statusbar" statusbar_visible="nhap,da_giao,dang_lam,cho_duyet,duyet" />
						                    <field name="loai" invisible='1'/>
						            </header>  
						            <sheet>
				                        <group col="4" colspan="2">
				                        	<field name="stt"/>
				                        	<field name="name" string = 'Tên chi tiết'/>
				                			<field name="nhan_vien_id" required = '1' options="{'create': false, 'create_edit': false}"/>
				                			<field name="yeu_cau_kq" />
				                            <field name="cach_thuc_hien" />
				                            <field name="ngay_het_han" />
				        					<field name="datas" filename="datas_fname" string="Biểu mẫu kết quả"/>
				                            <field name="datas_fname" invisible="1" class="oe_inline oe_right"/>
				                         </group>  
			                        </sheet>  
		                        </form>
	                		</field>
	                    </page>
	                     <page string="Công việc" attrs="{'invisible':['|',('loai','not in',['2_nhom_cv_tg']),('quy_trinh_id','!=',False)]}">
	                    	<field name="cong_viec_pc_line" attrs="{'readonly':[('state','in',['da_giao', 'cho_duyet', 'duyet'])]}" nolabel='1' context = "{'default_cong_viec_pc_id': active_id, 'default_loai': '3_cv', 'default_state': 'da_giao', 'form_view_ref':'nhom_cong_viec_moi_giao_form'}" >
	                    		<tree>
		                			<field name="name" string = 'Tên công việc'/>
		             <!--               <field name="quy_trinh_id" on_change = "onchange_quy_trinh_id(quy_trinh_id,loai,state)" options="{'create': false, 'create_edit': false}"/>  -->
		                            <field name="nhan_vien_ids" widget="many2many_tags" options="{'create': false, 'create_edit': false}"/>
		        					<field name="ghi_chu"/>
		        					<field name="ngay_het_han" />
		        					<field name="ht_per" readonly = '1' />
		                            <field name="state" readonly = '1'/>
		                            <field name="loai" invisible = '1'/> 
		                        </tree>
					         </field>
					      </page> 
		
		<!-- End Loai: Nhóm CV trung gian  -->
		
		<!-- Loai: CV -->
		
						<page string="Chi tiết thực hiện" attrs="{'invisible':['|',('loai','!=','3_cv'),('quy_trinh_id','=',False)]}">
	                    	<field name="ct_th_cv_line" context = "{'default_loai': '5_ct_th', 'default_state': 'da_giao'}" nolabel='1' >
	                    		<tree>
	                    			<field name="stt"/>
		                			<field name="name" string = 'Tên chi tiết'/>
		                			<field name="nhan_vien_id" options="{'create': false, 'create_edit': false}"/>
		                			<field name="yeu_cau_kq" />
		                            <field name="cach_thuc_hien" />
		                            <field name="ngay_het_han" />
		        					<field name="datas" filename="datas_fname" string="Biểu mẫu kết quả" invisible="1"/>
		                            <field name="datas_fname" invisible="1" class="oe_inline oe_right"/>
		                            <field name="state" />
		                            <field name="loai" invisible = '1'/>
		                        </tree>
		                        <form version="7.0">
			                        <header>
					                		<button name="bt_nhan_cttth" states="da_giao" string="Nhận chi tiết thực hiện" type="object" class="oe_highlight"/>
						                    <field name="state" widget="statusbar" statusbar_visible="nhap,da_giao,dang_lam,cho_duyet,duyet" />
						                    <field name="loai" invisible='1'/>
						            </header>  
						           	<sheet>
				                        <group col="4" colspan="2">
				                        	<field name="stt"/>
				                        	<field name="name" string = 'Tên chi tiết'/>
				                			<field name="nhan_vien_id" required = '1' options="{'create': false, 'create_edit': false}"/>
				                			<field name="yeu_cau_kq" />
				                            <field name="cach_thuc_hien" />
				                            <field name="ngay_het_han" />
				        					<field name="datas" filename="datas_fname" string="Biểu mẫu kết quả"/>
				                            <field name="datas_fname" invisible="1" class="oe_inline oe_right"/>
				                         </group>  
			                         </sheet>  
		                        </form>
	                		</field>
	                    </page>
	                    
	                    <page string="Công việc con" attrs="{'invisible':['|',('loai','!=','3_cv'),('quy_trinh_id','!=',False)]}">
	                    	<field name="cong_viec_con_line" attrs="{'readonly':[('state','in',['da_giao', 'cho_duyet', 'duyet'])]}" nolabel='1' context = "{'default_cong_viec_con_id': active_id, 'default_loai': '4_cv_con', 'default_state': 'da_giao', 'form_view_ref':'nhom_cong_viec_moi_giao_form'}" >
	                    		<tree>
		                			<field name="name" string = 'Tên công việc con'/>
		                <!--            <field name="quy_trinh_id" options="{'create': false, 'create_edit': false}"/>  -->
		                            <field name="nhan_vien_id" options="{'create': false, 'create_edit': false}"/>
		        					<field name="ghi_chu"/>
		        					<field name="ngay_het_han" />
		        					<field name="ht_per" readonly = '1' />
		                            <field name="state" readonly = '1'/>
		                            <field name="loai" invisible = '1'/>
		                        </tree>
	                		</field>
	                    </page>
		
		<!-- End Loai: CV -->
		
		<!-- Loai: CV con -->
		
						<page string="Chi tiết thực hiện" attrs="{'invisible':[('loai','!=','4_cv_con')]}">
	                    	<field name="ct_th_cv_con_line" context = "{'default_loai': '5_ct_th', 'default_state': 'da_giao'}" nolabel='1' >
	                    		<tree>
	                    			<field name="stt"/>
		                			<field name="name" string = 'Tên chi tiết'/>
		                			<field name="nhan_vien_id" options="{'create': false, 'create_edit': false}"/>
		                			<field name="yeu_cau_kq" />
		                            <field name="cach_thuc_hien" />
		                            <field name="ngay_het_han" />
		        					<field name="datas" filename="datas_fname" string="Biểu mẫu kết quả" invisible="1"/>
		                            <field name="datas_fname" invisible="1" class="oe_inline oe_right"/>
		                            <field name="state" />
		                            <field name="loai" invisible = '1'/>
		                        </tree>
		                        <form version="7.0">
			                        <header>
					                		<button name="bt_nhan_cttth" states="da_giao" string="Nhận chi tiết thực hiện" type="object" class="oe_highlight"/>
						                    <field name="state" widget="statusbar" statusbar_visible="nhap,da_giao,dang_lam,cho_duyet,duyet" />
						                    <field name="loai" invisible='1'/>
						            </header>  
						            <sheet>
				                        <group col="4" colspan="2">
				                        	<field name="stt"/>
				                        	<field name="name" string = 'Tên chi tiết'/>
				                			<field name="nhan_vien_id" options="{'create': false, 'create_edit': false}"/>
				                			<field name="yeu_cau_kq" />
				                            <field name="cach_thuc_hien" />
				                            <field name="ngay_het_han" />
				        					<field name="datas" filename="datas_fname" string="Biểu mẫu kết quả"/>
				                            <field name="datas_fname" invisible="1" class="oe_inline oe_right"/>
				                         </group>  
			                         </sheet>  
		                        </form>
	                		</field>
	                    </page>
	                    
		<!-- End Loai: CV con -->
		
					      <page string="Thông tin chi tiết" >
		                    	<group>
			 						<group >
			 							<field name="ho_tro" invisible = '1' widget="radio" attrs="{'invisible':[('loai','!=','1_nhom_cv')], 'readonly':[('state','in',['cho_duyet', 'duyet'])]}"/>
			 							<field name="nhan_vien_ids" widget="many2many_tags" attrs="{'invisible':[('loai','!=','3_cv')],'required':[('loai','=','3_cv')], 'readonly':[('state','in',['cho_duyet', 'duyet'])]}" options="{'create': false, 'create_edit': false}"/>
			 							<field name="cong_viec_con_id" string = 'Công việc' options="{'create': false, 'create_edit': false}" attrs="{'invisible':[('loai','!=','4_cv_con')],'required':[('loai','=','4_cv_con')],'readonly':[('state','in',['cho_duyet', 'duyet'])]}"/>
			 							<field name="stt" attrs="{'invisible':[('loai','!=','5_ct_th')]}"/>
			 							<field name="nhan_vien_id" options="{'create': false, 'create_edit': false}" attrs="{'invisible':[('loai','not in',['4_cv_con', '5_ct_th'])],'required':[('loai','in',['4_cv_con', '5_ct_th'])],'readonly':[('state','in',['cho_duyet', 'duyet'])]}"/>
			                			<field name="yeu_cau_kq" attrs="{'invisible':[('loai','!=','5_ct_th')]}"/>
			                			<field name="trangthai_ncv" invisible='1'/>
					                	<field name="trangthai_cv" invisible='1'/>
					                	<field name="trangthai_cvc" invisible='1'/>
					                	<field name="trangthai_cv_tg" invisible='1'/>
					                	<field name="tt_lanhdao" invisible='1' />
					                	<field name="cv_tg_id" attrs="{'invisible':[('loai','not in',['4_cv_con'])], 'readonly':[('state','in',['cho_duyet', 'duyet'])]}" domain="[('loai','=','2_nhom_cv_tg')]" string = 'Công việc phân công PBHT' options="{'create': false, 'create_edit': false}"/>
					                	<field name="phong_ban_id" options="{'create': false, 'create_edit': false}" attrs="{'invisible':[('loai','not in',['1_nhom_cv','2_nhom_cv_tg'])],'required':[('loai','in',['1_nhom_cv','2_nhom_cv_tg'])],'readonly':[('state','in',['cho_duyet', 'duyet'])]}"/>
					                	<field name="phong_ban_ids" on_change = "onchange_phong_ban_ids(phong_ban_ids)" widget="many2many_tags" options="{'create': false, 'create_edit': false}" attrs="{'invisible':['|',('quy_trinh_id','!=',False),('loai','!=','1_nhom_cv')],'readonly':[('state','in',['cho_duyet', 'duyet'])]}" />
			 							<field name="cong_viec_pc_id" attrs="{'invisible':['|',('loai','not in',['3_cv']),('cong_viec_id','!=',False)],'required':[('cong_viec_id','=',False),('loai','=','3_cv')], 'readonly':[('state','in',['cho_duyet', 'duyet'])]}" domain="[('loai','=','2_nhom_cv_tg')]" string = 'Công việc phân công PBHT' options="{'create': false, 'create_edit': false}"/>
						                <field name="nhom_cv_pc_id" attrs="{'invisible':['|',('loai','not in',['3_cv']),('cong_viec_id','!=',False)],'required':[('cong_viec_id','=',False),('loai','=','3_cv')], 'readonly':[('state','in',['cho_duyet', 'duyet'])]}" domain="[('loai','=','1_nhom_cv')]" string = 'Nhóm công việc' options="{'create': false, 'create_edit': false}"/>
			 							<field name="phan_cong_phong_ban_id" attrs="{'invisible':[('loai','not in',['2_nhom_cv_tg'])],'required':[('loai','=','2_nhom_cv_tg')], 'readonly':[('state','in',['cho_duyet', 'duyet'])]}" domain="[('loai','=','1_nhom_cv')]" options="{'create': false, 'create_edit': false}"/>
						                <field name="cong_viec_id" attrs="{'invisible':['|',('cong_viec_pc_id','!=',False),('loai','not in',['3_cv'])],'required':[('cong_viec_pc_id','=',False),('loai','=','3_cv')], 'readonly':[('state','in',['cho_duyet', 'duyet'])]}" domain="[('loai','=','1_nhom_cv')]" string = 'Nhóm công việc' options="{'create': false, 'create_edit': false}"/>
			 						</group>
				                	<group>
					                	<field name="quy_trinh_id" domain="[('quy_trinh_id','=',False)]" on_change = "onchange_quy_trinh_id(quy_trinh_id,loai,state)" options="{'create': false, 'create_edit': false}" attrs="{'invisible':['|',('ho_tro','=','co'),('loai','=','5_ct_th')], 'readonly':[('state','in',['cho_duyet', 'duyet'])]}" />
						                <field name="ngay_het_han" />
				                		<field name="nhom_cv_id" attrs="{'invisible':[('loai','not in',['4_cv_con'])],'required':[('loai','=','4_cv_con')], 'readonly':[('state','in',['cho_duyet', 'duyet'])]}" domain="[('loai','=','1_nhom_cv')]" string = 'Nhóm công việc' options="{'create': false, 'create_edit': false}"/>
				                		<field name="cach_thuc_hien" attrs="{'invisible':[('loai','!=','5_ct_th')]}"/>
			        					<field name="datas" filename="datas_fname" string="Biểu mẫu kết quả" attrs="{'invisible':[('loai','!=','5_ct_th')]}"/>
			                            <field name="datas_fname" invisible="1" class="oe_inline oe_right" attrs="{'invisible':[('loai','!=','5_ct_th')]}"/>
				                	</group>
				                	<group>
					                	<field name="loai" invisible = '1'/>
				                	</group>
					            </group>
				               	<group col="4" colspan="2" >
				                	<field name="ghi_chu" attrs="{'readonly':[('state','in',['cho_duyet', 'duyet'])]}"/>
				                </group>
					      </page>
					 </notebook>
	                </sheet>
	                
                </form>
            </field>
        </record>
       
        <record model="ir.actions.act_window" id="action_nhom_cong_viec_moi_giao">
            <field name="name">Nhóm công việc mới giao</field>
            <field name="res_model">nhom.cong.viec</field>
            <field name="view_type">form</field>
            <field name="view_mode">kanban,tree,form</field>
            <field name="domain">[('state','in',['da_giao'])]</field>
            <field name="view_id" ref="nhom_cong_viec_moi_giao_tree"/>
            <field name="context">{'default_loai': '1_nhom_cv','search_default_loai': 1}</field>
            <field name="search_view_id" ref="search_loai"/>
        </record>
        <record id="action_nhom_cong_viec_moi_giao1" model="ir.actions.act_window.view">
            <field eval="0" name="sequence"/>
            <field name="view_mode">kanban</field>
            <field name="view_id" ref="nhom_cong_viec_moi_giao_kanban"/>
            <field name="act_window_id" ref="action_nhom_cong_viec_moi_giao"/>
        </record>
        <record id="action_nhom_cong_viec_moi_giao2" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="nhom_cong_viec_moi_giao_tree"/>
            <field name="act_window_id" ref="action_nhom_cong_viec_moi_giao"/>
        </record>
        <record id="action_nhom_cong_viec_moi_giao3" model="ir.actions.act_window.view">
            <field eval="2" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="nhom_cong_viec_moi_giao_form"/>
            <field name="act_window_id" ref="action_nhom_cong_viec_moi_giao"/>
        </record>
    
    	<!-- gan action cho cong viec -->
    	<record id="action_tao_congviec1" model="ir.actions.act_window.view">
            <field eval="0" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="cong_viec_tree"/>
            <field name="act_window_id" ref="action_tao_congviec"/>
        </record>
        <record id="action_tao_congviec2" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="nhom_cong_viec_moi_giao_form"/>
            <field name="act_window_id" ref="action_tao_congviec"/>
        </record>
    
		<record id="quy_trinh_tree_view" model="ir.ui.view">
			<field name="name">quy.trinh.tree</field>
			<field name="model">quy.trinh</field>
			<field name="arch" type="xml">
				<tree string="Quy trình">
					<field name="name"/>
					<field name="ten"/>
					<field name="phong_ban_ids"/>
					<field name="nguoi_soan"/>
					<field name="nguoi_xx"/>
					<field name="nguoi_duyet"/>
					<field name="ngay_bh"/>
					<field name="lan_bh"/>
				</tree>
			</field>
		</record>
		
		<record id="quy_trinh_form_view" model="ir.ui.view">
			<field name="name">quy.trinh.form</field>
			<field name="model">quy.trinh</field>
			<field name="arch" type="xml">
				<form string="Quy trình" version="7.0">   
					<sheet>
					<h2>
	                	<label for = "name"/>
						<field name="name" />
	                </h2>
						<group col="4" colspan="2" >  
							<field name="ten"/>
							<field name="all_phong_ban" on_change = "onchange_all_phong_ban(all_phong_ban)"/>
							<field name="nguoi_soan" options="{'create': false, 'create_edit': false}"/>
							<field name="phong_ban_ids" widget = "many2many_tags" options="{'create': false, 'create_edit': false}"/>
							<field name="nguoi_xx" options="{'create': false, 'create_edit': false}"/>
							<field name="nguoi_duyet" options="{'create': false, 'create_edit': false}"/>
							<field name="ngay_bh"/>
							<field name="lan_bh"/>
						</group>
							<notebook>
								<page string = "Các bước thực hiện">
									<field name="buoc_thuc_hien_line" nolabel='1' class="oe_green_erp_scroll">
										<tree>
											<field name="stt"/>
											<field name="name" />
											<field name="cach_thuc_hien"/>
											<field name="datas" filename="datas_fname" string="Biểu mẫu kết quả" invisible = '1'/>
			                            	<field name="datas_fname" invisible="1" class="oe_inline oe_right"/>
			                            	<field name="yeu_cau_kq"/>
										</tree>
										<form>
											<group col="4" colspan="2" >  
												<field name="stt"/>
												<field name="name" />
												<field name="cach_thuc_hien"/>
												<field name="datas" filename="datas_fname" string="Biểu mẫu kết quả"/>
				                            	<field name="datas_fname" invisible="1" class="oe_inline oe_right"/>
				                            	<field name="yeu_cau_kq"/>
											</group>
										</form>
									</field>
								</page>
								<page string = "Theo dõi sửa đổi tài liệu">
									<field name="ls_quy_trinh_line" nolabel='1' class="oe_green_erp_scroll">
										<tree edit = 'false' create = 'false' delete = 'false'>
											<field name="name"/>
											<field name="ten"/>
											<field name="all_phong_ban" on_change = "onchange_all_phong_ban(all_phong_ban)" invisible = '1'/>
											<field name="nguoi_soan" options="{'create': false, 'create_edit': false}"/>
											<field name="phong_ban_ids" widget = "many2many_tags" options="{'create': false, 'create_edit': false}"/>
											<field name="nguoi_xx" options="{'create': false, 'create_edit': false}"/>
											<field name="nguoi_duyet" options="{'create': false, 'create_edit': false}"/>
											<field name="ngay_bh"/>
											<field name="lan_bh"/>
											<button name = "bt_lay_quy_trinh" icon = "STOCK_APPLY" string="Lấy QT" type="object" />
										</tree>
										<form version = "7.0" edit = 'false' create = 'false' delete = 'false'>
											<header>
						                		<button name="bt_lay_quy_trinh" string="Lấy QT" type="object" class="oe_highlight" />
							            	</header>  
											<sheet>
												<h2>
								                	<label for = "name"/>
													<field name="name" />
								                </h2>
												<group col="4" colspan="2" >  
													<field name="ten"/>
													<field name="all_phong_ban" on_change = "onchange_all_phong_ban(all_phong_ban)"/>
													<field name="nguoi_soan" options="{'create': false, 'create_edit': false}"/>
													<field name="phong_ban_ids" widget = "many2many_tags" options="{'create': false, 'create_edit': false}"/>
													<field name="nguoi_xx" options="{'create': false, 'create_edit': false}"/>
													<field name="nguoi_duyet" options="{'create': false, 'create_edit': false}"/>
													<field name="ngay_bh"/>
													<field name="lan_bh"/>
												</group>
													<notebook>
														<page string = "Các bước thực hiện">
															<field name="buoc_thuc_hien_line" nolabel='1' class="oe_green_erp_scroll" edit = 'false' create = 'false' delete = 'false'>
																<tree>
																	<field name="stt"/>
																	<field name="name" />
																	<field name="cach_thuc_hien"/>
																	<field name="datas" filename="datas_fname" string="Biểu mẫu kết quả" invisible = '1'/>
									                            	<field name="datas_fname" invisible="1" class="oe_inline oe_right"/>
									                            	<field name="yeu_cau_kq"/>
																</tree>
																<form edit = 'false' create = 'false' delete = 'false'>
																	<group col="4" colspan="2" >  
																		<field name="stt"/>
																		<field name="name" />
																		<field name="cach_thuc_hien"/>
																		<field name="datas" filename="datas_fname" string="Biểu mẫu kết quả"/>
										                            	<field name="datas_fname" invisible="1" class="oe_inline oe_right"/>
										                            	<field name="yeu_cau_kq"/>
																	</group>
																</form>
															</field>
														</page>
													</notebook>	
											</sheet>
										</form>
									</field>
								</page>
							</notebook>
					</sheet>
				</form>
			</field>
		</record>
		
        
        <record id="action_quy_trinh_form" model="ir.actions.act_window">
            <field name="name">Quy trình</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">quy.trinh</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="context">{}</field>
            <field name="domain">[('quy_trinh_id','=',False)]</field>
            <field name="view_id" ref="quy_trinh_tree_view"/>
        </record>
        
        
   <!--   Action Nút tạo công việc mới từ công việc phân công -->       
        
        <record id="action_tao_congviec_phancong1" model="ir.actions.act_window.view">
            <field eval="0" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="cong_viec_tree"/>
            <field name="act_window_id" ref="action_tao_congviec_phancong"/>
        </record>
        <record id="action_tao_congviec_phancong2" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="nhom_cong_viec_moi_giao_form"/>
            <field name="act_window_id" ref="action_tao_congviec_phancong"/>
        </record>
        
  <!-- END Action Nút tạo công việc mới từ nhóm công việc -->  
  
  
  <!--   Action Nút phân công phòng ban mới  -->       
        
        <record id="action_phancong_phongban1" model="ir.actions.act_window.view">
            <field eval="0" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="phan_cong_cong_viec_tree"/>
            <field name="act_window_id" ref="action_phancong_phongban"/>
        </record>
        <record id="action_phancong_phongban2" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="nhom_cong_viec_moi_giao_form"/>
            <field name="act_window_id" ref="action_phancong_phongban"/>
        </record>
        
  <!-- END Action Nút phân công phòng ban mới  -->  
  
  <!--   Action Nút tạo công việc con mới  -->       
        
        <record id="action_tao_congviec_con1" model="ir.actions.act_window.view">
            <field eval="0" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="cong_viec_con_tree"/>
            <field name="act_window_id" ref="action_tao_congviec_con"/>
        </record>
        <record id="action_tao_congviec_con2" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="nhom_cong_viec_moi_giao_form"/>
            <field name="act_window_id" ref="action_tao_congviec_con"/>
        </record>
        
  <!-- END Action Nút tạo công việc con mới  -->  
  
        <!--         ĐANG LÀM       -->
        
       <record model="ir.ui.view" id="nhom_cong_viec_dang_lam_kanban">
            <field name="name">nhom.cong.viec.dang.lam.kanban</field>
            <field name="model">nhom.cong.viec</field>
            <field name="arch" type="xml">
                <kanban default_group_by="loai" create = 'false' edit = 'false'>
                    <field name="name" />
                    <field name="name_kanban" />
                	<field name="phong_ban_id" />
                	<field name="quy_trinh_id" />
                	<field name="ho_tro" />
                	<field name="phong_ban_ids" />
                	<field name="ghi_chu" />
                	<field name="state" />
                	<field name="loai" />
                	<field name="tt_lanhdao" />
                	<field name="color" />
                    <templates>
                    <t t-name="kanban-box">
                        <div t-attf-class="oe_kanban_card oe_kanban_global_click">
                            <div class="oe_dropdown_toggle oe_dropdown_kanban" groups="base.group_user">
                                <span class="oe_e">í</span>
                                <ul class="oe_dropdown_menu">
                                    <t t-if="widget.view.is_action_enabled('edit')"><li><a type="edit">Edit...</a></li></t>
                                    <t t-if="widget.view.is_action_enabled('delete')"><li><a type="delete">Delete</a></li></t>
                                    <li>
                                    </li>
                                </ul>
                            </div>

                            <div class="oe_kanban_content">
                                <div><b><field name="name_kanban"/></b></div>
                            </div>
                            <div class="oe_clear"></div>
                        </div>
                    </t>
                    </templates>
                </kanban>
            </field>
         </record>     
  
        <record model="ir.ui.view" id="nhom_cong_viec_dang_lam_tree">
            <field name="name">nhom.cong.viec.dang.lam.tree</field>
            <field name="model">nhom.cong.viec</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Nhóm công việc đang làm" create = 'false'>
                	<field name="name" />
                	<field name="phong_ban_id" />
                	<field name="quy_trinh_id" />
                	<field name="ngay_het_han" />
                	<field name="ho_tro" />
                	<field name="phong_ban_ids" />
                	<field name="ht_per" readonly = '1' />
                	<field name="state" />
                	<field name="loai" invisible = '1'/>
                	<field name="trangthai_ncv" invisible='1'/>
                	<field name="trangthai_cv" invisible='1'/>
                	<field name="trangthai_cvc" invisible='1'/>
                </tree>
            </field>
        </record>
        
        <record model="ir.ui.view" id="nhom_cong_viec_dang_lam_form">
            <field name="name">nhom.cong.viec.dang.lam.form</field>
            <field name="model">nhom.cong.viec</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Nhóm công việc đang làm" version="7.0" create = 'false'>
                <header>
                		<button name="bt_hoan_thanh_ctth" string="Hoàn Thành" type="object" class="oe_highlight" attrs="{'invisible':['|',('loai','!=','5_ct_th'),('state','!=','dang_lam')]}"/>
	                    <button name="bt_duyet_ctth" string="Duyệt" type="object" class="oe_highlight" attrs="{'invisible':['|',('loai','!=','5_ct_th'),('state','!=','cho_duyet')]}"/>
                		
                		<button name="bt_hoan_thanh_cv_tg" string="Hoàn Thành" type="object" class="oe_highlight" attrs="{'invisible':['|','|',('loai','!=','2_nhom_cv_tg'),('state','!=','dang_lam'),('trangthai_cv_tg','!=','xong')]}"/>
                		<button name="bt_duyet_cv_tg" string="Duyệt" type="object" class="oe_highlight" attrs="{'invisible':['|',('loai','!=','2_nhom_cv_tg'),('state','!=','cho_duyet')]}"/>
                		
                		<button name="bt_hoan_thanh_cv" string="Hoàn Thành" type="object" class="oe_highlight" attrs="{'invisible':['|','|',('loai','!=','3_cv'),('state','!=','dang_lam'),('trangthai_cv','!=','xong')]}"/>
                		<button name="bt_duyet_cv" string="Duyệt" type="object" class="oe_highlight" attrs="{'invisible':['|','|',('loai','!=','3_cv'),('state','!=','cho_duyet')]}"/>
                		
                		<button name="bt_hoan_thanh_cvc" string="Hoàn Thành" type="object" class="oe_highlight" attrs="{'invisible':['|','|',('loai','!=','4_cv_con'),('state','!=','dang_lam'),('trangthai_cvc','!=','xong')]}"/>
                		<button name="bt_duyet_cvc" string="Duyệt" type="object" class="oe_highlight" attrs="{'invisible':['|','|',('loai','!=','4_cv_con'),('state','!=','cho_duyet')]}"/>
	                    
	                    <button name="bt_hoan_thanh_ncv" string="Hoàn Thành" type="object" class="oe_highlight" attrs="{'invisible':['|','|',('loai','!=','1_nhom_cv'),('state','!=','dang_lam'),('trangthai_ncv','!=','xong')]}"/>
	                    <button name="bt_cho_duyet" string="Ban Hành" type="object" class="oe_highlight" attrs="{'invisible':['|',('loai','!=','1_nhom_cv'), ('state','!=','cho_duyet')]}"/>
	                    
	                    <field name="state" widget="statusbar" statusbar_visible="nhap,da_giao,dang_lam,cho_duyet,duyet" />
	            </header>  
	                <sheet>
	                <h2>
	                	<label string='Tên nhóm công việc' attrs="{'invisible':[('loai','!=','1_nhom_cv')]}"/>
						<label string='Tên công việc' attrs="{'invisible':[('loai','!=','3_cv')]}"/>
						<label string='Tên công việc con' attrs="{'invisible':[('loai','!=','4_cv_con')]}"/>
						<label string='Tên chi tiết thực hiện' attrs="{'invisible':[('loai','!=','5_ct_th')]}"/>
						<label string='Tên công việc phân công PBHT' attrs="{'invisible':[('loai','!=','2_nhom_cv_tg')]}"/>
						<field name="name" nolabel='1' attrs="{'readonly':[('state','in',['cho_duyet', 'duyet'])]}"/>
	                </h2>
	                
	                <h3>
						<label for='ht_per'/>
						<field name="ht_per" nolabel='1'/>
	                </h3>
                		<notebook>
            		
        <!-- Loai: Nhóm CV  -->
        
	                     <page string="Chi tiết thực hiện" attrs="{'invisible':['|',('loai','not in',['1_nhom_cv']),'|',('ho_tro','=','co'),'&amp;',('ho_tro','=','khong'),('quy_trinh_id','=',False)]}">
	                    	<field name="ct_th_nhom_cv_line" attrs="{'readonly':[('state','in',['cho_duyet', 'duyet'])]}" context = "{'default_loai': '5_ct_th', 'default_state': 'da_giao'}" nolabel='1' >
	                    		<tree>
	                    			<field name="stt"/>
		                			<field name="name" string = 'Tên chi tiết'/>
		                			<field name="nhan_vien_id" required = '1' options="{'create': false, 'create_edit': false}"/>
		                			<field name="yeu_cau_kq" />
		                            <field name="cach_thuc_hien" />
		                            <field name="ngay_het_han" />
		        					<field name="datas" filename="datas_fname" string="Biểu mẫu kết quả" invisible="1"/>
		                            <field name="datas_fname" invisible="1" class="oe_inline oe_right"/>
		                            <field name="state" />
		                            <field name="loai" invisible = '1'/>
		                        </tree>
		                        <form version="7.0">
			                        <header>
					                		<button name="bt_nhan_cttth" states="da_giao" string="Nhận chi tiết thực hiện" type="object" class="oe_highlight"/>
						                    <field name="state" widget="statusbar" statusbar_visible="nhap,da_giao,dang_lam,cho_duyet,duyet" />
						                    <field name="loai" invisible='1'/>
						            </header>  
						            <sheet>
				                        <group col="4" colspan="2">
				                        	<field name="stt"/>
				                        	<field name="name" string = 'Tên chi tiết'/>
				                			<field name="nhan_vien_id" required = '1' options="{'create': false, 'create_edit': false}"/>
				                			<field name="yeu_cau_kq" />
				                            <field name="cach_thuc_hien" />
				                            <field name="ngay_het_han" />
				        					<field name="datas" filename="datas_fname" string="Biểu mẫu kết quả"/>
				                            <field name="datas_fname" invisible="1" class="oe_inline oe_right"/>
				                         </group>  
				                   </sheet>
		                        </form>
	                		</field>
	                    </page>
	                     <page string="Công việc" attrs="{'invisible':['|',('loai','not in',['1_nhom_cv']),'|',('quy_trinh_id','!=',False),('ho_tro','=','co')]}">
	                    	<field name="cong_viec_line" attrs="{'readonly':[('state','in',['da_giao', 'cho_duyet', 'duyet'])]}" nolabel='1' context = "{'default_loai': '3_cv', 'default_state':'da_giao', 'default_cong_viec_id':active_id, 'form_view_ref':'nhom_cong_viec_moi_giao_form'}" >
	                    		<tree>
		                			<field name="name" string = 'Tên công việc'/>
		             <!--               <field name="quy_trinh_id" on_change = "onchange_quy_trinh_id(quy_trinh_id,loai,state)" options="{'create': false, 'create_edit': false}"/>  -->
		                            <field name="nhan_vien_ids" widget="many2many_tags" options="{'create': false, 'create_edit': false}"/>
		        					<field name="ghi_chu"/>
		        					<field name="ngay_het_han" />
		        					<field name="ht_per" readonly = '1' />
		                            <field name="state" readonly = '1'/>
		                            <field name="loai" invisible = '1'/> 
		                        </tree>
					         </field>
					      </page> 
					      
					     <page string="Phân Công Phòng Ban" attrs="{'invisible':['|',('loai','not in',['1_nhom_cv']),'|','&amp;',('quy_trinh_id','!=',False),('ho_tro','=','khong'),'&amp;',('ho_tro','=','khong'),('quy_trinh_id','=',False)]}">
	                    	<field name="phan_cong_phong_ban_line" attrs="{'readonly':[('state','in',['da_giao', 'cho_duyet', 'duyet'])]}" nolabel='1' context = "{'default_phan_cong_phong_ban_id': active_id, 'default_loai': '2_nhom_cv_tg', 'default_state': 'da_giao', 'form_view_ref':'nhom_cong_viec_moi_giao_form'}">
	                    		<tree>
		                			<field name="name" string = 'Tên công việc'/>
		                			<field name="phong_ban_id" required = '1' options="{'create': false, 'create_edit': false}"/>
		               <!--             <field name="quy_trinh_id" on_change = "onchange_quy_trinh_id(quy_trinh_id,loai,state)" options="{'create': false, 'create_edit': false}"/>   -->
		        					<field name="ghi_chu"/>
		                            <field name="ngay_het_han" />
		                            <field name="ht_per" readonly = '1' />
		                            <field name="state" readonly = '1'/>
		                            <field name="loai" invisible = '1'/>
		                        </tree>
					         </field>
					      </page>
		<!-- End Loai: Nhóm CV  -->
					      
		<!-- Loai: Nhóm CV trung gian  -->
					      
					      <page string="Chi tiết thực hiện" attrs="{'invisible':['|',('loai','not in',['2_nhom_cv_tg']),('quy_trinh_id','=',False)]}">
	                    	<field name="ct_th_cv_tg_line" attrs="{'readonly':[('state','in',['cho_duyet', 'duyet'])]}" context = "{'default_loai': '5_ct_th', 'default_state': 'da_giao'}" nolabel='1' >
	                    		<tree>
	                    			<field name="stt"/>
		                			<field name="name" string = 'Tên chi tiết'/>
		                			<field name="nhan_vien_id" required = '1' options="{'create': false, 'create_edit': false}"/>
		                			<field name="yeu_cau_kq" />
		                            <field name="cach_thuc_hien" />
		                            <field name="ngay_het_han" />
		        					<field name="datas" filename="datas_fname" string="Biểu mẫu kết quả" invisible="1"/>
		                            <field name="datas_fname" invisible="1" class="oe_inline oe_right"/>
		                            <field name="state" />
		                            <field name="loai" invisible = '1'/>
		                        </tree>
		                        <form version="7.0">
			                        <header>
					                		<button name="bt_nhan_cttth" states="da_giao" string="Nhận chi tiết thực hiện" type="object" class="oe_highlight"/>
						                    <field name="state" widget="statusbar" statusbar_visible="nhap,da_giao,dang_lam,cho_duyet,duyet" />
						                    <field name="loai" invisible='1'/>
						            </header>  
						            <sheet>
				                        <group col="4" colspan="2">
				                        	<field name="stt"/>
				                        	<field name="name" string = 'Tên chi tiết'/>
				                			<field name="nhan_vien_id" required = '1' options="{'create': false, 'create_edit': false}"/>
				                			<field name="yeu_cau_kq" />
				                            <field name="cach_thuc_hien" />
				                            <field name="ngay_het_han" />
				        					<field name="datas" filename="datas_fname" string="Biểu mẫu kết quả"/>
				                            <field name="datas_fname" invisible="1" class="oe_inline oe_right"/>
				                         </group>  
			                        </sheet>  
		                        </form>
	                		</field>
	                    </page>
	                     <page string="Công việc" attrs="{'invisible':['|',('loai','not in',['2_nhom_cv_tg']),('quy_trinh_id','!=',False)]}">
	                    	<field name="cong_viec_pc_line" attrs="{'readonly':[('state','in',['da_giao', 'cho_duyet', 'duyet'])]}" nolabel='1' context = "{'default_cong_viec_pc_id': active_id, 'default_loai': '3_cv', 'default_state': 'da_giao', 'form_view_ref':'nhom_cong_viec_moi_giao_form'}" >
	                    		<tree>
		                			<field name="name" string = 'Tên công việc'/>
		             <!--               <field name="quy_trinh_id" on_change = "onchange_quy_trinh_id(quy_trinh_id,loai,state)" options="{'create': false, 'create_edit': false}"/>  -->
		                            <field name="nhan_vien_ids" widget="many2many_tags" options="{'create': false, 'create_edit': false}"/>
		        					<field name="ghi_chu"/>
		        					<field name="ngay_het_han" />
		        					<field name="ht_per" readonly = '1' />
		                            <field name="state" readonly = '1'/>
		                            <field name="loai" invisible = '1'/> 
		                        </tree>
					         </field>
					      </page> 
		
		<!-- End Loai: Nhóm CV trung gian  -->
		
		<!-- Loai: CV -->
		
						<page string="Chi tiết thực hiện" attrs="{'invisible':['|',('loai','!=','3_cv'),('quy_trinh_id','=',False)]}">
	                    	<field name="ct_th_cv_line" context = "{'default_loai': '5_ct_th', 'default_state': 'da_giao'}" nolabel='1' >
	                    		<tree>
	                    			<field name="stt"/>
		                			<field name="name" string = 'Tên chi tiết'/>
		                			<field name="nhan_vien_id" options="{'create': false, 'create_edit': false}"/>
		                			<field name="yeu_cau_kq" />
		                            <field name="cach_thuc_hien" />
		                            <field name="ngay_het_han" />
		        					<field name="datas" filename="datas_fname" string="Biểu mẫu kết quả" invisible="1"/>
		                            <field name="datas_fname" invisible="1" class="oe_inline oe_right"/>
		                            <field name="state" />
		                            <field name="loai" invisible = '1'/>
		                        </tree>
		                        <form version="7.0">
			                        <header>
					                		<button name="bt_nhan_cttth" states="da_giao" string="Nhận chi tiết thực hiện" type="object" class="oe_highlight"/>
						                    <field name="state" widget="statusbar" statusbar_visible="nhap,da_giao,dang_lam,cho_duyet,duyet" />
						                    <field name="loai" invisible='1'/>
						            </header>  
						           	<sheet>
				                        <group col="4" colspan="2">
				                        	<field name="stt"/>
				                        	<field name="name" string = 'Tên chi tiết'/>
				                			<field name="nhan_vien_id" required = '1' options="{'create': false, 'create_edit': false}"/>
				                			<field name="yeu_cau_kq" />
				                            <field name="cach_thuc_hien" />
				                            <field name="ngay_het_han" />
				        					<field name="datas" filename="datas_fname" string="Biểu mẫu kết quả"/>
				                            <field name="datas_fname" invisible="1" class="oe_inline oe_right"/>
				                         </group>  
			                         </sheet>  
		                        </form>
	                		</field>
	                    </page>
	                    
	                    <page string="Công việc con" attrs="{'invisible':['|',('loai','!=','3_cv'),('quy_trinh_id','!=',False)]}">
	                    	<field name="cong_viec_con_line" attrs="{'readonly':[('state','in',['da_giao', 'cho_duyet', 'duyet'])]}" nolabel='1' context = "{'default_cong_viec_con_id': active_id, 'default_loai': '4_cv_con', 'default_state': 'da_giao', 'form_view_ref':'nhom_cong_viec_moi_giao_form'}" >
	                    		<tree>
		                			<field name="name" string = 'Tên công việc con'/>
		                <!--            <field name="quy_trinh_id" options="{'create': false, 'create_edit': false}"/>  -->
		                            <field name="nhan_vien_id" options="{'create': false, 'create_edit': false}"/>
		        					<field name="ghi_chu"/>
		        					<field name="ngay_het_han" />
		        					<field name="ht_per" readonly = '1' />
		                            <field name="state" readonly = '1'/>
		                            <field name="loai" invisible = '1'/>
		                        </tree>
	                		</field>
	                    </page>
		
		<!-- End Loai: CV -->
		
		<!-- Loai: CV con -->
		
						<page string="Chi tiết thực hiện" attrs="{'invisible':[('loai','!=','4_cv_con')]}">
	                    	<field name="ct_th_cv_con_line" context = "{'default_loai': '5_ct_th', 'default_state': 'da_giao'}" nolabel='1' >
	                    		<tree>
	                    			<field name="stt"/>
		                			<field name="name" string = 'Tên chi tiết'/>
		                			<field name="nhan_vien_id" options="{'create': false, 'create_edit': false}"/>
		                			<field name="yeu_cau_kq" />
		                            <field name="cach_thuc_hien" />
		                            <field name="ngay_het_han" />
		        					<field name="datas" filename="datas_fname" string="Biểu mẫu kết quả" invisible="1"/>
		                            <field name="datas_fname" invisible="1" class="oe_inline oe_right"/>
		                            <field name="state" />
		                            <field name="loai" invisible = '1'/>
		                        </tree>
		                        <form version="7.0">
			                        <header>
					                		<button name="bt_nhan_cttth" states="da_giao" string="Nhận chi tiết thực hiện" type="object" class="oe_highlight"/>
						                    <field name="state" widget="statusbar" statusbar_visible="nhap,da_giao,dang_lam,cho_duyet,duyet" />
						                    <field name="loai" invisible='1'/>
						            </header>  
						            <sheet>
				                        <group col="4" colspan="2">
				                        	<field name="stt"/>
				                        	<field name="name" string = 'Tên chi tiết'/>
				                			<field name="nhan_vien_id" options="{'create': false, 'create_edit': false}"/>
				                			<field name="yeu_cau_kq" />
				                            <field name="cach_thuc_hien" />
				                            <field name="ngay_het_han" />
				        					<field name="datas" filename="datas_fname" string="Biểu mẫu kết quả"/>
				                            <field name="datas_fname" invisible="1" class="oe_inline oe_right"/>
				                         </group>  
			                         </sheet>  
		                        </form>
	                		</field>
	                    </page>
	                    
		<!-- End Loai: CV con -->
		
					      <page string="Thông tin chi tiết" >
		                    	<group>
			 						<group >
			 							<field name="ho_tro" invisible = '1' widget="radio" attrs="{'invisible':[('loai','!=','1_nhom_cv')], 'readonly':[('state','in',['cho_duyet', 'duyet'])]}"/>
			 							<field name="nhan_vien_ids" widget="many2many_tags" attrs="{'invisible':[('loai','!=','3_cv')],'required':[('loai','=','3_cv')], 'readonly':[('state','in',['cho_duyet', 'duyet'])]}" options="{'create': false, 'create_edit': false}"/>
			 							<field name="cong_viec_con_id" string = 'Công việc' options="{'create': false, 'create_edit': false}" attrs="{'invisible':[('loai','!=','4_cv_con')],'required':[('loai','=','4_cv_con')],'readonly':[('state','in',['cho_duyet', 'duyet'])]}"/>
			 							<field name="stt" attrs="{'invisible':[('loai','!=','5_ct_th')]}"/>
			 							<field name="nhan_vien_id" options="{'create': false, 'create_edit': false}" attrs="{'invisible':[('loai','not in',['4_cv_con', '5_ct_th'])],'required':[('loai','in',['4_cv_con', '5_ct_th'])],'readonly':[('state','in',['cho_duyet', 'duyet'])]}"/>
			                			<field name="yeu_cau_kq" attrs="{'invisible':[('loai','!=','5_ct_th')]}"/>
			                			<field name="trangthai_ncv" invisible='1'/>
					                	<field name="trangthai_cv" invisible='1'/>
					                	<field name="trangthai_cvc" invisible='1'/>
					                	<field name="trangthai_cv_tg" invisible='1'/>
					                	<field name="tt_lanhdao" invisible='1' />
					                	<field name="cv_tg_id" attrs="{'invisible':[('loai','not in',['4_cv_con'])], 'readonly':[('state','in',['cho_duyet', 'duyet'])]}" domain="[('loai','=','2_nhom_cv_tg')]" string = 'Công việc phân công PBHT' options="{'create': false, 'create_edit': false}"/>
					                	<field name="phong_ban_id" options="{'create': false, 'create_edit': false}" attrs="{'invisible':[('loai','not in',['1_nhom_cv','2_nhom_cv_tg'])],'required':[('loai','in',['1_nhom_cv','2_nhom_cv_tg'])],'readonly':[('state','in',['cho_duyet', 'duyet'])]}"/>
					                	<field name="phong_ban_ids" on_change = "onchange_phong_ban_ids(phong_ban_ids)" widget="many2many_tags" options="{'create': false, 'create_edit': false}" attrs="{'invisible':['|',('quy_trinh_id','!=',False),('loai','!=','1_nhom_cv')],'readonly':[('state','in',['cho_duyet', 'duyet'])]}" />
			 							<field name="cong_viec_pc_id" attrs="{'invisible':['|',('loai','not in',['3_cv']),('cong_viec_id','!=',False)],'required':[('cong_viec_id','=',False),('loai','=','3_cv')], 'readonly':[('state','in',['cho_duyet', 'duyet'])]}" domain="[('loai','=','2_nhom_cv_tg')]" string = 'Công việc phân công PBHT' options="{'create': false, 'create_edit': false}"/>
						                <field name="nhom_cv_pc_id" attrs="{'invisible':['|',('loai','not in',['3_cv']),('cong_viec_id','!=',False)],'required':[('cong_viec_id','=',False),('loai','=','3_cv')], 'readonly':[('state','in',['cho_duyet', 'duyet'])]}" domain="[('loai','=','1_nhom_cv')]" string = 'Nhóm công việc' options="{'create': false, 'create_edit': false}"/>
			 							<field name="phan_cong_phong_ban_id" attrs="{'invisible':[('loai','not in',['2_nhom_cv_tg'])],'required':[('loai','=','2_nhom_cv_tg')], 'readonly':[('state','in',['cho_duyet', 'duyet'])]}" domain="[('loai','=','1_nhom_cv')]" options="{'create': false, 'create_edit': false}"/>
						                <field name="cong_viec_id" attrs="{'invisible':['|',('cong_viec_pc_id','!=',False),('loai','not in',['3_cv'])],'required':[('cong_viec_pc_id','=',False),('loai','=','3_cv')], 'readonly':[('state','in',['cho_duyet', 'duyet'])]}" domain="[('loai','=','1_nhom_cv')]" string = 'Nhóm công việc' options="{'create': false, 'create_edit': false}"/>
			 						</group>
				                	<group>
					                	<field name="quy_trinh_id" domain="[('quy_trinh_id','=',False)]" on_change = "onchange_quy_trinh_id(quy_trinh_id,loai,state)" options="{'create': false, 'create_edit': false}" attrs="{'invisible':['|',('ho_tro','=','co'),('loai','=','5_ct_th')], 'readonly':[('state','in',['cho_duyet', 'duyet'])]}" />
						                <field name="ngay_het_han" />
				                		<field name="nhom_cv_id" attrs="{'invisible':[('loai','not in',['4_cv_con'])],'required':[('loai','=','4_cv_con')], 'readonly':[('state','in',['cho_duyet', 'duyet'])]}" domain="[('loai','=','1_nhom_cv')]" string = 'Nhóm công việc' options="{'create': false, 'create_edit': false}"/>
				                		<field name="cach_thuc_hien" attrs="{'invisible':[('loai','!=','5_ct_th')]}"/>
			        					<field name="datas" filename="datas_fname" string="Biểu mẫu kết quả" attrs="{'invisible':[('loai','!=','5_ct_th')]}"/>
			                            <field name="datas_fname" invisible="1" class="oe_inline oe_right" attrs="{'invisible':[('loai','!=','5_ct_th')]}"/>
				                	</group>
				                	<group>
					                	<field name="loai" invisible = '1'/>
				                	</group>
					            </group>
				               	<group col="4" colspan="2" >
				                	<field name="ghi_chu" attrs="{'readonly':[('state','in',['cho_duyet', 'duyet'])]}"/>
				                </group>
					      </page>
					 </notebook>
	                </sheet>
	                
                </form>
            </field>
        </record>
       
        <record model="ir.actions.act_window" id="action_nhom_cong_viec_dang_lam">
            <field name="name">Nhóm công việc đang làm</field>
            <field name="res_model">nhom.cong.viec</field>
            <field name="view_type">form</field>
            <field name="view_mode">kanban,tree,form</field>
            <field name="domain">[('state','in',['dang_lam'])]</field>
            <field name="view_id" ref="nhom_cong_viec_dang_lam_tree"/>
            <field name="context">{'default_loai': '1_nhom_cv','search_default_loai': 1}</field>
            <field name="search_view_id" ref="search_loai"/>
        </record>
        <record id="action_nhom_cong_viec_dang_lam1" model="ir.actions.act_window.view">
            <field eval="0" name="sequence"/>
            <field name="view_mode">kanban</field>
            <field name="view_id" ref="nhom_cong_viec_dang_lam_kanban"/>
            <field name="act_window_id" ref="action_nhom_cong_viec_dang_lam"/>
        </record>
        <record id="action_nhom_cong_viec_dang_lam2" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="nhom_cong_viec_dang_lam_tree"/>
            <field name="act_window_id" ref="action_nhom_cong_viec_dang_lam"/>
        </record>
        <record id="action_nhom_cong_viec_dang_lam3" model="ir.actions.act_window.view">
            <field eval="2" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="nhom_cong_viec_dang_lam_form"/>
            <field name="act_window_id" ref="action_nhom_cong_viec_dang_lam"/>
        </record> 
        
        <!--         CHỜ DUYỆT       -->
        
       <record model="ir.ui.view" id="nhom_cong_viec_cho_duyet_kanban">
            <field name="name">nhom.cong.viec.cho.duyet.kanban</field>
            <field name="model">nhom.cong.viec</field>
            <field name="arch" type="xml">
                <kanban default_group_by="loai" create = 'false' edit = 'false'>
                    <field name="name" />
                    <field name="name_kanban" />
                	<field name="phong_ban_id" />
                	<field name="quy_trinh_id" />
                	<field name="ho_tro" />
                	<field name="phong_ban_ids" />
                	<field name="state" />
                	<field name="loai" />
                    <templates>
                    <t t-name="kanban-box">
                        <div t-attf-class="oe_kanban_card oe_kanban_global_click">
                            <div class="oe_dropdown_toggle oe_dropdown_kanban" groups="base.group_user">
                                <span class="oe_e">í</span>
                                <ul class="oe_dropdown_menu">
                                    <t t-if="widget.view.is_action_enabled('edit')"><li><a type="edit">Edit...</a></li></t>
                                    <t t-if="widget.view.is_action_enabled('delete')"><li><a type="delete">Delete</a></li></t>
                                    <li>
                                    </li>
                                </ul>
                            </div>

                            <div class="oe_kanban_content">
                                <div><b><field name="name_kanban"/></b></div>
                            </div>
                            <div class="oe_clear"></div>
                        </div>
                    </t>
                    </templates>
                </kanban>
            </field>
         </record>
  
        <record model="ir.ui.view" id="nhom_cong_viec_cho_duyet_tree">
            <field name="name">nhom.cong.viec.cho.duyet.tree</field>
            <field name="model">nhom.cong.viec</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Nhóm công việc chờ duyệt" create = 'false' edit = 'false'>
                	<field name="name" />
                	<field name="phong_ban_id" />
                	<field name="quy_trinh_id" />
                	<field name="ngay_het_han" />
                	<field name="ho_tro" />
                	<field name="phong_ban_ids" />
                	<field name="ht_per" readonly = '1'/>
                	<field name="state" />
                	<field name="loai" invisible = '1'/>
                	<field name="trangthai_ncv" invisible='1'/>
                	<field name="trangthai_cv" invisible='1'/>
                	<field name="trangthai_cvc" invisible='1'/>
                </tree>
            </field>
        </record>
        
        <record model="ir.ui.view" id="nhom_cong_viec_cho_duyet_form">
            <field name="name">nhom.cong.viec.cho.duyet.form</field>
            <field name="model">nhom.cong.viec</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Nhóm công việc chờ duyệt" version="7.0" create = 'false' edit = 'false'>
                <header>
	                    <button name="bt_duyet_ctth" string="Duyệt" type="object" class="oe_highlight" attrs="{'invisible':['|',('loai','!=','5_ct_th'),('state','!=','cho_duyet')]}"/>
                		
                		<button name="bt_duyet_cv_tg" string="Duyệt" type="object" class="oe_highlight" attrs="{'invisible':['|',('loai','!=','2_nhom_cv_tg'),('state','!=','cho_duyet')]}"/>
                		
                		<button name="bt_duyet_cv" string="Duyệt" type="object" class="oe_highlight" attrs="{'invisible':['|','|',('loai','!=','3_cv'),('state','!=','cho_duyet')]}"/>
                		
                		<button name="bt_duyet_cvc" string="Duyệt" type="object" class="oe_highlight" attrs="{'invisible':['|','|',('loai','!=','4_cv_con'),('state','!=','cho_duyet')]}"/>
	                    
	                    <button name="bt_cho_duyet" string="Ban Hành" type="object" class="oe_highlight" attrs="{'invisible':['|',('loai','!=','1_nhom_cv'), ('state','!=','cho_duyet')]}"/>
	                    <field name="state" widget="statusbar" statusbar_visible="nhap,da_giao,dang_lam,cho_duyet,duyet" />
	            </header>  
	                <sheet>
	                <h2>
	                	<label string='Tên nhóm công việc' attrs="{'invisible':[('loai','!=','1_nhom_cv')]}"/>
						<label string='Tên công việc' attrs="{'invisible':[('loai','!=','3_cv')]}"/>
						<label string='Tên công việc con' attrs="{'invisible':[('loai','!=','4_cv_con')]}"/>
						<label string='Tên chi tiết thực hiện' attrs="{'invisible':[('loai','!=','5_ct_th')]}"/>
						<label string='Tên công việc phân công PBHT' attrs="{'invisible':[('loai','!=','2_nhom_cv_tg')]}"/>
						<field name="name" nolabel='1' attrs="{'readonly':[('state','in',['cho_duyet', 'duyet'])]}"/>
	                </h2>
	                
	                <h3>
						<label for='ht_per'/>
						<field name="ht_per" nolabel='1'/>
	                </h3>
                		<notebook>
            		
        <!-- Loai: Nhóm CV  -->
        
	                     <page string="Chi tiết thực hiện" attrs="{'invisible':['|',('loai','not in',['1_nhom_cv']),'|',('ho_tro','=','co'),'&amp;',('ho_tro','=','khong'),('quy_trinh_id','=',False)]}">
	                    	<field name="ct_th_nhom_cv_line" attrs="{'readonly':[('state','in',['cho_duyet', 'duyet'])]}" context = "{'default_loai': '5_ct_th', 'default_state': 'da_giao'}" nolabel='1' >
	                    		<tree>
	                    			<field name="stt"/>
		                			<field name="name" string = 'Tên chi tiết'/>
		                			<field name="nhan_vien_id" required = '1' options="{'create': false, 'create_edit': false}"/>
		                			<field name="yeu_cau_kq" />
		                            <field name="cach_thuc_hien" />
		                            <field name="ngay_het_han" />
		        					<field name="datas" filename="datas_fname" string="Biểu mẫu kết quả" invisible="1"/>
		                            <field name="datas_fname" invisible="1" class="oe_inline oe_right"/>
		                            <field name="state" />
		                            <field name="loai" invisible = '1'/>
		                        </tree>
		                        <form version="7.0">
			                        <header>
					                		<button name="bt_nhan_cttth" states="da_giao" string="Nhận chi tiết thực hiện" type="object" class="oe_highlight"/>
						                    <field name="state" widget="statusbar" statusbar_visible="nhap,da_giao,dang_lam,cho_duyet,duyet" />
						                    <field name="loai" invisible='1'/>
						            </header>  
						            <sheet>
				                        <group col="4" colspan="2">
				                        	<field name="stt"/>
				                        	<field name="name" string = 'Tên chi tiết'/>
				                			<field name="nhan_vien_id" required = '1' options="{'create': false, 'create_edit': false}"/>
				                			<field name="yeu_cau_kq" />
				                            <field name="cach_thuc_hien" />
				                            <field name="ngay_het_han" />
				        					<field name="datas" filename="datas_fname" string="Biểu mẫu kết quả"/>
				                            <field name="datas_fname" invisible="1" class="oe_inline oe_right"/>
				                         </group>  
				                   </sheet>
		                        </form>
	                		</field>
	                    </page>
	                     <page string="Công việc" attrs="{'invisible':['|',('loai','not in',['1_nhom_cv']),'|',('quy_trinh_id','!=',False),('ho_tro','=','co')]}">
	                    	<field name="cong_viec_line" attrs="{'readonly':[('state','in',['da_giao', 'cho_duyet', 'duyet'])]}" nolabel='1' context = "{'default_loai': '3_cv', 'default_state':'da_giao', 'default_cong_viec_id':active_id, 'form_view_ref':'nhom_cong_viec_moi_giao_form'}" >
	                    		<tree>
		                			<field name="name" string = 'Tên công việc'/>
		             <!--               <field name="quy_trinh_id" on_change = "onchange_quy_trinh_id(quy_trinh_id,loai,state)" options="{'create': false, 'create_edit': false}"/>  -->
		                            <field name="nhan_vien_ids" widget="many2many_tags" options="{'create': false, 'create_edit': false}"/>
		        					<field name="ghi_chu"/>
		        					<field name="ngay_het_han" />
		        					<field name="ht_per" readonly = '1' />
		                            <field name="state" readonly = '1'/>
		                            <field name="loai" invisible = '1'/> 
		                        </tree>
					         </field>
					      </page> 
					      
					     <page string="Phân Công Phòng Ban" attrs="{'invisible':['|',('loai','not in',['1_nhom_cv']),'|','&amp;',('quy_trinh_id','!=',False),('ho_tro','=','khong'),'&amp;',('ho_tro','=','khong'),('quy_trinh_id','=',False)]}">
	                    	<field name="phan_cong_phong_ban_line" attrs="{'readonly':[('state','in',['da_giao', 'cho_duyet', 'duyet'])]}" nolabel='1' context = "{'default_phan_cong_phong_ban_id': active_id, 'default_loai': '2_nhom_cv_tg', 'default_state': 'da_giao', 'form_view_ref':'nhom_cong_viec_moi_giao_form'}">
	                    		<tree>
		                			<field name="name" string = 'Tên công việc'/>
		                			<field name="phong_ban_id" required = '1' options="{'create': false, 'create_edit': false}"/>
		               <!--             <field name="quy_trinh_id" on_change = "onchange_quy_trinh_id(quy_trinh_id,loai,state)" options="{'create': false, 'create_edit': false}"/>   -->
		        					<field name="ghi_chu"/>
		                            <field name="ngay_het_han" />
		                            <field name="ht_per" readonly = '1' />
		                            <field name="state" readonly = '1'/>
		                            <field name="loai" invisible = '1'/>
		                        </tree>
					         </field>
					      </page>
		<!-- End Loai: Nhóm CV  -->
					      
		<!-- Loai: Nhóm CV trung gian  -->
					      
					      <page string="Chi tiết thực hiện" attrs="{'invisible':['|',('loai','not in',['2_nhom_cv_tg']),('quy_trinh_id','=',False)]}">
	                    	<field name="ct_th_cv_tg_line" attrs="{'readonly':[('state','in',['cho_duyet', 'duyet'])]}" context = "{'default_loai': '5_ct_th', 'default_state': 'da_giao'}" nolabel='1' >
	                    		<tree>
	                    			<field name="stt"/>
		                			<field name="name" string = 'Tên chi tiết'/>
		                			<field name="nhan_vien_id" required = '1' options="{'create': false, 'create_edit': false}"/>
		                			<field name="yeu_cau_kq" />
		                            <field name="cach_thuc_hien" />
		                            <field name="ngay_het_han" />
		        					<field name="datas" filename="datas_fname" string="Biểu mẫu kết quả" invisible="1"/>
		                            <field name="datas_fname" invisible="1" class="oe_inline oe_right"/>
		                            <field name="state" />
		                            <field name="loai" invisible = '1'/>
		                        </tree>
		                        <form version="7.0">
			                        <header>
					                		<button name="bt_nhan_cttth" states="da_giao" string="Nhận chi tiết thực hiện" type="object" class="oe_highlight"/>
						                    <field name="state" widget="statusbar" statusbar_visible="nhap,da_giao,dang_lam,cho_duyet,duyet" />
						                    <field name="loai" invisible='1'/>
						            </header>  
						            <sheet>
				                        <group col="4" colspan="2">
				                        	<field name="stt"/>
				                        	<field name="name" string = 'Tên chi tiết'/>
				                			<field name="nhan_vien_id" required = '1' options="{'create': false, 'create_edit': false}"/>
				                			<field name="yeu_cau_kq" />
				                            <field name="cach_thuc_hien" />
				                            <field name="ngay_het_han" />
				        					<field name="datas" filename="datas_fname" string="Biểu mẫu kết quả"/>
				                            <field name="datas_fname" invisible="1" class="oe_inline oe_right"/>
				                         </group>  
			                        </sheet>  
		                        </form>
	                		</field>
	                    </page>
	                     <page string="Công việc" attrs="{'invisible':['|',('loai','not in',['2_nhom_cv_tg']),('quy_trinh_id','!=',False)]}">
	                    	<field name="cong_viec_pc_line" attrs="{'readonly':[('state','in',['da_giao', 'cho_duyet', 'duyet'])]}" nolabel='1' context = "{'default_cong_viec_pc_id': active_id, 'default_loai': '3_cv', 'default_state': 'da_giao', 'form_view_ref':'nhom_cong_viec_moi_giao_form'}" >
	                    		<tree>
		                			<field name="name" string = 'Tên công việc'/>
		             <!--               <field name="quy_trinh_id" on_change = "onchange_quy_trinh_id(quy_trinh_id,loai,state)" options="{'create': false, 'create_edit': false}"/>  -->
		                            <field name="nhan_vien_ids" widget="many2many_tags" options="{'create': false, 'create_edit': false}"/>
		        					<field name="ghi_chu"/>
		        					<field name="ngay_het_han" />
		        					<field name="ht_per" readonly = '1' />
		                            <field name="state" readonly = '1'/>
		                            <field name="loai" invisible = '1'/> 
		                        </tree>
					         </field>
					      </page> 
		
		<!-- End Loai: Nhóm CV trung gian  -->
		
		<!-- Loai: CV -->
		
						<page string="Chi tiết thực hiện" attrs="{'invisible':['|',('loai','!=','3_cv'),('quy_trinh_id','=',False)]}">
	                    	<field name="ct_th_cv_line" context = "{'default_loai': '5_ct_th', 'default_state': 'da_giao'}" nolabel='1' >
	                    		<tree>
	                    			<field name="stt"/>
		                			<field name="name" string = 'Tên chi tiết'/>
		                			<field name="nhan_vien_id" options="{'create': false, 'create_edit': false}"/>
		                			<field name="yeu_cau_kq" />
		                            <field name="cach_thuc_hien" />
		                            <field name="ngay_het_han" />
		        					<field name="datas" filename="datas_fname" string="Biểu mẫu kết quả" invisible="1"/>
		                            <field name="datas_fname" invisible="1" class="oe_inline oe_right"/>
		                            <field name="state" />
		                            <field name="loai" invisible = '1'/>
		                        </tree>
		                        <form version="7.0">
			                        <header>
					                		<button name="bt_nhan_cttth" states="da_giao" string="Nhận chi tiết thực hiện" type="object" class="oe_highlight"/>
						                    <field name="state" widget="statusbar" statusbar_visible="nhap,da_giao,dang_lam,cho_duyet,duyet" />
						                    <field name="loai" invisible='1'/>
						            </header>  
						           	<sheet>
				                        <group col="4" colspan="2">
				                        	<field name="stt"/>
				                        	<field name="name" string = 'Tên chi tiết'/>
				                			<field name="nhan_vien_id" required = '1' options="{'create': false, 'create_edit': false}"/>
				                			<field name="yeu_cau_kq" />
				                            <field name="cach_thuc_hien" />
				                            <field name="ngay_het_han" />
				        					<field name="datas" filename="datas_fname" string="Biểu mẫu kết quả"/>
				                            <field name="datas_fname" invisible="1" class="oe_inline oe_right"/>
				                         </group>  
			                         </sheet>  
		                        </form>
	                		</field>
	                    </page>
	                    
	                    <page string="Công việc con" attrs="{'invisible':['|',('loai','!=','3_cv'),('quy_trinh_id','!=',False)]}">
	                    	<field name="cong_viec_con_line" attrs="{'readonly':[('state','in',['da_giao', 'cho_duyet', 'duyet'])]}" nolabel='1' context = "{'default_cong_viec_con_id': active_id, 'default_loai': '4_cv_con', 'default_state': 'da_giao', 'form_view_ref':'nhom_cong_viec_moi_giao_form'}" >
	                    		<tree>
		                			<field name="name" string = 'Tên công việc con'/>
		                <!--            <field name="quy_trinh_id" options="{'create': false, 'create_edit': false}"/>  -->
		                            <field name="nhan_vien_id" options="{'create': false, 'create_edit': false}"/>
		        					<field name="ghi_chu"/>
		        					<field name="ngay_het_han" />
		        					<field name="ht_per" readonly = '1' />
		                            <field name="state" readonly = '1'/>
		                            <field name="loai" invisible = '1'/>
		                        </tree>
	                		</field>
	                    </page>
		
		<!-- End Loai: CV -->
		
		<!-- Loai: CV con -->
		
						<page string="Chi tiết thực hiện" attrs="{'invisible':[('loai','!=','4_cv_con')]}">
	                    	<field name="ct_th_cv_con_line" context = "{'default_loai': '5_ct_th', 'default_state': 'da_giao'}" nolabel='1' >
	                    		<tree>
	                    			<field name="stt"/>
		                			<field name="name" string = 'Tên chi tiết'/>
		                			<field name="nhan_vien_id" options="{'create': false, 'create_edit': false}"/>
		                			<field name="yeu_cau_kq" />
		                            <field name="cach_thuc_hien" />
		                            <field name="ngay_het_han" />
		        					<field name="datas" filename="datas_fname" string="Biểu mẫu kết quả" invisible="1"/>
		                            <field name="datas_fname" invisible="1" class="oe_inline oe_right"/>
		                            <field name="state" />
		                            <field name="loai" invisible = '1'/>
		                        </tree>
		                        <form version="7.0">
			                        <header>
					                		<button name="bt_nhan_cttth" states="da_giao" string="Nhận chi tiết thực hiện" type="object" class="oe_highlight"/>
						                    <field name="state" widget="statusbar" statusbar_visible="nhap,da_giao,dang_lam,cho_duyet,duyet" />
						                    <field name="loai" invisible='1'/>
						            </header>  
						            <sheet>
				                        <group col="4" colspan="2">
				                        	<field name="stt"/>
				                        	<field name="name" string = 'Tên chi tiết'/>
				                			<field name="nhan_vien_id" options="{'create': false, 'create_edit': false}"/>
				                			<field name="yeu_cau_kq" />
				                            <field name="cach_thuc_hien" />
				                            <field name="ngay_het_han" />
				        					<field name="datas" filename="datas_fname" string="Biểu mẫu kết quả"/>
				                            <field name="datas_fname" invisible="1" class="oe_inline oe_right"/>
				                         </group>  
			                         </sheet>  
		                        </form>
	                		</field>
	                    </page>
	                    
		<!-- End Loai: CV con -->
		
					      <page string="Thông tin chi tiết" >
		                    	<group>
			 						<group >
			 							<field name="ho_tro" invisible = '1' widget="radio" attrs="{'invisible':[('loai','!=','1_nhom_cv')], 'readonly':[('state','in',['cho_duyet', 'duyet'])]}"/>
			 							<field name="nhan_vien_ids" widget="many2many_tags" attrs="{'invisible':[('loai','!=','3_cv')],'required':[('loai','=','3_cv')], 'readonly':[('state','in',['cho_duyet', 'duyet'])]}" options="{'create': false, 'create_edit': false}"/>
			 							<field name="cong_viec_con_id" string = 'Công việc' options="{'create': false, 'create_edit': false}" attrs="{'invisible':[('loai','!=','4_cv_con')],'required':[('loai','=','4_cv_con')],'readonly':[('state','in',['cho_duyet', 'duyet'])]}"/>
			 							<field name="stt" attrs="{'invisible':[('loai','!=','5_ct_th')]}"/>
			 							<field name="nhan_vien_id" options="{'create': false, 'create_edit': false}" attrs="{'invisible':[('loai','not in',['4_cv_con', '5_ct_th'])],'required':[('loai','in',['4_cv_con', '5_ct_th'])],'readonly':[('state','in',['cho_duyet', 'duyet'])]}"/>
			                			<field name="yeu_cau_kq" attrs="{'invisible':[('loai','!=','5_ct_th')]}"/>
			                			<field name="trangthai_ncv" invisible='1'/>
					                	<field name="trangthai_cv" invisible='1'/>
					                	<field name="trangthai_cvc" invisible='1'/>
					                	<field name="trangthai_cv_tg" invisible='1'/>
					                	<field name="tt_lanhdao" invisible='1' />
					                	<field name="cv_tg_id" attrs="{'invisible':[('loai','not in',['4_cv_con'])], 'readonly':[('state','in',['cho_duyet', 'duyet'])]}" domain="[('loai','=','2_nhom_cv_tg')]" string = 'Công việc phân công PBHT' options="{'create': false, 'create_edit': false}"/>
					                	<field name="phong_ban_id" options="{'create': false, 'create_edit': false}" attrs="{'invisible':[('loai','not in',['1_nhom_cv','2_nhom_cv_tg'])],'required':[('loai','in',['1_nhom_cv','2_nhom_cv_tg'])],'readonly':[('state','in',['cho_duyet', 'duyet'])]}"/>
					                	<field name="phong_ban_ids" on_change = "onchange_phong_ban_ids(phong_ban_ids)" widget="many2many_tags" options="{'create': false, 'create_edit': false}" attrs="{'invisible':['|',('quy_trinh_id','!=',False),('loai','!=','1_nhom_cv')],'readonly':[('state','in',['cho_duyet', 'duyet'])]}" />
			 							<field name="cong_viec_pc_id" attrs="{'invisible':['|',('loai','not in',['3_cv']),('cong_viec_id','!=',False)],'required':[('cong_viec_id','=',False),('loai','=','3_cv')], 'readonly':[('state','in',['cho_duyet', 'duyet'])]}" domain="[('loai','=','2_nhom_cv_tg')]" string = 'Công việc phân công PBHT' options="{'create': false, 'create_edit': false}"/>
						                <field name="nhom_cv_pc_id" attrs="{'invisible':['|',('loai','not in',['3_cv']),('cong_viec_id','!=',False)],'required':[('cong_viec_id','=',False),('loai','=','3_cv')], 'readonly':[('state','in',['cho_duyet', 'duyet'])]}" domain="[('loai','=','1_nhom_cv')]" string = 'Nhóm công việc' options="{'create': false, 'create_edit': false}"/>
			 							<field name="phan_cong_phong_ban_id" attrs="{'invisible':[('loai','not in',['2_nhom_cv_tg'])],'required':[('loai','=','2_nhom_cv_tg')], 'readonly':[('state','in',['cho_duyet', 'duyet'])]}" domain="[('loai','=','1_nhom_cv')]" options="{'create': false, 'create_edit': false}"/>
						                <field name="cong_viec_id" attrs="{'invisible':['|',('cong_viec_pc_id','!=',False),('loai','not in',['3_cv'])],'required':[('cong_viec_pc_id','=',False),('loai','=','3_cv')], 'readonly':[('state','in',['cho_duyet', 'duyet'])]}" domain="[('loai','=','1_nhom_cv')]" string = 'Nhóm công việc' options="{'create': false, 'create_edit': false}"/>
			 						</group>
				                	<group>
					                	<field name="quy_trinh_id" domain="[('quy_trinh_id','=',False)]" on_change = "onchange_quy_trinh_id(quy_trinh_id,loai,state)" options="{'create': false, 'create_edit': false}" attrs="{'invisible':['|',('ho_tro','=','co'),('loai','=','5_ct_th')], 'readonly':[('state','in',['cho_duyet', 'duyet'])]}" />
						                <field name="ngay_het_han" />
				                		<field name="nhom_cv_id" attrs="{'invisible':[('loai','not in',['4_cv_con'])],'required':[('loai','=','4_cv_con')], 'readonly':[('state','in',['cho_duyet', 'duyet'])]}" domain="[('loai','=','1_nhom_cv')]" string = 'Nhóm công việc' options="{'create': false, 'create_edit': false}"/>
				                		<field name="cach_thuc_hien" attrs="{'invisible':[('loai','!=','5_ct_th')]}"/>
			        					<field name="datas" filename="datas_fname" string="Biểu mẫu kết quả" attrs="{'invisible':[('loai','!=','5_ct_th')]}"/>
			                            <field name="datas_fname" invisible="1" class="oe_inline oe_right" attrs="{'invisible':[('loai','!=','5_ct_th')]}"/>
				                	</group>
				                	<group>
					                	<field name="loai" invisible = '1'/>
				                	</group>
					            </group>
				               	<group col="4" colspan="2" >
				                	<field name="ghi_chu" attrs="{'readonly':[('state','in',['cho_duyet', 'duyet'])]}"/>
				                </group>
					      </page>
					 </notebook>
	                </sheet>
                </form>
            </field>
        </record>
       
        <record model="ir.actions.act_window" id="action_nhom_cong_viec_cho_duyet">
            <field name="name">Nhóm công việc chờ duyệt</field>
            <field name="res_model">nhom.cong.viec</field>
            <field name="view_type">form</field>
            <field name="view_mode">kanban,tree,form</field>
            <field name="domain">[('state','in',['cho_duyet'])]</field>
            <field name="view_id" ref="nhom_cong_viec_cho_duyet_tree"/>
            <field name="context">{'default_loai': '1_nhom_cv','search_default_loai': 1}</field>
            <field name="search_view_id" ref="search_loai"/>
        </record>
        <record id="action_nhom_cong_viec_cho_duyet1" model="ir.actions.act_window.view">
            <field eval="0" name="sequence"/>
            <field name="view_mode">kanban</field>
            <field name="view_id" ref="nhom_cong_viec_cho_duyet_kanban"/>
            <field name="act_window_id" ref="action_nhom_cong_viec_cho_duyet"/>
        </record>
        <record id="action_nhom_cong_viec_cho_duyet2" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="nhom_cong_viec_cho_duyet_tree"/>
            <field name="act_window_id" ref="action_nhom_cong_viec_cho_duyet"/>
        </record>
        <record id="action_nhom_cong_viec_cho_duyet3" model="ir.actions.act_window.view">
            <field eval="2" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="nhom_cong_viec_cho_duyet_form"/>
            <field name="act_window_id" ref="action_nhom_cong_viec_cho_duyet"/>
        </record> 
        
        
        <!--         ĐÃ BAN HÀNH       -->
        
       <record model="ir.ui.view" id="nhom_cong_viec_da_ban_hanh_kanban">
            <field name="name">nhom.cong.viec.da.ban.hanh.kanban</field>
            <field name="model">nhom.cong.viec</field>
            <field name="arch" type="xml">
                <kanban default_group_by="loai" create = 'false' edit = 'false'>
                    <field name="name" />
                    <field name="name_kanban" />
                	<field name="phong_ban_id" />
                	<field name="quy_trinh_id" />
                	<field name="ho_tro" />
                	<field name="phong_ban_ids" />
                	<field name="state" />
                	<field name="loai" />
                    <templates>
                    <t t-name="kanban-box">
                        <div t-attf-class="oe_kanban_card oe_kanban_global_click">
                            <div class="oe_dropdown_toggle oe_dropdown_kanban" groups="base.group_user">
                                <span class="oe_e">í</span>
                                <ul class="oe_dropdown_menu">
                                    <t t-if="widget.view.is_action_enabled('edit')"><li><a type="edit">Edit...</a></li></t>
                                    <t t-if="widget.view.is_action_enabled('delete')"><li><a type="delete">Delete</a></li></t>
                                    <li>
                                    </li>
                                </ul>
                            </div>

                            <div class="oe_kanban_content">
                                <div><b><field name="name_kanban"/></b></div>
                            </div>
                            <div class="oe_clear"></div>
                        </div>
                    </t>
                    </templates>
                </kanban>
            </field>
         </record>
  
        <record model="ir.ui.view" id="nhom_cong_viec_da_ban_hanh_tree">
            <field name="name">nhom.cong.viec.da.ban.hanh.tree</field>
            <field name="model">nhom.cong.viec</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Nhóm công việc đã ban hành" create = 'false' edit = 'false'>
                	<field name="name" />
                	<field name="phong_ban_id" />
                	<field name="quy_trinh_id" />
                	<field name="ngay_het_han" />
                	<field name="ho_tro" />
                	<field name="phong_ban_ids" />
                	<field name="ht_per" readonly = '1'/>
                	<field name="state" />
                	<field name="loai" invisible = '1'/>
                	<field name="trangthai_ncv" invisible='1'/>
                	<field name="trangthai_cv" invisible='1'/>
                	<field name="trangthai_cvc" invisible='1'/>
                </tree>
            </field>
        </record>
        
        <record model="ir.ui.view" id="nhom_cong_viec_da_ban_hanh_form">
            <field name="name">nhom.cong.viec.da.ban.hanh.form</field>
            <field name="model">nhom.cong.viec</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Nhóm công việc đã ban hành" version="7.0" create = 'false' edit = 'false'>
                <header>
	                    <field name="state" widget="statusbar" statusbar_visible="nhap,da_giao,dang_lam,cho_duyet,duyet" />
	            </header>  
	                <sheet>
	                <h2>
	                	<label string='Tên nhóm công việc' attrs="{'invisible':[('loai','!=','1_nhom_cv')]}"/>
						<label string='Tên công việc' attrs="{'invisible':[('loai','!=','3_cv')]}"/>
						<label string='Tên công việc con' attrs="{'invisible':[('loai','!=','4_cv_con')]}"/>
						<label string='Tên chi tiết thực hiện' attrs="{'invisible':[('loai','!=','5_ct_th')]}"/>
						<label string='Tên công việc phân công PBHT' attrs="{'invisible':[('loai','!=','2_nhom_cv_tg')]}"/>
						<field name="name" nolabel='1' attrs="{'readonly':[('state','in',['cho_duyet', 'duyet'])]}"/>
	                </h2>
	                
	                <h3>
						<label for='ht_per'/>
						<field name="ht_per" nolabel='1'/>
	                </h3>
                		<notebook>
            		
        <!-- Loai: Nhóm CV  -->
        
	                     <page string="Chi tiết thực hiện" attrs="{'invisible':['|',('loai','not in',['1_nhom_cv']),'|',('ho_tro','=','co'),'&amp;',('ho_tro','=','khong'),('quy_trinh_id','=',False)]}">
	                    	<field name="ct_th_nhom_cv_line" attrs="{'readonly':[('state','in',['cho_duyet', 'duyet'])]}" context = "{'default_loai': '5_ct_th', 'default_state': 'da_giao'}" nolabel='1' >
	                    		<tree>
	                    			<field name="stt"/>
		                			<field name="name" string = 'Tên chi tiết'/>
		                			<field name="nhan_vien_id" required = '1' options="{'create': false, 'create_edit': false}"/>
		                			<field name="yeu_cau_kq" />
		                            <field name="cach_thuc_hien" />
		                            <field name="ngay_het_han" />
		        					<field name="datas" filename="datas_fname" string="Biểu mẫu kết quả" invisible="1"/>
		                            <field name="datas_fname" invisible="1" class="oe_inline oe_right"/>
		                            <field name="state" />
		                            <field name="loai" invisible = '1'/>
		                        </tree>
		                        <form version="7.0">
			                        <header>
					                		<button name="bt_nhan_cttth" states="da_giao" string="Nhận chi tiết thực hiện" type="object" class="oe_highlight"/>
						                    <field name="state" widget="statusbar" statusbar_visible="nhap,da_giao,dang_lam,cho_duyet,duyet" />
						                    <field name="loai" invisible='1'/>
						            </header>  
						            <sheet>
				                        <group col="4" colspan="2">
				                        	<field name="stt"/>
				                        	<field name="name" string = 'Tên chi tiết'/>
				                			<field name="nhan_vien_id" required = '1' options="{'create': false, 'create_edit': false}"/>
				                			<field name="yeu_cau_kq" />
				                            <field name="cach_thuc_hien" />
				                            <field name="ngay_het_han" />
				        					<field name="datas" filename="datas_fname" string="Biểu mẫu kết quả"/>
				                            <field name="datas_fname" invisible="1" class="oe_inline oe_right"/>
				                         </group>  
				                   </sheet>
		                        </form>
	                		</field>
	                    </page>
	                     <page string="Công việc" attrs="{'invisible':['|',('loai','not in',['1_nhom_cv']),'|',('quy_trinh_id','!=',False),('ho_tro','=','co')]}">
	                    	<field name="cong_viec_line" attrs="{'readonly':[('state','in',['da_giao', 'cho_duyet', 'duyet'])]}" nolabel='1' context = "{'default_loai': '3_cv', 'default_state':'da_giao', 'default_cong_viec_id':active_id, 'form_view_ref':'nhom_cong_viec_moi_giao_form'}" >
	                    		<tree>
		                			<field name="name" string = 'Tên công việc'/>
		             <!--               <field name="quy_trinh_id" on_change = "onchange_quy_trinh_id(quy_trinh_id,loai,state)" options="{'create': false, 'create_edit': false}"/>  -->
		                            <field name="nhan_vien_ids" widget="many2many_tags" options="{'create': false, 'create_edit': false}"/>
		        					<field name="ghi_chu"/>
		        					<field name="ngay_het_han" />
		        					<field name="ht_per" readonly = '1' />
		                            <field name="state" readonly = '1'/>
		                            <field name="loai" invisible = '1'/> 
		                        </tree>
					         </field>
					      </page> 
					      
					     <page string="Phân Công Phòng Ban" attrs="{'invisible':['|',('loai','not in',['1_nhom_cv']),'|','&amp;',('quy_trinh_id','!=',False),('ho_tro','=','khong'),'&amp;',('ho_tro','=','khong'),('quy_trinh_id','=',False)]}">
	                    	<field name="phan_cong_phong_ban_line" attrs="{'readonly':[('state','in',['da_giao', 'cho_duyet', 'duyet'])]}" nolabel='1' context = "{'default_phan_cong_phong_ban_id': active_id, 'default_loai': '2_nhom_cv_tg', 'default_state': 'da_giao', 'form_view_ref':'nhom_cong_viec_moi_giao_form'}">
	                    		<tree>
		                			<field name="name" string = 'Tên công việc'/>
		                			<field name="phong_ban_id" required = '1' options="{'create': false, 'create_edit': false}"/>
		               <!--             <field name="quy_trinh_id" on_change = "onchange_quy_trinh_id(quy_trinh_id,loai,state)" options="{'create': false, 'create_edit': false}"/>   -->
		        					<field name="ghi_chu"/>
		                            <field name="ngay_het_han" />
		                            <field name="ht_per" readonly = '1' />
		                            <field name="state" readonly = '1'/>
		                            <field name="loai" invisible = '1'/>
		                        </tree>
					         </field>
					      </page>
		<!-- End Loai: Nhóm CV  -->
					      
		<!-- Loai: Nhóm CV trung gian  -->
					      
					      <page string="Chi tiết thực hiện" attrs="{'invisible':['|',('loai','not in',['2_nhom_cv_tg']),('quy_trinh_id','=',False)]}">
	                    	<field name="ct_th_cv_tg_line" attrs="{'readonly':[('state','in',['cho_duyet', 'duyet'])]}" context = "{'default_loai': '5_ct_th', 'default_state': 'da_giao'}" nolabel='1' >
	                    		<tree>
	                    			<field name="stt"/>
		                			<field name="name" string = 'Tên chi tiết'/>
		                			<field name="nhan_vien_id" required = '1' options="{'create': false, 'create_edit': false}"/>
		                			<field name="yeu_cau_kq" />
		                            <field name="cach_thuc_hien" />
		                            <field name="ngay_het_han" />
		        					<field name="datas" filename="datas_fname" string="Biểu mẫu kết quả" invisible="1"/>
		                            <field name="datas_fname" invisible="1" class="oe_inline oe_right"/>
		                            <field name="state" />
		                            <field name="loai" invisible = '1'/>
		                        </tree>
		                        <form version="7.0">
			                        <header>
					                		<button name="bt_nhan_cttth" states="da_giao" string="Nhận chi tiết thực hiện" type="object" class="oe_highlight"/>
						                    <field name="state" widget="statusbar" statusbar_visible="nhap,da_giao,dang_lam,cho_duyet,duyet" />
						                    <field name="loai" invisible='1'/>
						            </header>  
						            <sheet>
				                        <group col="4" colspan="2">
				                        	<field name="stt"/>
				                        	<field name="name" string = 'Tên chi tiết'/>
				                			<field name="nhan_vien_id" required = '1' options="{'create': false, 'create_edit': false}"/>
				                			<field name="yeu_cau_kq" />
				                            <field name="cach_thuc_hien" />
				                            <field name="ngay_het_han" />
				        					<field name="datas" filename="datas_fname" string="Biểu mẫu kết quả"/>
				                            <field name="datas_fname" invisible="1" class="oe_inline oe_right"/>
				                         </group>  
			                        </sheet>  
		                        </form>
	                		</field>
	                    </page>
	                     <page string="Công việc" attrs="{'invisible':['|',('loai','not in',['2_nhom_cv_tg']),('quy_trinh_id','!=',False)]}">
	                    	<field name="cong_viec_pc_line" attrs="{'readonly':[('state','in',['da_giao', 'cho_duyet', 'duyet'])]}" nolabel='1' context = "{'default_cong_viec_pc_id': active_id, 'default_loai': '3_cv', 'default_state': 'da_giao', 'form_view_ref':'nhom_cong_viec_moi_giao_form'}" >
	                    		<tree>
		                			<field name="name" string = 'Tên công việc'/>
		             <!--               <field name="quy_trinh_id" on_change = "onchange_quy_trinh_id(quy_trinh_id,loai,state)" options="{'create': false, 'create_edit': false}"/>  -->
		                            <field name="nhan_vien_ids" widget="many2many_tags" options="{'create': false, 'create_edit': false}"/>
		        					<field name="ghi_chu"/>
		        					<field name="ngay_het_han" />
		        					<field name="ht_per" readonly = '1' />
		                            <field name="state" readonly = '1'/>
		                            <field name="loai" invisible = '1'/> 
		                        </tree>
					         </field>
					      </page> 
		
		<!-- End Loai: Nhóm CV trung gian  -->
		
		<!-- Loai: CV -->
		
						<page string="Chi tiết thực hiện" attrs="{'invisible':['|',('loai','!=','3_cv'),('quy_trinh_id','=',False)]}">
	                    	<field name="ct_th_cv_line" context = "{'default_loai': '5_ct_th', 'default_state': 'da_giao'}" nolabel='1' >
	                    		<tree>
	                    			<field name="stt"/>
		                			<field name="name" string = 'Tên chi tiết'/>
		                			<field name="nhan_vien_id" options="{'create': false, 'create_edit': false}"/>
		                			<field name="yeu_cau_kq" />
		                            <field name="cach_thuc_hien" />
		                            <field name="ngay_het_han" />
		        					<field name="datas" filename="datas_fname" string="Biểu mẫu kết quả" invisible="1"/>
		                            <field name="datas_fname" invisible="1" class="oe_inline oe_right"/>
		                            <field name="state" />
		                            <field name="loai" invisible = '1'/>
		                        </tree>
		                        <form version="7.0">
			                        <header>
					                		<button name="bt_nhan_cttth" states="da_giao" string="Nhận chi tiết thực hiện" type="object" class="oe_highlight"/>
						                    <field name="state" widget="statusbar" statusbar_visible="nhap,da_giao,dang_lam,cho_duyet,duyet" />
						                    <field name="loai" invisible='1'/>
						            </header>  
						           	<sheet>
				                        <group col="4" colspan="2">
				                        	<field name="stt"/>
				                        	<field name="name" string = 'Tên chi tiết'/>
				                			<field name="nhan_vien_id" required = '1' options="{'create': false, 'create_edit': false}"/>
				                			<field name="yeu_cau_kq" />
				                            <field name="cach_thuc_hien" />
				                            <field name="ngay_het_han" />
				        					<field name="datas" filename="datas_fname" string="Biểu mẫu kết quả"/>
				                            <field name="datas_fname" invisible="1" class="oe_inline oe_right"/>
				                         </group>  
			                         </sheet>  
		                        </form>
	                		</field>
	                    </page>
	                    
	                    <page string="Công việc con" attrs="{'invisible':['|',('loai','!=','3_cv'),('quy_trinh_id','!=',False)]}">
	                    	<field name="cong_viec_con_line" attrs="{'readonly':[('state','in',['da_giao', 'cho_duyet', 'duyet'])]}" nolabel='1' context = "{'default_cong_viec_con_id': active_id, 'default_loai': '4_cv_con', 'default_state': 'da_giao', 'form_view_ref':'nhom_cong_viec_moi_giao_form'}" >
	                    		<tree>
		                			<field name="name" string = 'Tên công việc con'/>
		                <!--            <field name="quy_trinh_id" options="{'create': false, 'create_edit': false}"/>  -->
		                            <field name="nhan_vien_id" options="{'create': false, 'create_edit': false}"/>
		        					<field name="ghi_chu"/>
		        					<field name="ngay_het_han" />
		        					<field name="ht_per" readonly = '1' />
		                            <field name="state" readonly = '1'/>
		                            <field name="loai" invisible = '1'/>
		                        </tree>
	                		</field>
	                    </page>
		
		<!-- End Loai: CV -->
		
		<!-- Loai: CV con -->
		
						<page string="Chi tiết thực hiện" attrs="{'invisible':[('loai','!=','4_cv_con')]}">
	                    	<field name="ct_th_cv_con_line" context = "{'default_loai': '5_ct_th', 'default_state': 'da_giao'}" nolabel='1' >
	                    		<tree>
	                    			<field name="stt"/>
		                			<field name="name" string = 'Tên chi tiết'/>
		                			<field name="nhan_vien_id" options="{'create': false, 'create_edit': false}"/>
		                			<field name="yeu_cau_kq" />
		                            <field name="cach_thuc_hien" />
		                            <field name="ngay_het_han" />
		        					<field name="datas" filename="datas_fname" string="Biểu mẫu kết quả" invisible="1"/>
		                            <field name="datas_fname" invisible="1" class="oe_inline oe_right"/>
		                            <field name="state" />
		                            <field name="loai" invisible = '1'/>
		                        </tree>
		                        <form version="7.0">
			                        <header>
					                		<button name="bt_nhan_cttth" states="da_giao" string="Nhận chi tiết thực hiện" type="object" class="oe_highlight"/>
						                    <field name="state" widget="statusbar" statusbar_visible="nhap,da_giao,dang_lam,cho_duyet,duyet" />
						                    <field name="loai" invisible='1'/>
						            </header>  
						            <sheet>
				                        <group col="4" colspan="2">
				                        	<field name="stt"/>
				                        	<field name="name" string = 'Tên chi tiết'/>
				                			<field name="nhan_vien_id" options="{'create': false, 'create_edit': false}"/>
				                			<field name="yeu_cau_kq" />
				                            <field name="cach_thuc_hien" />
				                            <field name="ngay_het_han" />
				        					<field name="datas" filename="datas_fname" string="Biểu mẫu kết quả"/>
				                            <field name="datas_fname" invisible="1" class="oe_inline oe_right"/>
				                         </group>  
			                         </sheet>  
		                        </form>
	                		</field>
	                    </page>
	                    
		<!-- End Loai: CV con -->
		
					      <page string="Thông tin chi tiết" >
		                    	<group>
			 						<group >
			 							<field name="ho_tro" invisible = '1' widget="radio" attrs="{'invisible':[('loai','!=','1_nhom_cv')], 'readonly':[('state','in',['cho_duyet', 'duyet'])]}"/>
			 							<field name="nhan_vien_ids" widget="many2many_tags" attrs="{'invisible':[('loai','!=','3_cv')],'required':[('loai','=','3_cv')], 'readonly':[('state','in',['cho_duyet', 'duyet'])]}" options="{'create': false, 'create_edit': false}"/>
			 							<field name="cong_viec_con_id" string = 'Công việc' options="{'create': false, 'create_edit': false}" attrs="{'invisible':[('loai','!=','4_cv_con')],'required':[('loai','=','4_cv_con')],'readonly':[('state','in',['cho_duyet', 'duyet'])]}"/>
			 							<field name="stt" attrs="{'invisible':[('loai','!=','5_ct_th')]}"/>
			 							<field name="nhan_vien_id" options="{'create': false, 'create_edit': false}" attrs="{'invisible':[('loai','not in',['4_cv_con', '5_ct_th'])],'required':[('loai','in',['4_cv_con', '5_ct_th'])],'readonly':[('state','in',['cho_duyet', 'duyet'])]}"/>
			                			<field name="yeu_cau_kq" attrs="{'invisible':[('loai','!=','5_ct_th')]}"/>
			                			<field name="trangthai_ncv" invisible='1'/>
					                	<field name="trangthai_cv" invisible='1'/>
					                	<field name="trangthai_cvc" invisible='1'/>
					                	<field name="trangthai_cv_tg" invisible='1'/>
					                	<field name="tt_lanhdao" invisible='1' />
					                	<field name="cv_tg_id" attrs="{'invisible':[('loai','not in',['4_cv_con'])], 'readonly':[('state','in',['cho_duyet', 'duyet'])]}" domain="[('loai','=','2_nhom_cv_tg')]" string = 'Công việc phân công PBHT' options="{'create': false, 'create_edit': false}"/>
					                	<field name="phong_ban_id" options="{'create': false, 'create_edit': false}" attrs="{'invisible':[('loai','not in',['1_nhom_cv','2_nhom_cv_tg'])],'required':[('loai','in',['1_nhom_cv','2_nhom_cv_tg'])],'readonly':[('state','in',['cho_duyet', 'duyet'])]}"/>
					                	<field name="phong_ban_ids" on_change = "onchange_phong_ban_ids(phong_ban_ids)" widget="many2many_tags" options="{'create': false, 'create_edit': false}" attrs="{'invisible':['|',('quy_trinh_id','!=',False),('loai','!=','1_nhom_cv')],'readonly':[('state','in',['cho_duyet', 'duyet'])]}" />
			 							<field name="cong_viec_pc_id" attrs="{'invisible':['|',('loai','not in',['3_cv']),('cong_viec_id','!=',False)],'required':[('cong_viec_id','=',False),('loai','=','3_cv')], 'readonly':[('state','in',['cho_duyet', 'duyet'])]}" domain="[('loai','=','2_nhom_cv_tg')]" string = 'Công việc phân công PBHT' options="{'create': false, 'create_edit': false}"/>
						                <field name="nhom_cv_pc_id" attrs="{'invisible':['|',('loai','not in',['3_cv']),('cong_viec_id','!=',False)],'required':[('cong_viec_id','=',False),('loai','=','3_cv')], 'readonly':[('state','in',['cho_duyet', 'duyet'])]}" domain="[('loai','=','1_nhom_cv')]" string = 'Nhóm công việc' options="{'create': false, 'create_edit': false}"/>
			 							<field name="phan_cong_phong_ban_id" attrs="{'invisible':[('loai','not in',['2_nhom_cv_tg'])],'required':[('loai','=','2_nhom_cv_tg')], 'readonly':[('state','in',['cho_duyet', 'duyet'])]}" domain="[('loai','=','1_nhom_cv')]" options="{'create': false, 'create_edit': false}"/>
						                <field name="cong_viec_id" attrs="{'invisible':['|',('cong_viec_pc_id','!=',False),('loai','not in',['3_cv'])],'required':[('cong_viec_pc_id','=',False),('loai','=','3_cv')], 'readonly':[('state','in',['cho_duyet', 'duyet'])]}" domain="[('loai','=','1_nhom_cv')]" string = 'Nhóm công việc' options="{'create': false, 'create_edit': false}"/>
			 						</group>
				                	<group>
					                	<field name="quy_trinh_id" domain="[('quy_trinh_id','=',False)]" on_change = "onchange_quy_trinh_id(quy_trinh_id,loai,state)" options="{'create': false, 'create_edit': false}" attrs="{'invisible':['|',('ho_tro','=','co'),('loai','=','5_ct_th')], 'readonly':[('state','in',['cho_duyet', 'duyet'])]}" />
						                <field name="ngay_het_han" />
				                		<field name="nhom_cv_id" attrs="{'invisible':[('loai','not in',['4_cv_con'])],'required':[('loai','=','4_cv_con')], 'readonly':[('state','in',['cho_duyet', 'duyet'])]}" domain="[('loai','=','1_nhom_cv')]" string = 'Nhóm công việc' options="{'create': false, 'create_edit': false}"/>
				                		<field name="cach_thuc_hien" attrs="{'invisible':[('loai','!=','5_ct_th')]}"/>
			        					<field name="datas" filename="datas_fname" string="Biểu mẫu kết quả" attrs="{'invisible':[('loai','!=','5_ct_th')]}"/>
			                            <field name="datas_fname" invisible="1" class="oe_inline oe_right" attrs="{'invisible':[('loai','!=','5_ct_th')]}"/>
				                	</group>
				                	<group>
					                	<field name="loai" invisible = '1'/>
				                	</group>
					            </group>
				               	<group col="4" colspan="2" >
				                	<field name="ghi_chu" attrs="{'readonly':[('state','in',['cho_duyet', 'duyet'])]}"/>
				                </group>
					      </page>
					 </notebook>
	                </sheet>
	                
                </form>
            </field>
        </record>
       
        <record model="ir.actions.act_window" id="action_nhom_cong_viec_da_ban_hanh">
            <field name="name">Nhóm công việc đã ban hành</field>
            <field name="res_model">nhom.cong.viec</field>
            <field name="view_type">form</field>
            <field name="view_mode">kanban,tree,form</field>
            <field name="domain">[('state','in',['duyet'])]</field>
            <field name="view_id" ref="nhom_cong_viec_da_ban_hanh_tree"/>
            <field name="context">{'default_loai': '1_nhom_cv','search_default_loai': 1}</field>
            <field name="search_view_id" ref="search_loai"/>
        </record>
        <record id="action_nhom_cong_viec_da_ban_hanh1" model="ir.actions.act_window.view">
            <field eval="0" name="sequence"/>
            <field name="view_mode">kanban</field>
            <field name="view_id" ref="nhom_cong_viec_da_ban_hanh_kanban"/>
            <field name="act_window_id" ref="action_nhom_cong_viec_da_ban_hanh"/>
        </record>
        <record id="action_nhom_cong_viec_da_ban_hanh2" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="nhom_cong_viec_da_ban_hanh_tree"/>
            <field name="act_window_id" ref="action_nhom_cong_viec_da_ban_hanh"/>
        </record>
        <record id="action_nhom_cong_viec_da_ban_hanh3" model="ir.actions.act_window.view">
            <field eval="2" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="nhom_cong_viec_da_ban_hanh_form"/>
            <field name="act_window_id" ref="action_nhom_cong_viec_da_ban_hanh"/>
        </record> 
        
    </data>
</openerp>
