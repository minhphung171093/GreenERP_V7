<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>

		<record model="ir.ui.view" id="nhom_cong_viec_tree">
            <field name="name">nhom.cong.viec.tree</field>
            <field name="model">nhom.cong.viec</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Nhóm công việc">
                	<field name="name" />
                	<field name="phong_ban_id" />
                	<field name="quy_trinh_id" />
                	<field name="ho_tro" />
                	<field name="phong_ban_ids" />
                	<field name="state" />
                </tree>
            </field>
        </record>
        
        <record model="ir.ui.view" id="nhom_cong_viec_form">
            <field name="name">nhom.cong.viec.form</field>
            <field name="model">nhom.cong.viec</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Nhóm công việc" version="7.0">
                <header>
                		<button name="bt_xacnhan_ncv" states="" string="Xác nhận nhóm công việc" type="object" class="oe_highlight"/>
                		<button name="bt_tao_ncv" states="" string="Tạo công việc" type="object" class="oe_highlight"/>
	                    <field name="state" widget="statusbar" statusbar_visible="moi_tao,lam,cho_duyet,duyet" />
	            </header>  
	                <sheet>
	                <group col="4" colspan="2">
	                	<field name="name" />
	                	<field name="phong_ban_id" required = '1' options="{'create': false, 'create_edit': false}"/>
	                	<field name="quy_trinh_id" on_change = "onchange_quy_trinh_id(quy_trinh_id)" options="{'create': false, 'create_edit': false}"/>
	                	<field name="ho_tro" widget="radio" required = '1' />
	                	<field name="ghi_chu" />
	                	<field name="phong_ban_ids" widget="many2many_tags" options="{'create': false, 'create_edit': false}" attrs="{'invisible':[('ho_tro','=','khong')],'required':[('ho_tro','=','co')]}" />
	                	<field name="loai" invisible = '1'/>
	                </group>
                		<notebook>
		                    <page string="Chi tiết thực hiện" attrs="{'invisible':[('quy_trinh_id','=',False)]}">
		                    	<field name="ct_nhom_cv_line" nolabel='1' >
		                    		<tree>
			                			<field name="name" />
			                			<field name="nhan_vien_id" options="{'create': false, 'create_edit': false}"/>
			                			<field name="yeu_cau_kq" />
			                            <field name="cach_thuc_hien" />
			        					<field name="datas" filename="datas_fname" string="Biểu mẫu kết quả"/>
			                            <field name="datas_fname" invisible="1" class="oe_inline oe_right"/>
			                        </tree>
			                        <form>
			                        <group col="4" colspan="2">
			                        	<field name="name" />
			                        	<field name="nhan_vien_id" options="{'create': false, 'create_edit': false}"/>
			                        	<field name="yeu_cau_kq" />
			                            <field name="cach_thuc_hien" />
			        					<field name="datas" filename="datas_fname" string="Biểu mẫu kết quả"/>
			                            <field name="datas_fname" invisible="1" class="oe_inline oe_right"/>
			                         </group>   
			                        </form>
		                		</field>
		                    </page>
		                    
		                    
		                     <page string="Công việc" attrs="{'invisible':[('quy_trinh_id','!=',False)]}">
		                    	<field name="cong_viec_line" nolabel='1' context = "{'default_loai': 'cv'}" create = 'false' edit = 'false' delete = 'false'>
		                    		<tree editable = 'bottom'>
			                			<field name="name" string = 'Tên công việc'/>
			             <!--               <field name="quy_trinh_id" on_change = "onchange_quy_trinh_id(quy_trinh_id)" options="{'create': false, 'create_edit': false}"/>  -->
			                            <field name="nhan_vien_ids" widget="many2many_tags" options="{'create': false, 'create_edit': false}"/>
			        					<field name="ghi_chu"/>
			                            <field name="state" readonly = '1'/>
			                            <field name="loai" invisible = '1'/> 
			                        </tree>
						         </field>
						      </page> 
						      
						     <page string="Phân Công Phòng Ban" attrs="{'invisible':['|',('quy_trinh_id','=',True),('ho_tro','=','khong')]}" >
		                    	<field name="phan_cong_phong_ban_line" nolabel='1' context = "{'default_loai': 'nhom_cv_tg'}">
		                    		<tree editable = 'bottom'>
			                			<field name="name" string = 'Tên công việc'/>
			                			<field name="phong_ban_id" required = '1' options="{'create': false, 'create_edit': false}"/>
			               <!--             <field name="quy_trinh_id" on_change = "onchange_quy_trinh_id(quy_trinh_id)" options="{'create': false, 'create_edit': false}"/>   -->
			        					<field name="ghi_chu"/>
			                            <field name="state" readonly = '1'/>
			                            <field name="loai" invisible = '1'/>
			                        </tree>
						         </field>
						      </page>   
						 </notebook>
	                </sheet>
                </form>
            </field>
        </record>
       
        <record model="ir.actions.act_window" id="action_nhom_cong_viec">
            <field name="name">Nhóm công việc</field>
            <field name="res_model">nhom.cong.viec</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="domain">[('loai','=','nhom_cv'), ('state','in',['nhap', 'moi_tao'])]</field>
            <field name="context">{'default_loai': 'nhom_cv'}</field>
            <field name="view_id" ref="nhom_cong_viec_tree"/>
        </record>
        
        <record id="action_nhom_cong_viec1" model="ir.actions.act_window.view">
            <field eval="0" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="nhom_cong_viec_tree"/>
            <field name="act_window_id" ref="action_nhom_cong_viec"/>
        </record>
        <record id="action_nhom_cong_viec2" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="nhom_cong_viec_form"/>
            <field name="act_window_id" ref="action_nhom_cong_viec"/>
        </record>
        
        
        <record model="ir.ui.view" id="cong_viec_tree">
            <field name="name">cong.viec.tree</field>
            <field name="model">nhom.cong.viec</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Công việc">
                	<field name="name" string = 'Tên công việc'/>
                	<field name="cong_viec_id" string = 'Nhóm công việc' options="{'create': false, 'create_edit': false}"/>
	                <field name="quy_trinh_id" options="{'create': false, 'create_edit': false}"/>
	                <field name="nhan_vien_ids" widget="many2many_tags" options="{'create': false, 'create_edit': false}"/>
					<field name="ghi_chu"/>
	                <field name="state"/>
                </tree>
            </field>
        </record>
        
        <record model="ir.ui.view" id="cong_viec_form">
            <field name="name">cong.viec.form</field>
            <field name="model">nhom.cong.viec</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Công việc" version="7.0">
                <header>
	                    <field name="state" widget="statusbar" statusbar_visible="moi,lam,cho_duyet,duyet" />
	                 
	            </header>  
	                <sheet>
	                 <group>
	                 	   <button name="bt_tao_cv_con" states="" string="Tạo công việc con" type="object" class="oe_highlight oe_right" />
	                </group>
	                <group col="4" colspan="2">
	                	<field name="name" string = 'Tên công việc'/>
		                <field name="quy_trinh_id" on_change = "onchange_quy_trinh_id(quy_trinh_id)" options="{'create': false, 'create_edit': false}"/>
		                <field name="nhan_vien_ids" widget="many2many_tags" options="{'create': false, 'create_edit': false}"/>
		                <field name="cong_viec_id" string = 'Nhóm công việc' options="{'create': false, 'create_edit': false}"/>
						<field name="ghi_chu"/>
	                </group>
                		<notebook>
		                    <page string="Chi tiết thực hiện" attrs="{'invisible':[('quy_trinh_id','=',False)]}">
		                    	<field name="ct_nhom_cv_line" nolabel='1' >
		                    		<tree>
			                			<field name="name" />
			                			<field name="nhan_vien_id" options="{'create': false, 'create_edit': false}"/>
			                			<field name="yeu_cau_kq" />
			                            <field name="cach_thuc_hien" />
			        					<field name="datas" filename="datas_fname" string="Biểu mẫu kết quả"/>
			                            <field name="datas_fname" invisible="1" class="oe_inline oe_right"/>
			                        </tree>
			                        <form>
			                        <group col="4" colspan="2">
			                        	<field name="name" />
			                        	<field name="nhan_vien_id" options="{'create': false, 'create_edit': false}"/>
			                        	<field name="yeu_cau_kq" />
			                            <field name="cach_thuc_hien" />
			        					<field name="datas" filename="datas_fname" string="Biểu mẫu kết quả"/>
			                            <field name="datas_fname" invisible="1" class="oe_inline oe_right"/>
			                         </group>   
			                        </form>
		                		</field>
		                    </page>
		                    
		                    
		                     <page string="Công việc con" attrs="{'invisible':[('quy_trinh_id','!=',False)]}">
		                    	<field name="cong_viec_con_line" nolabel='1' context = "{'default_loai': 'cv_con'}" create = 'false' edit = 'false' delete = 'false'>
		                    		<tree editable = 'bottom'>
			                			<field name="name" string = 'Tên công việc con'/>
			                <!--            <field name="quy_trinh_id" options="{'create': false, 'create_edit': false}"/>  -->
			                            <field name="nhan_vien_id" options="{'create': false, 'create_edit': false}"/>
			        					<field name="ghi_chu"/>
			                            <field name="state" readonly = '1'/>
			                            <field name="loai" invisible = '1'/>
			                        </tree>
		                		</field>
		                    </page>
		                </notebook>
	                </sheet>
                </form>
            </field>
        </record>
       
        <record model="ir.actions.act_window" id="action_cong_viec">
            <field name="name">Công việc</field>
            <field name="res_model">nhom.cong.viec</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="domain">[('loai','=','cv')]</field>
            <field name="context">{'default_loai': 'cv'}</field>
            <field name="view_id" ref="cong_viec_tree"/>
        </record>
        
        <record id="action_cong_viec1" model="ir.actions.act_window.view">
            <field eval="0" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="cong_viec_tree"/>
            <field name="act_window_id" ref="action_cong_viec"/>
        </record>
        <record id="action_cong_viec2" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="cong_viec_form"/>
            <field name="act_window_id" ref="action_cong_viec"/>
        </record>

		<record model="ir.ui.view" id="cong_viec_con_tree">
            <field name="name">cong.viec.con.tree</field>
            <field name="model">nhom.cong.viec</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Công việc con">
                	<field name="name" string = 'Tên công việc con'/>
                	<field name="cong_viec_id" string = 'Nhóm công việc' options="{'create': false, 'create_edit': false}"/>
                	<field name="cong_viec_con_id" string = 'Công việc' options="{'create': false, 'create_edit': false}"/>
	                <field name="quy_trinh_id" options="{'create': false, 'create_edit': false}"/>
	                <field name="nhan_vien_id" options="{'create': false, 'create_edit': false}"/>
					<field name="ghi_chu"/>
	                <field name="state"/>
                </tree>
            </field>
        </record>
        
        <record model="ir.ui.view" id="cong_viec_con_form">
            <field name="name">cong.viec.con.form</field>
            <field name="model">nhom.cong.viec</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Công việc con" version="7.0">
                <header>
	                    <field name="state" widget="statusbar" statusbar_visible="moi,lam,cho_duyet,duyet" />
	            </header>  
	                <sheet>
	                <group col="4" colspan="2">
	                	<field name="name" string = 'Tên công việc con'/>
	                	<field name="cong_viec_id" string = 'Nhóm công việc' options="{'create': false, 'create_edit': false}"/>
	                	<field name="cong_viec_con_id" string = 'Công việc' options="{'create': false, 'create_edit': false}"/>
		                <field name="quy_trinh_id" options="{'create': false, 'create_edit': false}"/>
		                <field name="nhan_vien_id" options="{'create': false, 'create_edit': false}"/>
						<field name="ghi_chu"/>
	                </group>
                		<notebook>
		                    <page string="Chi tiết thực hiện">
		                    	<field name="ct_nhom_cv_line" nolabel='1' >
		                    		<tree>
			                			<field name="name" />
			                			<field name="nhan_vien_id" options="{'create': false, 'create_edit': false}"/>
			                			<field name="yeu_cau_kq" />
			                            <field name="cach_thuc_hien" />
			        					<field name="datas" filename="datas_fname" string="Biểu mẫu kết quả"/>
			                            <field name="datas_fname" invisible="1" class="oe_inline oe_right"/>
			                        </tree>
			                        <form>
			                        <group col="4" colspan="2">
			                        	<field name="name" />
			                        	<field name="nhan_vien_id" options="{'create': false, 'create_edit': false}"/>
			                        	<field name="yeu_cau_kq" />
			                            <field name="cach_thuc_hien" />
			        					<field name="datas" filename="datas_fname" string="Biểu mẫu kết quả"/>
			                            <field name="datas_fname" invisible="1" class="oe_inline oe_right"/>
			                         </group>   
			                        </form>
		                		</field>
		                    </page>
		                </notebook>
	                </sheet>
                </form>
            </field>
        </record>
       
        <record model="ir.actions.act_window" id="action_cong_viec_con">
            <field name="name">Công việc con</field>
            <field name="res_model">nhom.cong.viec</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="domain">[('loai','=','cv_con')]</field>
            <field name="context">{'default_loai': 'cv_con'}</field>
            <field name="view_id" ref="cong_viec_con_tree"/>
        </record>
        
        <record id="action_cong_viec_con1" model="ir.actions.act_window.view">
            <field eval="0" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="cong_viec_con_tree"/>
            <field name="act_window_id" ref="action_cong_viec_con"/>
        </record>
        <record id="action_cong_viec_con2" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="cong_viec_con_form"/>
            <field name="act_window_id" ref="action_cong_viec_con"/>
        </record>

		<record id="quy_trinh_tree_view" model="ir.ui.view">
			<field name="name">quy.trinh.tree</field>
			<field name="model">quy.trinh</field>
			<field name="arch" type="xml">
				<tree string="Quy trình">
					<field name="name"/>
					<field name="phong_ban_id" options="{'create': false, 'create_edit': false}"/>
					<field name="chuc_vu_id" options="{'create': false, 'create_edit': false}"/>
				</tree>
			</field>
		</record>
		
		<record id="quy_trinh_form_view" model="ir.ui.view">
			<field name="name">quy.trinh.form</field>
			<field name="model">quy.trinh</field>
			<field name="arch" type="xml">
				<form string="Quy trình" version="7.0">   
					<sheet>
						<group col="4" colspan="2" >  
							<field name="name"/>
							<field name="phong_ban_id" options="{'create': false, 'create_edit': false}"/>
							<field name="chuc_vu_id" options="{'create': false, 'create_edit': false}"/>
						</group>
							<notebook>
								<page string = "Các bước thực hiện">
									<field name="buoc_thuc_hien_line" nolabel='1' class="oe_green_erp_scroll">
										<tree>
											<field name="name" />
											<field name="yeu_cau_kq"/>
											<field name="cach_thuc_hien"/>
											<field name="datas" filename="datas_fname" string="Biểu mẫu kết quả"/>
			                            	<field name="datas_fname" invisible="1" class="oe_inline oe_right"/>
										</tree>
										<form>
											<group col="4" colspan="2" >  
												<field name="name" />
												<newline/>
												<field name="yeu_cau_kq"/>
												<field name="cach_thuc_hien"/>
												<field name="datas" filename="datas_fname" string="Biểu mẫu kết quả"/>
				                            	<field name="datas_fname" invisible="1" class="oe_inline oe_right"/>
												
											</group>
										</form>
									</field>
								</page>
							</notebook>
					</sheet>
				</form>
			</field>
		</record>
		
        
        <record id="action_quy_trinh_form" model="ir.actions.act_window">
            <field name="name">Quy trình</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">quy.trinh</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="context">{}</field>
            <field name="domain">[]</field>
            <field name="view_id" ref="quy_trinh_tree_view"/>
        </record>
		
    </data>
</openerp>
